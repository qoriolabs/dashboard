!function(){"use strict";function e(e){e.state("app.configurations.services.state.packages.editor",{url:"/:instances",templateUrl:"app/modules/configurations/services/state/packages/editor/editor.html",controller:"PackagesEditorController"})}var t=angular.module("qorDash.configurations.services.state.packages.editor",["ui-notification","ui.bootstrap","mwl.confirm"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a,i){function r(e){if(null==e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;for(var t in e)if(s.call(e,t))return!1;return!0}e.selectedVersion={},e.itemsForSave={},e.newItemsCount=0,e.values={},e.requestsCounter=0,e.versions={},e.liveVersion={},e.$watch("domains",function(){e.domains&&(e.domain=e.domains.filter(function(e){return e.id==t.domain})[0])}),Object.filter=function(e,t){var n;for(n in e)if(e.hasOwnProperty(n)&&t(n))return e[n]},e.$watch("service",function(){e.service&&(e.editorService=e.service,e.editorService.instances=t.instances.split(","),e.editorService.instances.forEach(function(t){e.selectedVersion[t]=e.editorService.versions[0]}),e.deletedVersions={},e.isVersionDeleted=function(t,n){if(!e.deletedVersions[t])return!1;for(var o in e.deletedVersions[t])if(e.deletedVersions[t][o]==n)return!0;return!1},e.changeSelected=function(t){if(e.isVersionDeleted(t,e.selectedVersion[t]))for(var n in e.editorService.versions)e.isVersionDeleted(t,e.editorService.versions[n])||(e.selectedVersion[t]=e.editorService.versions[n]);return!0},e.loadData=function(){e.values={},e.val1={},e.versions={},e.liveVersion={};var a=function(a){for(var i in e.versions[a]){var r=e.versions[a][i],s={method:"GET",url:n+"/v1/pkg/"+t.domain+"/"+a+"/"+e.editorService.service+"/"+r,headers:{"Content-Type":"application/json"}};e.requestsCounter++,o(s).then(function(t){e.requestsCounter--,e.loaded=!0;var n=t.config.url.split("/"),o=n[n.length-1],a=n[n.length-3];e.selectedVersion[a]=o;for(var i in t.data)e.values[i]||(e.values[i]={}),e.values[i][a]||(e.values[i][a]={}),e.values[i][a][o]=t.data[i]},function(){e.requestsCounter--,e.loaded=!0})}};e.editorService.instances.forEach(function(i){var r={method:"GET",url:n+"/v1/pkg/"+t.domain+"/"+i+"/"+e.editorService.service+"/",headers:{"Content-Type":"application/json"}};e.requestsCounter++,o(r).then(function(t){e.requestsCounter--;for(var n in t.data)e.versions[i]||(e.versions[i]=[]),e.versions[i].push(n),t[n]&&(e.liveVersion[i]=n,e.selectedVersion[i]=n);a(i)},function(){})})},e.loadData())});e.changeSelectedVersion=function(t,n){e.selectedVersion[t]=n},e.isLive=function(t,n){return e.liveVersion[t]==n},e.makeLive=function(a,r){$("span[instance="+a+"].set-live-button").addClass("loading").text("Loading...");var s={method:"POST",url:n+"/v1/pkg/"+t.domain+"/"+a+"/"+e.editorService.service+"/"+r+"/live",headers:{"Content-Type":"application/json"}};o(s).then(function(){i.success("Live version for "+a+" has been changed."),$("span[instance="+a+"].set-live-button").removeClass("loading").text("Set live"),e.editorService.live[a]=r},function(){$("span[instance="+a+"].set-live-button").removeClass("loading").text("Set live")})};var s=Object.prototype.hasOwnProperty;e.isSavable=function(){return!r(e.itemsForSave)||!r(e.itemsForDelete)},e.makeCopy=function(r,s){var l=(a.open({animation:!0,templateUrl:"newVersionModal.html",controller:["$scope","$modalInstance","version","instance","instances",function(e,t,n,o,a){e.newVersionName="",e.version=n,e.instance=o,e.instances=a,e.targetInstance="",e.ok=function(){e.newVersionName&&e.targetInstance&&l(e.newVersionName,e.targetInstance,t)},e.cancel=function(){t.dismiss("cancel")}}],resolve:{version:function(){return s},instance:function(){return r},instances:function(){return e.service.instances}}}),function(a,l,c){if(a&&l){var d={};for(var u in e.values)e.values[u][r]&&e.values[u][r][s]&&(d[u]=e.values[u][r][s]);$("#config-modal-ok-button").button("loading");var m={method:"POST",url:n+"/v1/pkg/"+t.domain+"/"+l+"/"+e.editorService.service+"/"+a,headers:{"Content-Type":"application/json"},data:d};o(m).then(function(){e.editorService.versions.push(a);for(var t in e.deletedVersions)t!=l&&e.deletedVersions[t].push(a);for(t in d)e.values[t][l][a]=e.values[t][r][s];e.changeSelectedVersion(l,a),i.success("Copy created"),c.close()},function(){$("#config-modal-ok-button").button("reset")})}})},e.save=function(){$("#env-save-button").button("loading");for(var t in e.itemsForSave){var a=e.itemsForSave[t];for(var r in a){var s=e.itemsForSave[t][r],l={method:"PUT",url:n+"/v1/pkg/"+e.domain.id+"/"+t+"/"+e.editorService.service+"/"+r,headers:{"Content-Type":"application/json"},data:s};o(l).then(function(){i.success("Saved successfully"),$("#env-save-button").button("reset")},function(){i.error("Saving error: "+error.error),$("#env-save-button").button("reset")})}}e.itemsForSave={}},e.updateValues=function(t,n,o,a){e.itemsForSave[o]||(e.itemsForSave[o]=[]),e.itemsForSave[o][a]||(e.itemsForSave[o][a]={}),e.itemsForSave[o][a][t]=n}}angular.module("qorDash.configurations.services.state.packages.editor").config(["NotificationProvider",function(e){e.setOptions({delay:5e3,positionX:"right",positionY:"bottom"})}]),e.$inject=["$scope","$stateParams","API_HOST","$http","$modal","Notification"],angular.module("qorDash.configurations.services.state.packages.editor").controller("PackagesEditorController",e)}(),function(){"use strict";function e(e){e.state("app.configurations.services.state.instances.editor",{url:"/:instances",templateUrl:"app/modules/configurations/services/state/instances/editor/editor.html",controller:"EditorController"})}var t=angular.module("qorDash.configurations.services.state.instances.editor",["ui-notification","ui.bootstrap","mwl.confirm"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a,i,r,s){function l(e){if(null==e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;for(var t in e)if(u.call(e,t))return!1;return!0}function c(){for(var t in e.val1)e.val1[t].name=t,e.values.push(e.val1[t])}e.selectedVersion={},e.itemsForSave={},e.newItemsCount=0,e.dashVersions={},e.values=[],e.val1={},e.requestsCounter=0,e.versions={},e.liveVersion={},e.createVersion=function(a,r){var l={method:"POST",url:n+"/v1/env/"+t.domain+"/"+a+"/"+e.service.service+"/"+r};return o(l).then(function(){i.success("Successfully created")},function(e){s.showError(e.data,e.status)})},e.clickAddNewVersion=function(t){a.open({animation:!0,templateUrl:"app/modules/configurations/services/state/instances/editor/new-version-modal.html",controller:"EditorNewVersionController",size:"sm",resolve:{createVersion:function(){return e.createVersion},instance:function(){return t}}})},e.$watch("domains",function(){e.domains&&(e.domain=e.domains.filter(function(e){return e.id==t.domain})[0])}),Object.filter=function(e,t){var n;for(n in e)if(e.hasOwnProperty(n)&&t(n))return e[n]},e.$watch("service",function(){e.service&&(e.editorService=e.service,e.editorService.instances=t.instances.split(","),e.loadData=function(){e.values=[],e.val1={},e.deledVersions={},e.versions={},e.liveVersion={};var a=function(a){for(var i in e.versions[a]){var r=e.versions[a][i],s={method:"GET",url:n+"/v1/env/"+t.domain+"/"+a+"/"+e.editorService.service+"/"+r,headers:{"Content-Type":"application/json"},version:r};e.requestsCounter++,o(s).then(function(t){e.requestsCounter--,e.loaded=!0;var n=t.config.version;for(var o in t.data)e.val1[o]||(e.val1[o]={}),e.val1[o][a]||(e.val1[o][a]={}),e.val1[o][a][n]||(e.val1[o][a][n]={}),e.val1[o][a][n].value=t.data[o]?t.data[o]:"-",e.dashVersions[a]||(e.dashVersions[a]={}),e.dashVersions[a][n]=t.headers("X-Dash-Version");e.requestsCounter<=0&&c()},function(){e.requestsCounter--,e.loaded=!0,e.requestsCounter<=0&&c()})}};e.editorService.instances.forEach(function(i){var r={method:"GET",url:n+"/v1/env/"+t.domain+"/"+i+"/"+e.editorService.service+"/",headers:{"Content-Type":"application/json"}};e.requestsCounter++,o(r).then(function(t){e.requestsCounter--;for(var n in t.data)e.versions[i]||(e.versions[i]=[]),e.versions[i].push(n),t.data[n]&&(e.liveVersion[i]=n,e.selectedVersion[i]=n);a(i)},function(){})})},e.loadData())});var d=function(t){for(var n in e.editorService.instances)if(e.editorService.instances[n]==t)return!0;return!1};e.changeSelectedVersion=function(t,n){e.selectedVersion[t]=n},e.isLive=function(t,n){return e.editorService.live[t]==n},e.makeLive=function(a,r){$("span[instance="+a+"].set-live-button").addClass("loading").text("Loading...");var s={method:"POST",url:n+"/v1/env/"+t.domain+"/"+a+"/"+e.editorService.service+"/"+r+"/live",headers:{"Content-Type":"application/json"}};o(s).then(function(){i.success("Live version for "+a+" has been changed."),$("span[instance="+a+"].set-live-button").removeClass("loading").text("Set live"),e.editorService.live[a]=r},function(){$("span[instance="+a+"].set-live-button").removeClass("loading").text("Set live")})};var u=Object.prototype.hasOwnProperty;e.isSavable=function(){return!l(e.itemsForSave)||!l(e.itemsForDelete)},e.makeCopy=function(r,s){var l=(a.open({animation:!0,templateUrl:"newVersionModal.html",controller:["$scope","$modalInstance","version","instance","instances",function(e,t,n,o,a){e.newVersionName="",e.version=n,e.instance=o,e.instances=a,e.targetInstance="",e.ok=function(){e.newVersionName&&e.targetInstance&&l(e.newVersionName,e.targetInstance,t)},e.cancel=function(){t.dismiss("cancel")}}],resolve:{version:function(){return s},instance:function(){return r},instances:function(){return e.service.instances}}}),function(a,l,c){if($("#config-modal-ok-button").button("loading"),a&&l){var d={method:"GET",url:n+"/v1/env/"+t.domain+"/"+r+"/"+e.editorService.service+"/"+s,headers:{"Content-Type":"application/json"},version:s},u={};o(d).then(function(r){u=r.data;var s={method:"POST",url:n+"/v1/env/"+t.domain+"/"+l+"/"+e.editorService.service+"/"+a,headers:{"Content-Type":"application/json"},data:data};o(s).then(function(){e.versions[l].push(a);for(var t in e.values)e.values[t][l]&&(e.values[t][l][a]={value:u[e.values[t].name]});i.success("Copy created"),c.close()},function(){$("#config-modal-ok-button").button("reset")})},function(){$("#config-modal-ok-button").button("reset")})}})},e.save=function(){if($("#env-save-button").button("loading"),0!=e.newItemsCount)for(var t=e.values.length-1;e.newItemsCount;e.newItemsCount--){var a=e.values[t];for(var r in a)if(d(r)){var s=a[r];for(var l in s)e.itemsForSave[r]||(e.itemsForSave[r]={}),e.itemsForSave[r][l]||(e.itemsForSave[r][l]={}),e.itemsForSave[r][l].update||(e.itemsForSave[r][l].update={}),e.itemsForSave[r][l].update[a.name]=s[l].value}}for(var c in e.itemsForSave){var u=e.itemsForSave[c];for(var m in u){var p=e.itemsForSave[c][m],v={method:"PATCH",url:n+"/v1/env/"+e.domain.id+"/"+c+"/"+e.editorService.service+"/"+m,headers:{"Content-Type":"application/json","X-Dash-Version":e.dashVersions[c]?e.dashVersions[c][m]||"":""},data:p};v.data["delete"]&&o(v).then(function(){i.success("Saved successfully"),$("#env-save-button").button("reset"),e.loadData()},function(){$("#env-save-button").button("reset")})}}e.itemsForSave={},e.itemsForDelete=[]},e.addValue=function(){$(".editor-content").parent().scrollTop($(".editor-content").height()+80);var t={};t.name="",e.editorService.instances.forEach(function(n){t[n]={},e.versions[n].forEach(function(e){t[n][e]=""})}),e.values.push(t),e.newItemsCount++},e.updateValues=function(t,n,o,a){e.itemsForSave[o]||(e.itemsForSave[o]=[]),e.itemsForSave[o][a]||(e.itemsForSave[o][a]={update:{},"delete":[]}),e.itemsForSave[o][a].update[t]=n;for(var i in e.values)if(e.values[i].name==t)return void(e.values[i].value=n)},e.deleteValue=function(t,n,o){return e.itemsForSave[n]||(e.itemsForSave[n]=[]),e.itemsForSave[n][o]?void e.itemsForSave[n][o]["delete"].push(t):void(e.itemsForSave[n][o]={update:{},"delete":[t]})},e.deleteInAllVersions=function(t){for(var n in e.values)e.values[n].name==t&&e.values.splice(n,1);if(t)for(var n in e.editorService.instances)e.values[n][e.editorService.instances[n]][e.selectedVersion[e.editorService.instances[n]]]&&0!=e.values[n][e.editorService.instances[n]][e.selectedVersion[e.editorService.instances[n]]].value.length&&e.deleteValue(t,e.editorService.instances[n],e.selectedVersion[e.editorService.instances[n]])}}function t(){return function(e,t,n){t.bind("keypress",function(t){13===t.keyCode&&e.$apply(n.onEnter)})}}function n(){return function(e,t,n){t.bind("keydown",function(t){27===t.keyCode&&e.$apply(n.onEsc)})}}function o(e){return{scope:{model:"=inlineEdit",key:"=key",handleSave:"&onSave",handleCancel:"&onCancel",handleDelete:"&onDelete",isName:"=isName",parent:"=",version:"=",instance:"=",changeSelected:"=",versions:"="},link:function(t,n){var o;t.edit=function(){t.showEdit=!1,t.oldValue=t.model,t.isName&&t.model||(t.editMode=!0,t.previousValue=t.model,e(function(){var e=n.find("textarea")[0];e.style.height=e.scrollHeight+"px",e.focus()},0,!1))},t.save=function(){t.editMode=!1,t.model||(t.showEdit=!0),t.model!=t.oldValue&&t.handleSave({name:t.key,newValue:t.model,instance:t.instance,version:t.version})},t.isSaveAvailable=function(){return!0},t.isDeleteUnavailable=function(){return t.isName||t.editMode||!t.model},t.isLeftVersionAvailable=function(){var e=0;for(var n in t.versions)if(++e,t.versions[n]==t.version&&e>1)return!0;return!1},t.isRightVersionAvailable=function(){var e=0,n=0;for(var o in t.versions)++e,t.versions[o]==t.version&&(n=e);return e-n>0},t.changeVersionToTheRight=function(){if(t.isRightVersionAvailable()){var e=!1;for(var n in t.versions){if(e)return void t.changeSelected(t.instance,t.versions[n]);t.versions[n]==t.version&&e++}}},t.changeVersionToTheLeft=function(){if(t.isLeftVersionAvailable()){var e=null;for(var n in t.versions){if(t.versions[n]==t.version){if(!e)continue;t.changeSelected(t.instance,e)}e=t.versions[n]}}},t["delete"]=function(){console.log(t),t.model="",t.showEdit=!0,t.handleDelete({name:t.key,instance:t.instance,version:t.version})},t.isEditAvailable=function(){return(t.model?!1:!0)&&!t.editMode},t.cancel=function(){t.editMode=!1,t.model=o,t.handleCancel({value:t.model})},t.remove=function(e){t.handleDelete({name:e})},t.model||(t.showEdit=!0)},templateUrl:"inlineEdit.html"}}function a(){return{link:function(){},templateUrl:"addNewValue.html"}}function i(){return{link:function(){[].slice.call(document.querySelectorAll("select.cs-select")).forEach(function(e){new SelectFx(e)})}}}function r(e,t,n,o){e.instance=o,e.ok=function(a){e.versionName&&(e.event=a,$(a.target).button("loading"),t(o,e.versionName).then(function(){n.close()},function(){$(e.event.target).button("reset")}))},e.cancel=function(){n.dismiss("cancel")}}angular.module("qorDash.configurations.services.state.instances.editor").config(["NotificationProvider",function(e){e.setOptions({delay:5e3,positionX:"right",positionY:"bottom"})}]),e.$inject=["$scope","$stateParams","API_HOST","$http","$modal","Notification","$timeout","errorHandler"],o.$inject=["$timeout"],r.$inject=["$scope","createVersion","$modalInstance","instance"],angular.module("qorDash.configurations.services.state.instances.editor").controller("EditorController",e).directive("inlineEdit",o).directive("onEnter",t).directive("onEsc",n).directive("addValue",a).directive("customSelect",i).controller("EditorNewVersionController",r)}(),function(){"use strict";function e(e){e.state("app.configurations.services.state.files.files-view",{url:"/:file/:instance/:version",params:{file:{},instance:{value:null,squash:!0},version:{value:null,squash:!0}},templateUrl:"app/modules/configurations/services/state/files/files-view/files-view.html",controller:"FilesViewController"})}var t=angular.module("qorDash.configurations.services.state.files.files-view",["ui.codemirror","ui-notification","diff-match-patch"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a,i,r,s){e.addNewVersionClicked=!1,e.selectInstance=function(n){e.selectedInstance!=n&&(e.selectedVersion=""),e.selectedInstance=n,t.go(".",{instance:e.selectedInstance,version:e.selectedVersion}),e.showFile()},e.$watch("instance",function(){e.instance&&e._loadVersions()}),e.versions={},e.liveVersion={},e.instances=[],e._loadVersions=function(){e.instance.instances.forEach(function(t){o.files.getVersions(n.domain,t,e.service,n.file).then(function(n){n=n.data,e.versions[t]||(e.versions[t]=[]),0!=n.length&&e.instances.push(t);for(var o in n)e.versions[t].push(o),n[o]&&(e.liveVersion[t]=o)},function(t){e.error=r.showError(t)})})},e.selectVersion=function(n){e.selectedVersion=n,e.addNewVersionClicked&&(e.addNewVersionClicked=!1),t.go(".",{instance:e.selectedInstance,version:e.selectedVersion}),e.showFile()},e.clickAddNewVersion=function(){e.addNewVersionClicked=!0,e.showBaseFile()},e.showFile=function(){e.selectedInstance&&e.selectedVersion&&o.files.getFileContent(n.domain,e.selectedInstance,e.service,e.selectedVersion,n.file).then(function(t){e.fileContents=t.data,e.fileVersion=t.headers("X-Dash-Version")},function(t){e.error=r.showError(t)})},e.showBaseFile=function(){e.selectedInstance&&o.files.getBaseFile(n.domain,e.service,n.file).then(function(t){e.fileContents=t.data,e.fileVersion=t.headers("X-Dash-Version")},function(t){e.error=r.showError(t)})},e.createVersion=function(t){return e.contentsChanged&&(request.data=e.fileContents),o.files.createVersion(n.domain,e.selectedInstance,e.service,t,n.file,e.fileVersion).success(function(){e.instance.versions.push(t),e.selectVersion(t),e.contentsChanged=!1,s.success("Successfully created")}).error(function(e){r.showError(e)})},e.saveFile=function(){return e.fileContents?e.addNewVersionClicked?void a.open({animation:!0,templateUrl:"app/modules/configurations/services/state/files/new-version-modal.html",controller:"NewVersionController",size:"sm",resolve:{createVersion:function(){return e.createVersion}}}):void o.files.saveFile(n.domain,e.selectedInstance,e.service,e.selectedVersion,n.file,e.fileVersion,e.fileContents).then(function(t){e.fileVersion=t.headers("X-Dash-Version"),e.contentsChanged=!1,s.success("Saved successfully")},function(){e.loading=!1}):void 0},e.cloneFile=function(){a.open({animation:!0,templateUrl:"app/modules/configurations/services/state/files/files-view/files-clone-modal.html",controller:"FilesCloneController",resolve:{instance:function(){return e.selectedInstance},version:function(){return e.selectedVersion},instances:function(){return e.instance.instances},clone:function(){return e._cloneFile}}})},e._cloneFile=function(a,r){var l=i.defer();return o.files.cloneFile(n.domain,e.selectedInstance,e.service,e.selectedVersion,n.file,e.fileContents).then(function(){l.resolve(),s.success("Cloned successfully"),e.loadInstance().then(function(){t.go(".",{instance:r,version:a})})},function(t){l.reject();var n=t?t.error:"unknown server error";s.error("Can't load data: "+n),e.loading=!1}),l.promise},e.deleteFile=function(){a.open({animation:!0,templateUrl:"app/modules/configurations/services/state/files/files-view/files-delete-modal.html",controller:"FilesDeleteController",resolve:{instance:function(){return e.selectedInstance},version:function(){return e.selectedVersion},fileName:function(){return e.fileName},_delete:function(){return e._deleteFile}}})},e._deleteFile=function(){var a=i.defer();return o.files.deleteFile(n.domain,e.selectedInstance,e.service,e.selectedVersion,n.file,e.fileVersion).then(function(){a.resolve(),s.success("Deleted successfully"),e.loadInstance().then(function(){t.go(".")})},function(t){a.reject();var n=t.data?t.data.error:"unknown server error";s.error("Can't load data: "+n),e.loading=!1}),a.promise},e.isInstanceActive=function(t){return t==e.selectedInstance},e.isVersionActive=function(t){return e.addNewVersionClicked?!1:t==e.selectedVersion},e.isVersionLive=function(t){return t?t==e.liveVersion[e.selectedInstance]:!1},e.isLive=function(t,n){return e.instance&&n&&t&&e.instance.live[t]&&e.instance.live[t][e.fileName]?n!=e.instance.live[t][e.fileName]:!1},e.makeLive=function(t,a){o.files.makeVersionLive(n.domain,t,e.service,a,n.file).then(function(){s.success("Live version for "+t+" has been changed."),e.liveVersion[e.selectedInstance]=a},function(e){var t=e?e.error:"unknown server error";s.error("Can't load data: "+t)})},e.fileName=n.file,e.selectedInstance=n.instance,e.selectedVersion=n.version,e.fileContents="",e.$watch("service",function(t){t&&e.showFile()})}function t(e,t,n,o,a,i){e.newVersionName="",e.version=o,e.instance=n,e.instances=a,e.targetInstance="",e.ok=function(){e.newVersionName&&e.targetInstance&&i(e.newVersionName,e.targetInstance)["finally"](function(){t.close()})},e.cancel=function(){t.dismiss("cancel")}}function n(e,t,n,o,a,i){e.version=o,e.instance=n,e.fileName=a,e.ok=function(){i()["finally"](function(){t.close()})},e.cancel=function(){t.dismiss("cancel")}}function o(e,t,n){e.ok=function(o){e.versionName&&(e.event=o,$(o.target).button("loading"),t(e.versionName).success(function(){n.close()}).error(function(){$(e.event.target).button("reset")}))},e.cancel=function(){n.dismiss("cancel")}}e.$inject=["$scope","$state","$stateParams","configurationService","$modal","$q","errorHandler","Notification"],t.$inject=["$scope","$modalInstance","instance","version","instances","clone"],n.$inject=["$scope","$modalInstance","instance","version","fileName","_delete"],o.$inject=["$scope","createVersion","$modalInstance"],angular.module("qorDash.configurations.services.state.files.files-view").controller("FilesViewController",e).controller("FilesCloneController",t).controller("FilesDeleteController",n).controller("NewVersionController",o)}(),function(){"use strict";function e(e){e.state("app.configurations.services.state.files.files-view.diff",{url:"/diff/:diffToInstance/:diffToVersion",params:{file:{},instance:{},version:{},diffToInstance:{value:null,squash:!0},diffToVersion:{value:null,squash:!0},_preventAnimation:{value:null,squash:!0}},templateUrl:"app/modules/configurations/services/state/files/files-diff/files-diff.html",controller:"FilesEditorController"})}var t=angular.module("qorDash.configurations.services.state.files.files-view.diff",["ui.codemirror","ui-notification","diff-match-patch"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a){e.$watch("domains",function(){e.domains&&(e.domain=e.domains.filter(function(e){return e.id==n.domain})[0])}),e.$watch("service",function(){e.service&&e.showDiff()}),e.options={attrs:{insert:{"data-attr":"insert","class":"insertion"},"delete":{"data-attr":"delete"},equal:{"data-attr":"equal"}}},e.fileName=n.file,e.selectedFirstInstance=n.instance,e.selectedSecondInstance=n.diffToInstance,e.selectedFirstVersion=n.version,e.selectedSecondVersion=n.diffToVersion,e.syncState=function(){t.go(".",{instance:e.selectedFirstInstance,version:e.selectedFirstVersion,diffToInstance:e.selectedSecondInstance,diffToVersion:e.selectedSecondVersion,_preventAnimation:!0})},e.selectFirstInstance=function(t){e.selectedFirstInstance=t,e.syncState(),e.showDiff()},e.selectSecondInstance=function(t){e.selectedSecondInstance=t,e.syncState(),e.showDiff()},e.selectFirstVersion=function(t){e.selectedFirstVersion=t,e.syncState(),e.showDiff()},e.selectSecondVersion=function(t){e.selectedSecondVersion=t,e.syncState(),e.showDiff()},e.isFirstInstanceActive=function(t){return t==e.selectedFirstInstance},e.isSecondInstanceActive=function(t){return t==e.selectedSecondInstance},e.isFirstVersionActive=function(t){return t==e.selectedFirstVersion},e.isSecondVersionActive=function(t){return t==e.selectedSecondVersion},e.isFirstVersionLive=function(t){return e.selectedFirstInstance&&e.instance?t==e.instance.live[e.selectedFirstInstance][e.fileName]:!1},e.isSecondVersionLive=function(t){return e.selectedSecondInstance&&e.instance?t==e.instance.live[e.selectedSecondInstance][e.fileName]:!1},e.showDiff=function(){e.selectedFirstInstance&&e.selectedSecondInstance&&e.selectedFirstVersion&&e.selectedSecondVersion&&(e.loading=!0,o.files.getFileContent(n.domain,e.selectedFirstInstance,e.service,e.selectedFirstVersion,n.file).then(function(t){e.firstFileData=t.data,o.files.getFileContent(n.domain,e.selectedSecondInstance,e.service,e.selectedSecondVersion,n.file).then(function(t){e.secondFileData=t.data},function(t){e.error=a.showError(t)})},function(t){e.error=a.showError(t)}))}}e.$inject=["$scope","$state","$stateParams","configurationService","errorHandler"],angular.module("qorDash.configurations.services.state.files.files-view.diff").controller("FilesEditorController",e)}(),function(){"use strict";function e(e){e.state("app.manage.settings.authentication.domain",{url:"/:authDomain",templateUrl:"app/modules/manage/settings/authentication/domain/domain.html",controller:"AuthenticationDomainController",controllerAs:"vm",resolve:{resolvedToken:["manageLoader",function(e){return e.load()}],resolvedDomain:["authenticationService","resolvedToken","$stateParams",function(e,t,n){return e.getDomainInfo(n.authDomain,t)}]}})}angular.module("qorDash.manage.settings.authentication.domain",["xeditable"]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a,i){function r(e,t,n,o){i.dataChanged(l.domain,e,t,n,o),l.isDataChanged=!0}function s(){l.isSaveLoading=!0,"blinker.com"===a.authDomain?e.saveDomainInfo(a.authDomain,l.domain,l.token).then(function(){l.isDataChanged=!1,l.isSaveLoading=!1,o.success("All changes saved")}):alert("Save is only available for blinker.com")}var l=this;l.dataChanged=r,l.save=s,l.token=n,l.domain=t,l.isDataChanged=!1,l.configObject={".services":"add|edit",".services.*.webhooks":"add|edit",".services.*.new_account_preset.scopes":"add|edit",".url":"edit",".name":"edit",".":"add|edit"}}angular.module("qorDash.manage.settings.authentication.domain").controller("AuthenticationDomainController",e),e.$inject=["authenticationService","resolvedDomain","resolvedToken","Notification","$stateParams","objectEdit"]}(),function(){"use strict";function e(e){e.state("app.configurations.services.state.packages",{url:"/packages",templateUrl:"app/modules/configurations/services/state/packages/packages.html",controller:"PackagesController",resolve:{resolvedPackage:["$stateParams","configurationService",function(e,t){return t.getPackage(e.domain)}]}})}angular.module("qorDash.configurations.services.state.packages",[]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n){if(e.checked={},e.saveAvailableHelper=0,e.service=n[t.params.service],e.instances=e.service.instances,e.instances.forEach(function(t){e.saveAvailableHelper++,e.checked[t]=!0}),t.params.instances){for(var o in e.checked)e.checked[o]=!1;t.params.instances.split(",").forEach(function(t){"undefined"!=e.checked[t]&&(e.checked[t]=!0,e.saveAvailableHelper++)})}e.changeState=function(t){t?e.saveAvailableHelper++:e.saveAvailableHelper--},e.show=function(){var n=[];for(var o in e.checked)e.checked[o]&&n.push(o);n.length>0&&t.go(".editor",{instances:n})}}angular.module("qorDash.configurations.services.state.packages").controller("PackagesController",e),e.$inject=["$scope","$state","resolvedPackage"]}(),function(){"use strict";function e(e){e.state("app.configurations.services.state.instances",{url:"/instances",templateUrl:"app/modules/configurations/services/state/instances/instances.html",controller:"InstancesController",resolve:{resolvedEnv:["$stateParams","configurationService",function(e,t){return t.loadEnv(e.domain)}]}})}angular.module("qorDash.configurations.services.state.instances",[]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n){if(e.saveAvailableHelper=0,e.checked={},e.service=n[t.params.service],e.instances=e.service.instances,e.instances.forEach(function(t){e.saveAvailableHelper++,e.checked[t]=!0}),t.params.instances){for(var o in e.checked)e.checked[o]=!1;t.params.instances.split(",").forEach(function(t){"undefined"!=e.checked[t]&&(e.checked[t]=!0,e.saveAvailableHelper++)})}e.changeState=function(t){t?e.saveAvailableHelper++:e.saveAvailableHelper--},e.show=function(){var n=[];for(var o in e.checked)e.checked[o]&&n.push(o);n.length>0&&t.go(".editor",{instances:n})}}angular.module("qorDash.configurations.services.state.instances").controller("InstancesController",e),e.$inject=["$scope","$state","resolvedEnv"]}(),function(){"use strict";function e(e){e.state("app.configurations.services.state.files",{url:"/files",templateUrl:"app/modules/configurations/services/state/files/files.html",controller:"FilesController",resolve:{resolvedInstance:["$stateParams","configurationService",function(e,t){return t.getInstance(e.domain)}]}})}angular.module("qorDash.configurations.services.state.files",[]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a,i,r){e.instance=n[o.service],e.service=o.service,e.domain=o.domain,e.openNewFileModal=function(){i.open({animation:!0,templateUrl:"app/modules/configurations/services/state/files/new-file-modal.html",controller:"NewFileController",size:"lg",resolve:{createFile:function(){return e.createFile}}})},e.createFile=function(n,i){return t.files.createFile(e.domain,o.service,n,i).success(function(){e.instance.objects.push(n),r.success("Successfully created")}).error(function(e,t){a.showError(e,t)})}}function t(e,t,n){e.ok=function(o){e.fileName&&e.fileContent&&(e.event=o,$(o.target).button("loading"),t(e.fileName,e.fileContent).success(function(){n.close()}).error(function(){$(e.event.target).button("reset")}))},e.cancel=function(){n.dismiss("cancel")}}e.$inject=["$scope","configurationService","resolvedInstance","$stateParams","errorHandler","$modal","Notification"],t.$inject=["$scope","createFile","$modalInstance"],angular.module("qorDash.configurations.services.state.files").controller("FilesController",e).controller("NewFileController",t)}(),function(){"use strict";function e(e){e.state("app.manage.settings.authentication",{url:"/authentication",templateUrl:"app/modules/manage/settings/authentication/authentication.html",controller:"AuthenticationSettingsController",controllerAs:"vm",resolve:{resolvedToken:["manageLoader",function(e){return e.load()}],resolvedDomains:["authenticationService","resolvedToken",function(e,t){return e.getDomains(t)}]}})}angular.module("qorDash.manage.settings.authentication",["qorDash.manage.settings.authentication.domain"]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t){var n=this;n.token=e,n.domains=t}angular.module("qorDash.manage.settings.authentication").controller("AuthenticationSettingsController",e),e.$inject=["resolvedToken","resolvedDomains"]}(),function(){"use strict";function e(e){e.state("app.manage.accounts",{url:"/accounts",templateUrl:"app/modules/manage/accounts/accounts.html",controller:"AccountsController",controllerAs:"vm",resolve:{resolvedToken:["manageLoader",function(e){return e.load()}],resolvedAccounts:["accountsService","resolvedToken",function(e,t){return e.getAccounts(t)}]}})}angular.module("qorDash.manage.accounts",[]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a){function i(e){d.accounts.push({id:e.id,primary:e}),o.success("Successfully created"),d.cancel()}function r(e,t,o){return n.createAccount(e,t,o,d.token).then(d._addUserResolve)}function s(e,t){return n.createGoogleAccount(e,t,d.token).then(d._addUserResolve)}function l(e,t){return n.createGitHubAccount(e,t,d.token).then(d._addUserResolve)}function c(){a.dismiss("cancel")}var d=this;d.accounts=e,d.token=t,d.cancel=c,d.addUser=r,d.addGoogleUser=s,d.addGitHubUser=l,d._addUserResolve=i}angular.module("qorDash.manage.accounts").controller("NewUserModalController",e),e.$inject=["resolvedAccounts","resolvedToken","accountsService","Notification","$modalInstance"]}(),function(){"use strict";function e(e){e.state("app.manage.accounts.account",{url:"/:id",templateUrl:"app/modules/manage/accounts/account/account.html",controller:"AccountController",controllerAs:"vm",resolve:{resolvedToken:["manageLoader",function(e){return e.load()
}],resolvedAccount:["accountsService","resolvedToken","$stateParams",function(e,t,n){return e.getAccountById(n.id,t)}]}})}angular.module("qorDash.manage.accounts.account",[]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t){function n(e,n,o,i){t.dataChanged(a.account,e,n,o,i),a.isDataChanged=!0}function o(){a.isDataChanged=!1,alert("Need to save")}var a=this;a.config={".services":"add"},a.isDataChanged=!1,a.dataChanged=n,a.save=o,a.account=e}angular.module("qorDash.manage.accounts").controller("AccountController",e),e.$inject=["resolvedAccount","objectEdit"]}(),function(){"use strict";function e(e){e.state("app.configurations.services.state",{url:"/:service",templateUrl:"app/modules/configurations/services/state/state.html"})}angular.module("qorDash.configurations.services.state",[]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";angular.module("qorDash.auth.oauth",[])}(),function(){"use strict";function e(e,t,n,o){function a(){var e=t.defer();return gapi.load("auth2",function(){e.resolve(gapi)}),e.promise}function i(){return a().then(function(e){var t=e.auth2.init(l);return t.signIn({scope:"openid"})})}function r(){return a().then(function(e){var t=e.auth2.getAuthInstance();return t.signOut()})}function s(t){var o=t.getAuthResponse().access_token;return e.post(n+"/auth",{oauth2_access_token:o,oauth2_provider:"google.com"})}var l={client_id:o,cookie_policy:"single_host_origin"};return{login:i,logout:r,exchangeToken:s}}angular.module("qorDash.auth.oauth").factory("oauthProviderGoogle",e),e.$inject=["$http","$q","AUTH_API_URL","GOOGLE_CLIENT_ID"]}(),function(){"use strict";function e(e,t,n,o,a){function i(){return a.openPopup({clientId:o,redirectUri:"http://dashboard.qoriolabs.com",state:a.state,scope:""})}function r(t){return e.post(n+"/auth",{oauth2_code:t,oauth2_state:a.state,oauth2_provider:"github.com"})}var s={login:i,exchangeToken:r};return s}angular.module("qorDash.auth.oauth").factory("oauthProviderGitHub",e),e.$inject=["$http","$q","AUTH_API_URL","GITHUB_CLIENT_ID","githubOauth"]}(),function(){"use strict";function e(e,t){function n(e){var t=e.match(/\?code=(.*)&state/);return t?t[1]:null}function o(e){var t=e.match(/\&state=(.*)*/);return t?t[1]:null}function a(){return t.opener?Boolean(t.opener.isGitHubPopupReferer):!1}function i(){t.isGitHubPopupReferer=!0}function r(e){return m.GITHUB_AUTH_API_URL+"?client_id="+e.clientId+"&redirect_uri="+e.redirectUri+"&state="+e.state+"&scope="+e.scope}function s(e){return m._setReferer(),t.open(m._buildPopupUrl(e),"","top=100,left=100,width=500,height=500")}function l(){return Math.floor(65536*(1+Math.random()))+(new Date).getTime().toString(16).substring(1)}function c(){return t.location.href}function d(){return m._isGitHubPopup()?t.opener.oAuthCallbackGitHub(m._parseCode(c()),m._parseState(c())):void 0}function u(n){var o=e.defer(),a=m._openPopupWindow(n);return t.oAuthCallbackGitHub=function(e,t){t==m.state?(a.close(),o.resolve(e)):(a.close(),o.reject("state mismatch error"))},o.promise}var m={GITHUB_AUTH_API_URL:"https://github.com/login/oauth/authorize",state:l(),loginWithGitHubIfRedirectedByPopup:d,openPopup:u,_openPopupWindow:s,_buildPopupUrl:r,_setReferer:i,_isGitHubPopup:a,_parseCode:n,_parseState:o,_generateState:l};return d(),m}angular.module("qorDash.auth.oauth").factory("githubOauth",e),e.$inject=["$q","$window"]}(),function(){"use strict";function e(e){e.state("app.orchestrate.domain.instance.history.option",{url:"/:opt_id",templateUrl:"app/modules/orchestrate/option/option.html",controller:"OrchestrateOptionController"})}angular.module("qorDash.orchestrate.domain.instance.history.option",[]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a,i){e.title=t.opt;var r=function(e){return{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()},s=t.id,l=t.inst,c=t.opt,d=t.opt_id,u=function(e,t){switch(r(e)){case"string":return'<div class="form-group" > <label class="col-md-4 control-label" for="input-'+t+'">'+t+'</label><div class="col-md-4"><input required="required" id="input-'+t+'" name="input-'+t+'" type="text" value="'+e+'" class="form-control input-md"></div></div>';case"number":return'<div class="form-group" > <label class="col-md-4 control-label" for="input-'+t+'">'+t+'</label><div class="col-md-4"><input required="required" id="input-'+t+'" name="input-'+t+'" type="text" value="'+e+'" class="form-control input-md"></div></div>';case"boolean":var n=e?"checked":"";return'<div class="form-group" > <label class="col-md-4 control-label" for="input-'+t+'">'+t+'</label><div class="col-md-4"><input class="new-checkbox" id="input-'+t+'" name="input-'+t+'" type="checkbox" '+n+'><label for="input-'+t+'"></label></div></div>'}};"new"==d?e.$watch("workflows",function(){if(e.$parent.$parent.workflows&&(e.workflow=e.$parent.$parent.workflows.filter(function(e){return e.name==t.opt})[0],e.workflow))for(var n in e.workflow.default_input){var o=e.workflow.default_input[n];$("#dynamic-form").append(u(o,n))}}):n.getOption(s,l,c,d).then(function(t){e.workflow=t.data;for(var n in e.workflow.context){var o=e.workflow.context[n];$("#dynamic-form").append(u(o,n))}},function(t){e.error=i.showError(t)}),e.sendMessage=function(){if($("#sendMessageButton").button("loading"),e.workflow.model){var t=a+"/v1/ws/orchestrate/"+s+"/"+l+"/"+c+"/"+d;$("#timelineContainer").html(o('<div ql-widget="Timeline" ws-url="\''+t+"'\"></div>")(e)),$("#sendMessageButton").button("reset")}else{var i={};for(var r in e.workflow.default_input)i[r]=$("#input-"+r).val();n.getLogUrl(e.workflow.activate_url,i).then(function(t){$("#timelineContainer").html(o('<div ql-widget="Timeline" ws-url="\''+a+t.data.log_ws_url+"'\"></div>")(e)),$("#sendMessageButton").button("reset")})}}}angular.module("qorDash.orchestrate.domain.instance.history.option").controller("OrchestrateOptionController",e),e.$inject=["$scope","$stateParams","orchestrateService","$compile","WS_URL","errorHandler"]}(),function(){"use strict";function e(e){e.state("app.orchestrate.domain.instance",{url:"/:inst",templateUrl:"app/modules/orchestrate/instance/instance.html",controller:"OrchestrateInstanceController",resolve:{resolvedInstances:["$stateParams","orchestrateService",function(e,t){return t.getInstances(e.id,e.inst)}]}})}angular.module("qorDash.orchestrate.domain.instance",[]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n){e.title=t.inst,e.workflows=n}angular.module("qorDash.orchestrate.domain.instance").controller("OrchestrateInstanceController",e),e.$inject=["$scope","$stateParams","resolvedInstances"]}(),function(){"use strict";function e(e){e.state("app.orchestrate.domain.instance.history",{url:"/:opt",templateUrl:"app/modules/orchestrate/history/history.html",controller:"OrchestrateHistoryController",resolve:{resolvedHistory:["$stateParams","orchestrateService",function(e,t){return t.getHistory(e.id,e.inst,e.opt)}]}})}angular.module("qorDash.orchestrate.domain.instance.history",[]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t){e.previousCalls=t}angular.module("qorDash.orchestrate.domain.instance.history").controller("OrchestrateHistoryController",e),e.$inject=["$scope","resolvedHistory"]}(),function(){"use strict";function e(e){e.state("app.orchestrate.domain",{url:"/:id",templateUrl:"app/modules/orchestrate/domain/domain.html",controller:"OrchestrateDomainController",controllerAs:"vm",resolve:{resolvedDomain:["domainService","$stateParams",function(e,t){return e.loadDomain(t.id)}]}})}angular.module("qorDash.orchestrate.domain",[]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t){e.state("app.orchestrate",{url:"/orchestrate",resolve:{resolvedDomains:["domainService",function(e){return e.loadDomains()}]},views:{"main@":{templateUrl:"app/modules/orchestrate/orchestrate.html",controller:"OrchestrateController"}}}),t.config("orchestrate",{title:"Config",nav:6,content:'<span ui-sref="app.orchestrate" ui-sref-opts="{reload: true}" qor-sidebar-group-heading="Orchestrate" data-icon-class="fa fa-building"></span>'})}angular.module("qorDash.orchestrate",["qorDash.orchestrate.domain","qorDash.orchestrate.domain.instance","qorDash.orchestrate.domain.instance.history","qorDash.orchestrate.domain.instance.history.option"]).config(e),e.$inject=["$stateProvider","$qorSidebarProvider"]}(),function(){"use strict";function e(e,t){var n=this;n.domain=t}angular.module("qorDash.orchestrate").controller("OrchestrateDomainController",e),e.$inject=["$scope","resolvedDomain"]}(),function(){"use strict";function e(e){e.state("app.manage.settings",{url:"/settings",templateUrl:"app/modules/manage/settings/settings.html"})}angular.module("qorDash.manage.settings",["qorDash.manage.settings.authentication"]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n){function o(){n.open({animation:!0,templateUrl:"app/modules/manage/accounts/new-user-modal/new-user-modal.html",controller:"NewUserModalController",controllerAs:"vm",resolve:{resolvedAccounts:function(){return a.accounts},resolvedToken:function(){return a.token}}})}var a=this;a.newUser=o,a.token=t,a.accounts=e}angular.module("qorDash.manage.accounts").controller("AccountsController",e),e.$inject=["resolvedAccounts","resolvedToken","$modal"]}(),function(){"use strict";function e(e){e.state("app.domains.domain.env.resources",{url:"/resources",templateUrl:"app/modules/domains/resources/resources.html"})}angular.module("qorDash.domains.env.resources",[]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e){e.state("app.domains.domain.env.network.node.logs",{url:"/logs",templateUrl:"app/modules/domains/node-logs/node-logs.html"})}angular.module("qorDash.domains.env.network.note.logs",[]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t){e.state("app.domains",{url:"/domains",resolve:{resolvedDomains:["domainService",function(e){return e.loadDomains()}]},views:{"main@":{templateUrl:"app/modules/domains/domains.html",controller:"DomainsController",controllerAs:"vm"}}}),t.config("domains",{title:"Environments",nav:2,content:'<span ui-sref="app.domains" ui-sref-opts="{reload: true}" qor-sidebar-group-heading="Domains" data-icon-class="fa fa-cloud"></span>'})}angular.module("qorDash.domains",["qorDash.widget","qorDash.widget.domain_stat","qorDash.widget.network","qorDash.widget.domain_details","qorDash.widget.container","qorDash.domains.domain","qorDash.domains.env","qorDash.domains.env.network","qorDash.domains.env.network.node","qorDash.domains.env.network.note.logs","qorDash.domains.env.resources","log_details"]).config(e),e.$inject=["$stateProvider","$qorSidebarProvider"]}(),function(){"use strict";function e(e,t){return{link:function(n,o){$(o).bind("click",function(){var n=$("#terminal"),o=n.terminal(),a=o.get_output(),i=e.open("/#log-details","mywin","width=100");i.height=600,i.currentData=a,i.url=n.parent().attr("ws-url"),t.go("^")})}}}e.$inject=["$window","$state","$compile"],angular.module("qorDash.domains").directive("logNewWindow",e)}(),function(){"use strict";function e(e){e.state("log_details",{url:"/log-details",templateUrl:"app/modules/domains/node-logs/log-details.html"})}var t=angular.module("log_details",["ui.layout"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e){e.state("app.domains.domain.env.network.node",{url:"/:depth/:node",templateUrl:"app/modules/domains/node/node.html",controller:"DomainNodeController",controllerAs:"vm"})}angular.module("qorDash.domains.env.network.node",[]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n){function o(e,t,n){function o(e,t,n){var i,r,s;if(a++,t==e.name&&n==a)return e;if(!e.children)return void 0;for(i=0;i<e.children.length;i++)if(r=e.children[i],s=o(r,t,n),a--,s)return s}var a=0;return o(e,t,n)}var a=this;a.node={},a.node=o(n,t.node,parseInt(t.depth))}angular.module("qorDash.domains").controller("DomainNodeController",e),e.$inject=["$scope","$stateParams","resolvedNetworkData"]}(),function(){"use strict";function e(e){e.state("app.domains.domain.env.network",{url:"/network",controller:"DomainsNetworkController",controllerAs:"vm",templateUrl:"app/modules/domains/network/network.html",resolve:{resolvedNetworkData:["networkViewService",function(e){return e.load()}]}})}angular.module("qorDash.domains.env.network",["ui.layout","qorDash.api"]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a){function i(e){o.go("app.domains.domain.env.network.node",{depth:e.depth,node:e.name})}var r=this;r.showDetails=i,r.networkData=a}angular.module("qorDash.domains").controller("DomainsNetworkController",e),e.$inject=["$scope","$timeout","networkViewService","$state","resolvedNetworkData"]}(),function(){"use strict";function e(e){e.state("app.domains.domain.env",{url:"/:env",templateUrl:"app/modules/domains/environment/environment.html",controller:"DomainEnvironmentController",controllerAs:"vm"})}angular.module("qorDash.domains.env",[]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t){var n=this;n.environment={},n.environment.name=e.env,n.eventsWsUrl=t+"/v1/events"}angular.module("qorDash.domains").controller("DomainEnvironmentController",e),e.$inject=["$stateParams","WS_URL"]}(),function(){"use strict";function e(e){e.state("app.domains.domain",{url:"/:domain",templateUrl:"app/modules/domains/domain/domain.html",controller:"DomainController",controllerAs:"vm",resolve:{resolvedDomain:["domainService","$stateParams",function(e,t){return e.loadDomain(t.domain)}]}})}angular.module("qorDash.domains.domain",[]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e){var t=this;t.domain=e}angular.module("qorDash.domains").controller("DomainController",e),e.$inject=["resolvedDomain"]}(),function(){"use strict";function e(e){e.state("app.docker.domains.domain.dockers.menu.summary",{url:"/summary",templateUrl:"app/modules/docker/summary/summary.html",controller:"DockerSummaryController",controllerAs:"vm",resolve:{resolvedContainers:["Container","Settings",function(e,t){return e.query(angular.extend({all:1},t.urlParams)).$promise}],resolvedImages:["Image","Settings",function(e,t){return e.query(t.urlParams).$promise}]}})}var t=angular.module("qorDash.docker.domain.dockers.menu.summary",[]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n){var o=this,a=0,i=0,r=0;o.predicate="-Created",o.containers=[],o.totalContainers=e,o.totalImages=t,o.totalContainers.forEach(function(e){"Ghost"===e.Status?i+=1:-1!==e.Status.indexOf("Exit")?r+=1:(a+=1,o.containers.push(n.container(e)))}),o.colours=["#5bb75b","#C7604C","#E2EAE9"],o.labels=o.series=["Running","Stopped","Ghost"],o.dataset=[a,r,i]}angular.module("qorDash.docker.domain.dockers.menu.summary").controller("DockerSummaryController",e),e.$inject=["resolvedContainers","resolvedImages","DockerViewModel"]}(),function(){"use strict";function e(e){e.state("app.docker.domains.domain.dockers.menu",{url:"/:dockerId",templateUrl:"app/modules/docker/menu/menu.html",controller:"DockerMenuController",controllerAs:"vm"})}angular.module("qorDash.docker.domain.dockers.menu",[]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e){var t=this;t.dockerId=e.dockerId}angular.module("qorDash.docker.domain.dockers.menu").controller("DockerMenuController",e),e.$inject=["$stateParams"]}(),function(){"use strict";function e(e){e.state("app.docker.domains.domain.dockers.menu.info.events",{url:"/events",templateUrl:"app/modules/docker/info.events/events.html",controller:"DockerInfoEventsController",controllerAs:"vm"})}angular.module("qorDash.docker.domain.dockers.menu.info.events",["ngOboe"]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a){var i=this,r=n.url+"/events?";i.model={},i.model.since=new Date(Date.now()-864e5),i.model.until=new Date,i.updateEvents=function(){if(i.dockerEvents=[],i.model.since){var n=Math.floor(i.model.since.getTime()/1e3);r+="since="+n+"&"}if(i.model.until){var s=Math.floor(i.model.until.getTime()/1e3);r+="until="+s}o({url:r,pattern:"{id status time}"}).then(function(){t(function(){e.$apply()})},function(e){a.error("Failure",e.data)},function(e){i.dockerEvents.push(e)})},i.updateEvents()}angular.module("qorDash.docker.domain.dockers.menu.info.events").controller("DockerInfoEventsController",e),e.$inject=["$scope","$timeout","Settings","Oboe","Messages"]}(),function(){"use strict";function e(e){e.state("app.docker.domains.domain.dockers.menu.info",{url:"/info",templateUrl:"app/modules/docker/info/info.html",controller:"DockerInfoController",controllerAs:"vm",resolve:{resolvedDockerInfo:["Docker","Settings",function(e,t){return e.get(t.urlParams).$promise}],resolvedSystemInfo:["System","Settings",function(e,t){return e.get(t.urlParams).$promise}]}})}angular.module("qorDash.docker.domain.dockers.menu.info",[]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n){var o=this;o.docker=t,o.info=n,o.endpoint=e.endpoint}angular.module("qorDash.docker.domain.dockers.menu.info").controller("DockerInfoController",e),e.$inject=["Settings","resolvedDockerInfo","resolvedSystemInfo"]}(),function(){"use strict";function e(e){e.state("app.docker.domains.domain.dockers.menu.images",{url:"/images",templateUrl:"app/modules/docker/images/images.html",controller:"DockerImagesController",controllerAs:"vm",resolve:{resolvedDockerImages:["Image","Settings",function(e,t){return e.query(t.urlParams).$promise}]}})}angular.module("qorDash.docker.domain.dockers.menu.images",[]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a,i){var r=o.urlParams,s=this;s.toggle=!1,s.predicate="-Created",s.images=i.map(a.image),s.toggleSelectAll=function(){angular.forEach(s.images,function(e){e.Checked=s.toggle})},s.removeAction=function(){var t=s.images.filter(function(e){return e.Checked}),i=[];t.forEach(function(e){i.push(n.remove(angular.extend({id:e.Id},r)))}),e.all(i).then(function(){n.query(o.urlParams,function(e){s.images=e.map(a.image)})})},s.pullImage=function(){t.open({animation:!0,templateUrl:"app/modules/docker/images/pull-image.html",controller:"DockerPullImageController",controllerAs:"vm"})}}function t(e,t,n,o){var a=e.urlParams,i=this;i.template="app/components/pullImage/pullImage.html",i.init=function(){i.config={registry:"",repo:"",fromImage:"",tag:"latest"}},i.close=function(){o.close()},i.init(),i.pull=function(){i.error=null;var e=angular.copy(i.config),r=(e.registry?e.registry+"/":"")+(e.repo?e.repo+"/":"")+e.fromImage+(e.tag?":"+e.tag:"");o.close(),n.create(angular.extend(e,a),function(e){if(e.constructor===Array){var n=e.length>0&&e[e.length-1].hasOwnProperty("error");if(n){var o=e[e.length-1];i.error="Cannot pull image "+r+" Reason: "+o.error}else t.send("Image Added",r),i.init()}else t.send("Image Added",r),i.init()},function(e){i.error="Cannot pull image "+r+" Reason: "+e.data})}}angular.module("qorDash.docker.domain.dockers.menu.images").controller("DockerImagesController",e).controller("DockerPullImageController",t),e.$inject=["$q","$modal","Image","Settings","DockerViewModel","resolvedDockerImages"],t.$inject=["Settings","Messages","Image","$modalInstance"]}(),function(){"use strict";function e(e){e.state("app.docker.domains.domain.dockers.menu.images.image",{url:"/:imageId/:imageTag",templateUrl:"app/modules/docker/image/image.html",controller:"DockerImageController",controllerAs:"vm",resolve:{resolvedDockerImage:["Image","Settings","$stateParams",function(e,t,n){var o=angular.extend({id:n.imageId},t.urlParams);return e.get(o).$promise}],resolvedDockerImageHistory:["Image","Settings","$stateParams",function(e,t,n){var o=angular.extend({id:n.imageId},t.urlParams);return e.history(o).$promise}]}})}angular.module("qorDash.docker.domain.dockers.menu.images.image",[]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a,i,r,s,l,c){function d(e,t,n){var o=e.defer();return t.query(angular.extend({all:1,notruc:1},r.urlParams),function(e){for(var t=[],a=0;a<e.length;a++){var r=e[a];r.Image===n&&t.push(i.container(r))}o.resolve(t)}),o.promise}var u=angular.extend({id:t.imageId},r.urlParams),m=this;m.tag1={repo:"",force:!1},m.history=c,m.image=l,m.tag=l.id;var p=t.imageTag;if(p&&":"!==p){m.tag=p;var v=d(e,a,p);v.then(function(e){m.containers=e})}m.remove=function(){o.remove(u,function(){s.send("Image Removed",t.imageId)},function(e){m.error=e.data})},m.getHistory=function(){o.history(u,function(e){m.history=e})},m.updateTag=function(){var e=m.tag1;o.tag(angular.extend({repo:e.repo,force:e.force?1:0},u),function(){s.send("Tag Added",t.imageId)},function(e){m.error=e.data})},m.openCreateImageModal=function(){n.open({animation:!0,templateUrl:"app/modules/docker/image/create-modal.html",controller:"CreateImageModalController",controllerAs:"vm"})}}function t(e,t,n,o,a,i,r,s,l){function c(e,t){t.error("Error",s(e))}function d(e){for(var t in e)(null===e[t]||void 0===e[t]||""===e[t]||$.isEmptyObject(e[t])||0===e[t].length)&&delete e[t]}function u(e){return e.map(function(e){return e.name})}var m=o.urlParams;a.query(angular.extend({all:1},m),function(t){e.containerNames=t.map(function(e){return r(e)})}),e.config={Env:[],Volumes:[],SecurityOpts:[],HostConfig:{PortBindings:[],Binds:[],Links:[],Dns:[],DnsSearch:[],VolumesFrom:[],CapAdd:[],CapDrop:[],Devices:[],LxcConf:[],ExtraHosts:[]}},e.menuStatus={containerOpen:!0,hostConfigOpen:!1},e.close=function(){l.close()},e.create=function(){var o=angular.copy(e.config);o.Image=t.imageId,o.Cmd&&"["===o.Cmd[0]?o.Cmd=angular.fromJson(o.Cmd):o.Cmd&&(o.Cmd=o.Cmd.split(" ")),o.Env=o.Env.map(function(e){return e.name+"="+e.value}),o.Volumes=u(o.Volumes),o.SecurityOpts=u(o.SecurityOpts),o.HostConfig.VolumesFrom=u(o.HostConfig.VolumesFrom),o.HostConfig.Binds=u(o.HostConfig.Binds),o.HostConfig.Links=u(o.HostConfig.Links),o.HostConfig.Dns=u(o.HostConfig.Dns),o.HostConfig.DnsSearch=u(o.HostConfig.DnsSearch),o.HostConfig.CapAdd=u(o.HostConfig.CapAdd),o.HostConfig.CapDrop=u(o.HostConfig.CapDrop),o.HostConfig.LxcConf=o.HostConfig.LxcConf.reduce(function(e,t){return e[t.name]=t.value,e},{}),o.HostConfig.ExtraHosts=o.HostConfig.ExtraHosts.map(function(e){return e.host+":"+e.ip});var r={},s={};o.HostConfig.PortBindings.forEach(function(e){var t=e.intPort+"/tcp";"udp"===e.protocol&&(t=e.intPort+"/udp");var n={HostIp:e.ip,HostPort:e.extPort};e.intPort?(r[t]={},t in s?s[t].push(n):s[t]=[n]):i.send("Warning","Internal port must be specified for PortBindings")}),o.ExposedPorts=r,o.HostConfig.PortBindings=s,d(o.HostConfig),d(o),a.create(angular.extend(o,m),function(e){if(e.Id){var t=o.HostConfig||{};t.id=e.Id,a.start(angular.extend(t,m),function(t){t.id?(i.send("Container Started",e.Id),$("#create-modal").modal("hide"),n.path("/containers/"+e.Id+"/")):(c(t,i),a.remove({id:e.Id},function(){i.send("Container Removed",e.Id)}))},function(e){c(e,i)})}else c(e,i)},function(e){c(e,i)})},e.addEntry=function(e,t){e.push(t)},e.rmEntry=function(e,t){var n=e.indexOf(t);e.splice(n,1)}}angular.module("qorDash.docker.domain.dockers.menu.images.image").controller("DockerImageController",e).controller("CreateImageModalController",t),e.$inject=["$q","$stateParams","$modal","Image","Container","DockerViewModel","Settings","Messages","resolvedDockerImage","resolvedDockerImageHistory"],t.$inject=["$scope","$stateParams","$location","Settings","Container","Messages","containernameFilter","errorMsgFilter","$modalInstance"]}(),function(){"use strict";function e(e){e.state("app.docker.domains.domain",{url:"/:domain",templateUrl:"app/modules/docker/domain/domain.html",controller:"DockerDomainController",controllerAs:"vm",resolve:{resolvedDomain:["domainService","$stateParams",function(e,t){return e.loadDomain(t.domain)}]}})}angular.module("qorDash.docker.domain",[]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e){var t=this;t.domain=e}angular.module("qorDash.docker.domain").controller("DockerDomainController",e),e.$inject=["resolvedDomain"]}(),function(){"use strict";angular.module("dockerui.viewmodel",[]).factory("DockerViewModel",function(){function e(e){this.Id=e.Id,this.Tag=e.Tag,this.Repository=e.Repository,this.Created=e.Created,this.Checked=!1,this.RepoTags=e.RepoTags,this.VirtualSize=e.VirtualSize}function t(e){this.Id=e.Id,this.Image=e.Image,this.Command=e.Command,this.Created=e.Created,this.SizeRw=e.SizeRw,this.Status=e.Status,this.Checked=!1,this.Names=e.Names}return{image:function(t){return new e(t)},container:function(e){return new t(e)}}})}(),function(){"use strict";angular.module("dockerui.services",["ngResource"]).factory("Container",["$resource","Settings",function(e,t){return e(t.endpoint+"/:domain/:instance/:dockerId/containers/:id/:action",{name:"@name",domain:"@domain",instance:"@instance",dockerId:"@dockerId"},{query:{method:"GET",params:{all:0,action:"json"},isArray:!0},get:{method:"GET",params:{action:"json"}},start:{method:"POST",params:{id:"@id",action:"start"}},stop:{method:"POST",params:{id:"@id",t:5,action:"stop"}},restart:{method:"POST",params:{id:"@id",t:5,action:"restart"}},kill:{method:"POST",params:{id:"@id",action:"kill"}},pause:{method:"POST",params:{id:"@id",action:"pause"}},unpause:{method:"POST",params:{id:"@id",action:"unpause"}},changes:{method:"GET",params:{action:"changes"},isArray:!0},create:{method:"POST",params:{action:"create"}},remove:{method:"DELETE",params:{id:"@id",v:0}},rename:{method:"POST",params:{id:"@id",action:"rename"},isArray:!1},stats:{method:"GET",params:{id:"@id",stream:!1,action:"stats"},timeout:2e3}})}]).factory("Image",["$resource","Settings",function(e,t){return e(t.endpoint+"/:domain/:instance/:dockerId/images/:id/:action",{domain:"@domain",instance:"@instance",dockerId:"@dockerId"},{query:{method:"GET",params:{all:0,action:"json"},isArray:!0},get:{method:"GET",params:{action:"json"}},search:{method:"GET",params:{action:"search"}},history:{method:"GET",params:{action:"history"},isArray:!0},create:{method:"POST",isArray:!0,transformResponse:[function(e){var t=e.replace(/\n/g," ").replace(/\}\W*\{/g,"}, {");return angular.fromJson("["+t+"]")}],params:{action:"create",fromImage:"@fromImage",repo:"@repo",tag:"@tag",registry:"@registry"}},insert:{method:"POST",params:{id:"@id",action:"insert"}},push:{method:"POST",params:{id:"@id",action:"push"}},tag:{method:"POST",params:{id:"@id",action:"tag",force:0,repo:"@repo"}},remove:{method:"DELETE",params:{id:"@id"},isArray:!0}})}]).factory("Docker",["$resource","Settings",function(e,t){return e(t.endpoint+"/:domain/:instance/:dockerId/version",{domain:"@domain",instance:"@instance",dockerId:"@dockerId"},{get:{method:"GET"}})}]).factory("Auth",["$resource","Settings",function(e,t){return e(t.endpoint+"/:domain/:instance/:dockerId/auth",{domain:"@domain",instance:"@instance",dockerId:"@dockerId"},{get:{method:"GET"},update:{method:"POST"}})}]).factory("System",["$resource","Settings",function(e,t){return e(t.endpoint+"/:domain/:instance/:dockerId/info",{domain:"@domain",instance:"@instance",dockerId:"@dockerId"},{get:{method:"GET"}})}]).provider("Settings",[function(){function e(e){var t=e?e.substr(1).split("/"):null;return t?{domain:t[0],instance:t[1],dockerId:t[2]}:{}}this.displayAll=!1,this.port="",this.endpoint="",this.url=this.endpoint,this.urlParams={},this.buildUrl=function(t){t=t||"",this.url=this.endpoint+t,this.urlParams=e(t)},this.$get=["$injector","$location",function(){return{rawUrl:this.endpoint+this.port+"/"+this.version,endpoint:this.endpoint,uiVersion:this.uiVersion,version:this.version,url:this.url,urlParams:this.urlParams,displayAll:this.displayAll,buildUrl:this.buildUrl}}]}]).factory("Messages",["$rootScope",function(){return{send:function(){},error:function(){}}}]).factory("Dockerfile",["Settings",function(e){var t=e.rawUrl+"/build";return{build:function(e,n){var o=new FormData,a=new Blob([e],{type:"text/text"});o.append("Dockerfile",a);var i=new XMLHttpRequest;i.onload=n,i.open("POST",t),i.send(o)}}}])}(),function(){"use strict";angular.module("dockerui",["dockerui.services","dockerui.filters","dockerui.viewmodel"])}(),function(){"use strict";angular.module("dockerui.filters",[]).filter("truncate",function(){return function(e,t,n){return isNaN(t)&&(t=10),void 0===n&&(n="..."),e.length<=t||e.length-n.length<=t?e:String(e).substring(0,t-n.length)+n}}).filter("statusbadge",function(){return function(e){return"Ghost"===e?"important":-1!==e.indexOf("Exit")&&"Exit 0"!==e?"warning":"success"}}).filter("getstatetext",function(){return function(e){return void 0===e?"":e.Ghost&&e.Running?"Ghost":e.Running&&e.Paused?"Running (Paused)":e.Running?"Running":"Stopped"}}).filter("getstatelabel",function(){return function(e){return void 0===e?"":e.Ghost&&e.Running?"label-important":e.Running?"label-success":""}}).filter("humansize",function(){return function(e){var t=["Bytes","KB","MB","GB","TB"];if(0===e)return"n/a";var n=parseInt(Math.floor(Math.log(e)/Math.log(1024)),10),o=e/Math.pow(1024,n),a=1>n?0:n-1;return o.toFixed(a)+" "+t[[n]]}}).filter("containername",function(){return function(e){var t=e.Names[0];return t.substring(1,t.length)}}).filter("repotag",function(){return function(e){if(e.RepoTags&&e.RepoTags.length>0){var t=e.RepoTags[0];return"<none>:<none>"===t&&(t=""),t}return""}}).filter("getdate",function(){return function(e){var t=new Date(1e3*e);return t.toDateString()}}).filter("errorMsg",function(){return function(e){for(var t=0,n="";e[t]&&"string"==typeof e[t];)n+=e[t],t++;return n}})}(),function(){"use strict";function e(e){e.state("app.docker.domains.domain.dockers",{url:"/:instance",templateUrl:"app/modules/docker/dockers/dockers.html",controller:"DockersController",controllerAs:"vm",resolve:{resolvedDockers:["domainService","$stateParams",function(e,t){return e.loadDockers(t.domain,t.instance)}]}})}angular.module("qorDash.docker.domain.dockers",[]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t){e.state("app.docker",{url:"/docker",views:{"main@":{template:'<div ui-view=""></div>',controller:["$state",function(e){var t=e.current.name,n="app.docker"===t?"app.docker.domains":t;e.go(n)}]}}}).state("app.docker.domains",{url:"",templateUrl:"app/modules/docker/docker.html",controller:"DockerController",controllerAs:"vm",resolve:{resolvedDomains:["domainService",function(e){return e.loadDomains()}]}}),t.config("docker",{title:"Docker",nav:3,content:'<span ui-sref="app.docker" ui-sref-opts="{reload: true}" qor-sidebar-group-heading="Docker" data-icon-class="fa fa-docker"></span>'})}function t(e,t,n,o){n.endpoint=o,e.$on("$stateChangeStart",function(e,o,a){var i=t.href(o,a);if("docker"===o.name.split(".")[1]){var r=i.match(/docker((\/[a-z0-9.]+){1,3})/);r&&r[1]&&n.buildUrl(r[1])}})}angular.module("qorDash.docker",["ngOboe","dockerui","qorDash.docker","qorDash.docker.domain","qorDash.docker.domain.dockers","qorDash.docker.domain.dockers.menu","qorDash.docker.domain.dockers.menu.summary","qorDash.docker.domain.dockers.menu.containers","qorDash.docker.domain.dockers.menu.containers.container","qorDash.docker.domain.dockers.menu.containers.container.top","qorDash.docker.domain.dockers.menu.containers.container.logs","qorDash.docker.domain.dockers.menu.containers.container.stats","qorDash.docker.domain.dockers.menu.images","qorDash.docker.domain.dockers.menu.images.image","qorDash.docker.domain.dockers.menu.info","qorDash.docker.domain.dockers.menu.info.events"]).config(e).run(t),e.$inject=["$stateProvider","$qorSidebarProvider"],t.$inject=["$rootScope","$state","Settings","DOCKER_ENDPOINT"]}(),function(){"use strict";function e(e,t){var n=this;n.instance=e.instance,n.dockers=t}angular.module("qorDash.docker").controller("DockersController",e),e.$inject=["$stateParams","resolvedDockers"]}(),function(){"use strict";function e(e){e.state("app.docker.domains.domain.dockers.menu.containers",{url:"/containers",templateUrl:"app/modules/docker/containers/containers.html",controller:"ContainersController",controllerAs:"vm",resolve:{resolveContainers:["Container","Settings",function(e,t){var n=t.urlParams;
return e.query(n).$promise}]}})}angular.module("qorDash.docker.domain.dockers.menu.containers",[]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a,i){function r(e){n.query(angular.extend(e,c),function(e){l.containers=e.map(a.container)})}function s(e){var a=[],i=l.containers.filter(function(e){return e.Checked});i.forEach(function(t){var o=angular.extend({id:t.Id},c);a.push(e===n.start?n.get(o).$promise.then(function(t){return e(angular.extend({HostConfig:t.HostConfig||{}},o)).$promise}):e(o).$promise)}),t.all(a).then(function(){r({all:Number(o.displayAll)})})}var l=this,c=o.urlParams;l.predicate="-Created",l.toggle=!1,l.displayAll=o.displayAll,l.containers=i.map(a.container),e.$on("updateContainersList",function(){r({all:Number(o.displayAll)})}),l.toggleSelectAll=function(){l.containers.forEach(function(e){e.Checked=l.toggle})},l.toggleGetAll=function(){o.displayAll=l.displayAll,r({all:Number(o.displayAll)})},l.startAction=function(){s(n.start,"Started")},l.stopAction=function(){s(n.stop,"Stopped")},l.restartAction=function(){s(n.restart,"Restarted")},l.killAction=function(){s(n.kill,"Killed")},l.pauseAction=function(){s(n.pause,"Paused")},l.unpauseAction=function(){s(n.unpause,"Unpaused")},l.removeAction=function(){s(n.remove,"Removed")}}angular.module("qorDash.docker.domain.dockers.menu.containers").controller("ContainersController",e),e.$inject=["$scope","$q","Container","Settings","DockerViewModel","resolveContainers"]}(),function(){"use strict";function e(e){e.state("app.docker.domains.domain.dockers.menu.containers.container.top",{url:"/top",templateUrl:"app/modules/docker/container.top/top.html",controller:"DockerContainerTopController",controllerAs:"vm",resolve:{resolvedContainerTop:["dockerService","$stateParams",function(e,t){return e.getContainerTop(t.containerId)}]}})}angular.module("qorDash.docker.domain.dockers.menu.containers.container.top",[]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n){var o=this;o.containerTop=n,o.getTop=function(){t.getContainerTop(e.containerId,o.ps_args).then(function(e){o.containerTop=e})}}angular.module("qorDash.docker.domain.dockers.menu.containers.container.top").controller("DockerContainerTopController",e),e.$inject=["$stateParams","dockerService","resolvedContainerTop"]}(),function(){"use strict";function e(e){e.state("app.docker.domains.domain.dockers.menu.containers.container.stats",{url:"/stats",templateUrl:"app/modules/docker/container.stats/stats.html",controller:"DockerContainerStatsController",controllerAs:"vm"})}angular.module("qorDash.docker.domain.dockers.menu.containers.container.stats",[]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a,i,r,s){function l(){r.stats(v,function(e){var t=Object.keys(e).map(function(t){return e[t]});return-1!==t.join("").indexOf("no such id")?void a.error("Unable to retrieve stats","Is this container running?"):(p.data=e,c(e),d(e),void u(e))},function(){a.error("Unable to retrieve stats","Is this container running?")})}function c(e){console.log("updateCpuChart",e),p.cpuData[0].length>=20&&(p.cpuLabels=p.cpuLabels.slice(1),p.cpuData[0]=p.cpuData[0].slice(1)),p.cpuLabels.push(new Date(e.read).toLocaleTimeString()),p.cpuData[0].push(m(e))}function d(e){console.log("updateMemoryChart",e),p.memoryData[0].length>=20&&(p.memoryLabels=p.memoryLabels.slice(1),p.memoryData[0]=p.memoryData[0].slice(1)),p.memoryLabels.push(new Date(e.read).toLocaleTimeString()),p.memoryData[0].push(e.memory_stats.usage)}function u(e){var t=0,n=0;(0!==C||0!==$)&&(t=e.network.rx_bytes-C,n=e.network.tx_bytes-$),C=e.network.rx_bytes,$=e.network.tx_bytes,console.log("updateNetworkChart",e),p.networkData[0].length>=20&&p.networkData[1].length>=20&&(p.networkLabels=p.networkLabels.slice(1),p.networkData[0]=p.networkData[0].slice(1),p.networkData[1]=p.networkData[1].slice(1)),p.networkLabels.push(new Date(e.read).toLocaleTimeString()),p.networkData[0].push(t),p.networkData[1].push(n)}function m(e){var t=e.precpu_stats,n=e.cpu_stats,o=0,a=n.cpu_usage.total_usage-t.cpu_usage.total_usage,i=n.system_cpu_usage-t.system_cpu_usage;return i>0&&a>0&&(o=a/i*n.cpu_usage.percpu_usage.length*100),o}for(var p=this,v=angular.extend({id:n.containerId},i.urlParams),h=[],f=[],g=[],b=[],y=[],k=[],w=[],C=0,$=0,S=0;20>S;S++)h.push(""),f.push(0),g.push(""),b.push(0),y.push(""),k.push(0),w.push(0);p.cpuStyles=[{fillColor:"rgba(151,187,205,0.5)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff",data:f}],p.memoryStyles=[{fillColor:"rgba(151,187,205,0.5)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff",data:b}],p.networkStyles=[{label:"Rx Bytes",fillColor:"rgba(151,187,205,0.5)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff"},{label:"Tx Bytes",fillColor:"rgba(255,180,174,0.5)",strokeColor:"rgba(255,180,174,1)",pointColor:"rgba(255,180,174,1)",pointStrokeColor:"#fff"}],p.networkLegendData=["Rx Data","Tx Data"],p.chartOtions={animation:!1,animationSteps:30,pointHitDetectionRadius:3,responsive:!0},p.memoryChartOptions=p.networkChartOptions=angular.extend({scaleLabel:function(e){return s(parseInt(e.value,10))}},p.chartOtions),p.cpuData=[f],p.cpuLabels=h,p.memoryData=[b],p.memoryLabels=g,p.networkData=[w,k],p.networkLabels=y;var D=t(l,2e3);l(),e.$on("$destroy",function(){t.cancel(D)})}angular.module("qorDash.docker.domain.dockers.menu.containers.container.stats").controller("DockerContainerStatsController",e),e.$inject=["$scope","$interval","$stateParams","$sce","Messages","Settings","Container","humansizeFilter"]}(),function(){"use strict";function e(e){e.state("app.docker.domains.domain.dockers.menu.containers.container.logs",{url:"/logs",templateUrl:"app/modules/docker/container.logs/logs.html",controller:"DockerContainerLogsController",controllerAs:"vm",resolve:{resolvedContainer:["Container","Settings","$stateParams",function(e,t,n){var o=angular.extend({id:n.containerId},t.urlParams);return e.get(o).$promise}],resolvedContainerLogsStdout:["dockerService","$stateParams",function(e,t){return e.getContainerLogs(t.containerId,{stdout:1,stderr:0})}],resolvedContainerLogsStderr:["dockerService","$stateParams",function(e,t){return e.getContainerLogs(t.containerId,{stdout:0,stderr:1})}]}})}angular.module("qorDash.docker.domain.dockers.menu.containers.container.logs",[]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a,i,r,s,l,c){function d(e){return e=e.replace(/[\r]/g,"\n"),e=e.substring(8),e=e.replace(/\n(.{8})/g,"\n")}function u(){var e=[r.getContainerLogs(o.containerId,{stdout:1,stderr:0,timestamps:m.showTimestamps,tail:m.tailLines}),r.getContainerLogs(o.containerId,{stdout:0,stderr:1,timestamps:m.showTimestamps,tail:m.tailLines})];n.all(e).then(function(e){m.stdout=d(e[0]),m.stderr=d(e[1])})}var m=this,p=e(u,5e3);m.showTimestamps=!1,m.tailLines=2e3,m.container=s,m.stdout=d(l),m.stderr=d(c),t.$on("$destroy",function(){e.cancel(p)}),m.scrollTo=function(e){a.hash(e),i()},m.toggleTimestamps=function(){u()},m.toggleTail=function(){u()}}angular.module("qorDash.docker.domain.dockers.menu.containers.container.logs").controller("DockerContainerLogsController",e),e.$inject=["$interval","$scope","$q","$stateParams","$location","$anchorScroll","dockerService","resolvedContainer","resolvedContainerLogsStdout","resolvedContainerLogsStderr"]}(),function(){"use strict";function e(e){e.state("app.docker.domains.domain.dockers.menu.containers.container",{url:"/:containerId",templateUrl:"app/modules/docker/container/container.html",controller:"ContainerController",controllerAs:"vm",resolve:{resolvedContainer:["Container","Settings","$stateParams",function(e,t,n){var o=angular.extend({id:n.containerId},t.urlParams);return e.get(o).$promise}],resolvedContainerChanges:["Container","Settings","$stateParams",function(e,t,n){var o=angular.extend({id:n.containerId},t.urlParams);return e.changes(o).$promise}]}})}angular.module("qorDash.docker.domain.dockers.menu.containers.container",[]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a,i,r){function s(){n.get(d,function(t){c.container=t,c.container.edit=!1,c.container.newContainerName=t.Name,e.$emit("updateContainersList")})}function l(e,t){var o;switch(e){case"start":case"rename":o=angular.extend(t,d);break;default:o=d}return n[e](o).$promise.then(s)}var c=this;c.container=a,c.container.edit=!1,c.container.newContainerName=a.Name,c.changes=i;var d=angular.extend({id:c.container.Id},o.urlParams);c.hasContent=function(e){return null!==e&&void 0!==e},c.getChanges=function(){n.changes(d,function(e){c.changes=e})},c.start=function(){l("start",{HostConfig:c.container.HostConfig})},c.rename=function(){l("rename",{name:c.container.newContainerName})},c.stop=function(){l("stop")},c.kill=function(){l("kill")},c.pause=function(){l("pause")},c.unpause=function(){l("unpause")},c.remove=function(){l("remove",null).then(function(){e.$emit("updateContainersList"),t.go("^")})},c.restart=function(){l("restart")},c.commit=function(){r.containerCommit(c.container.Id,c.container.Config.Image).then(s)}}angular.module("qorDash.docker.domain.dockers.menu.containers.container").controller("ContainerController",e),e.$inject=["$scope","$state","Container","Settings","resolvedContainer","resolvedContainerChanges","dockerService"]}(),function(){"use strict";angular.module("qorDash.widget",[])}(),function(){"use strict";function e(e,t){return{replace:!0,link:function(n,o,a){n.attributes=a,n.$watch(a.wsUrl,function(e){n.wsUrl=e});var i=function(o,a){e("app/widgets/"+o.toLowerCase()+"/"+o.toLowerCase()+".html",!0).then(function(e){a.append(t(e)(n))},function(){})};i(a.qlWidget,o)}}}angular.module("qorDash.widget").directive("qlWidget",e),e.$inject=["$templateRequest","$compile"]}(),function(){"use strict";angular.module("qorDash.api",[])}(),function(){function e(e,t,n,o){function a(e){return e.data?e.data:e}function i(e){return o.showError(e),t.reject(e.data?e.data:e)}function r(){return e.get(d+"/v1/domain/").then(a)["catch"](i)}function s(t){return e.get(d+"/v1/domain/"+t).then(a)["catch"](i)}function l(t,n){return e.get(d+"/v1/dockerapi/"+t+"/"+n+"/").then(a)["catch"](i)}function c(t,n){return e.get(d+"/v1/console/"+t+"/"+n+"/").then(a)["catch"](i)}var d=n;return{loadDomains:r,loadDomain:s,loadDockers:l,loadServices:c}}angular.module("qorDash.api").factory("domainService",e),e.$inject=["$http","$q","API_HOST","errorHandler"]}(),function(){function e(e,t,n,o){function a(e){return e.data}function i(e){return o.showError(e),t.reject(e.data?e.data:e)}function r(t,o){return e({method:"POST",url:n.url+"/commit",params:{container:t,repo:o}}).then(a)["catch"](i)}function s(t,o){return e({method:"GET",url:n.url+"/containers/"+t+"/top",params:{ps_args:o}}).then(a)["catch"](i)}function l(t,o){return e({method:"GET",url:n.url+"/containers/"+t+"/logs",params:{stdout:o.stdout||0,stderr:o.stderr||0,timestamps:o.timestamps||0,tail:o.tail||2e3}}).then(a)["catch"](i)}return{getContainerTop:s,getContainerLogs:l,containerCommit:r}}angular.module("qorDash.api").factory("dockerService",e),e.$inject=["$http","$q","Settings","errorHandler"]}(),function(){"use strict";function e(e,t){e.state("app",{url:"/app","abstract":!0,templateUrl:"app/modules/core/app.html"}),t.otherwise(function(e){var t=e.get("$state");t.go("app.dashboard")})}angular.module("qorDash.core",["qorDash.config"]).config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e){function t(t,n){angular.isFunction(n)&&(n={post:n});var o,a=t.contents().remove();return{pre:n&&n.pre?n.pre:null,post:function(t,i){o||(o=e(a)),o(t,function(e){i.append(e)}),n&&n.post&&n.post.apply(null,arguments)}}}return{compile:t}}angular.module("qorDash.core").factory("RecursionHelper",e),e.$inject=["$compile"]}(),function(){"use strict";function e(){return function(e,t,n){var o=[];return angular.forEach(e,function(e){o.push(e)}),o.sort(function(e,n){return e[t]>n[t]?1:-1}),n&&o.reverse(),o}}angular.module("qorDash.core").filter("orderObjectBy",e)}(),function(){"use strict";function e(e){function n(t){return e.compile(t)}return{restrict:"AEC",scope:{data:"=",parentKey:"=",config:"=",onchange:"=",objectName:"=",displayOptions:"="},replace:!0,bindToController:!0,templateUrl:"app/modules/core/nested-table/nested-table.html",compile:n,controller:t,controllerAs:"vm"}}function t(){function e(e){if(!e)return!0;var t=e.split(".");t.pop();var n=t.join(".");return!(n&&!c.displayOptions[n])}function t(e){c.displayOptions[e]=!c.displayOptions[e]}function n(e){return!!c.displayOptions[e]}function o(e){if(!e)return!1;var t=e.split(".");return"services"==t[1]&&(t[2]&&(t[2]="*"),e=t.join(".")),!!(c.config[e]&&c.config[e].indexOf("edit")>-1)}function a(e){if(!e)return!1;var t=e.split(".");return"services"===t[1]&&(t[2]&&(t[2]="*"),e=t.join(".")),!!(e&&c.config[e]&&c.config[e].indexOf("add")>-1)}function i(e){return angular.isObject(e)}function r(e){return angular.isArray(e)?!i(e[0]):!1}function s(e){if(c.isArray(c.data))c.onchange("add-value",e);else{var t=Object.keys(c.data)[Object.keys(c.data).length-1];c.onchange("add-object",e,c.data[t],t+"-new")}}function l(e,t,n,o){"key"==o?c.onchange("edit-key",e,t,n):c.onchange("edit-value",e,t)}var c=this;c.displayOptions||(c.displayOptions={}),c.isObject=i,c.isArray=r,c.isEditable=o,c.isPlusAvailable=a,c.isVisible=e,c.changeDisplayState=t,c.getDisplayState=n,c.addElement=s,c.updateData=l}angular.module("qorDash.core").directive("nestedTable",e).controller("NestedTableController",t),e.$inject=["RecursionHelper"]}(),function(){"use strict";function e(e,o,a,i,r,s,l){var c={restrict:"ECA",terminal:!0,priority:400,compile:function(){return function(o,a,c){function d(t){return t&&e.$current&&e.$current.locals[t]}function u(e,t){return t.indexOf("@")>=0?t:t+"@"+(e?e.state.name:"")}function m(){return u(null,i(c.horizontalUiView||c.name||"")(o))}function p(e){return""===e.name?m():u(e,"")}function v(e){this._viewName=e,this._locals=d(e)}function h(e,t){e||g.invalidateStates(t)}var f=c.onload||"";a.addClass("qor-container"),o.$on("$stateChangeSuccess",function(e,t,n){h(!1,n._preventAnimation)}),o.$on("$viewContentLoading",function(){h(!1)}),o.$on("$stateChangeSuccess",function(t,o,a,i){e.includes(i)||n(l)}),v.prototype.renderView=function(e,n){var o=this._locals;if(o){var i=this._scope=e.$new(),c=this._element=angular.element(o.$template||"");a.append(c[0]),c.data("$uiView",{name:this._viewName,state:o.$$state});var d=s(c[0]);if(o.$$controller){o.$scope=i;var u=r(o.$$controller,o);o.$$controllerAs&&(i[o.$$controllerAs]=u),c.data("$ngControllerController",u),c.children().data("$ngControllerController",u)}d(i),t(l,n)}this._scope.$emit("$viewContentLoaded"),this._scope.$eval(f)},v.prototype.matchState=function(e){return this._locals===d(e)},v.prototype.tryCreateChildViews=function(e){var t=p({name:this._viewName,state:this._locals.$$state});if(t&&d(t)){var n=this._childStateView=new v(t);n.renderView(this._scope,e),n.tryCreateChildViews(e)}},v.prototype.destroy=function(){this._childStateView&&this._childStateView.destroy(),this._element.remove(),this._scope.$destroy()},v.prototype.invalidateStates=function(e){var t=p({name:this._viewName,state:this._locals.$$state});t?this._childStateView?this._childStateView.matchState(t)?this._childStateView.invalidateStates(e):(this._childStateView.destroy(),this._childStateView=null,this.tryCreateChildViews(e)):this.tryCreateChildViews(e):(this._childStateView&&this._childStateView.destroy(),this._childStateView=null)};var g=new v("");g._scope=o,h(!0)}}};return c}function t(e,t){var n=e(".qor-container"),o=n.find("> .qor-sheet").map(function(){return e(this).width()}).splice(0).reduce(function(e,t){return e+t},0),a=n.width(),i=o-a,r=a-(o-n[0].scrollLeft);0>r&&n.animate({scrollLeft:i},t?0:400)}function n(e){var t=e(".qor-container"),n=t[0].scrollLeft,o=t.find("> .qor-sheet:last-child");if(o.length){var a=o.offset().left,i=e(window).width()<768?0:80;n>0&&0>a-i&&t.animate({scrollLeft:t[0].scrollLeft+(a-i)})}}function o(){function e(e,t){t.addClass("qor-sheet")}function t(e,t){var n=t.$current;e.sheet={close:function(){t.go(n.parent)}}}return t.$inject=["$scope","$state"],{controller:t,link:e}}function a(){return{link:function(e,t){t.addClass("qor-sheet-content")}}}function i(){return{require:"^horizontalUiSheet",transclude:!0,replace:!0,template:'<header class="qor-sheet-header">  <div class="qor-sheet-statusbar">    <div class="qor-sheet-actions">      <button class="qor-sheet-close" ui-sref="^">&times;</button>    </div>    <h5 class="qor-sheet-title">{{title}}</h5>  </div>  <div class="qor-sheet-header-content" ng-transclude></div></header>',scope:{title:"@"}}}angular.module("qorDash.core").directive("horizontalUiView",e).directive("horizontalUiSheet",o).directive("horizontalUiSheetContent",a).directive("horizontalUiSheetHeader",i),e.$inject=["$state","$injector","$uiViewScroll","$interpolate","$controller","$compile","jQuery"],i.$inject=["$compile"]}(),function(){"use strict";function e(e){function t(t){t.find("th").each(function(t,n){e(n).css({width:o[t],height:a[t],padding:"8px",margin:"80px"})})}function n(e){o=[],e.find("th").each(function(e,t){o.push(t.offsetWidth),a.push(t.offsetHeight)})}var o=[],a=[];return{restrict:"A",link:function(o,a){var i,r,s,l,c=!0;r=a.parents("[qor-sidebar-container]").find(".qor-header"),i=a.parents("[horizontal-ui-sheet]").find(".qor-sheet-header"),s=a.parents("[horizontal-ui-sheet]").find("[horizontal-ui-sheet-content]"),s.on("scroll",function(){a.offset().top<i.height()&&c&&(n(a),l=a.clone(),l.addClass("table-fixed-header"),t(l),l.appendTo(i),c=!1),a.offset().top>i.height()&&!c&&(i.find("[table-fixed-header]").remove(),c=!0)}),e(window).on("resize",function(){i.find("[table-fixed-header]").is("thead")&&(n(a),t(i.find("[table-fixed-header]")))})}}}angular.module("qorDash.core").directive("tableFixedHeader",e),e.$inject=["jQuery","$document"]}(),function(){"use strict";function e(e,t,n){function o(e){r.forEach(function(t){t.active&&t!==e&&(t.active=!1)}),e.active=!0}function a(e){e.active?e.active=!1:o(e)}function i(){r.forEach(function(e){e.active=!1})}var r=this.groups=e.groups=n.sortedGroups();e.selectGroup=o,e.toggleGroup=a,e.resetStates=i,e.appTitle=n.getTitle(),e.hasActiveGroup=function(){return r.reduce(function(e,t){return e||t.active},!1)},e.activeGroup=function(){var e;return r.forEach(function(t){t.active&&(e=t)}),e},t.$on("$stateChangeSuccess",i)}function t(e,t){return{restrict:"EA",replace:!0,scope:!0,controller:"QorSidebarController",template:'<nav class="qor-sidebar" ng-class="{ opened: hasActiveGroup() }"><header class="qor-sidebar-groups"><div class="qor-logo"><a href="/"><img src="'+t+'" height="50" width="50"></a></div><loading-indicator></loading-indicator><ul class="qor-sidebar-nav"><li ng-repeat="group in groups" has-permission="{{group.id}}.read" ng-class="{\'user-label\' : group.title==\'Logout\'}" ui-sref-active="active" bind-html-compile="group.content" ng-class="{ active: group.active }" ng-click="group.templateUrl && toggleGroup(group)"></li></ul></header></nav>'}}function n(){return{restrict:"EA",template:'<i class="group-icon" ng-if="iconClass" ng-class="iconClass"></i><span class="group-nav-heading">{{qorSidebarGroupHeading}}</span>',scope:{qorSidebarGroupHeading:"@",iconClass:"@"},link:function(e,t){t.addClass("group-nav")}}}function o(e){return{restrict:"A",link:function(t,n,o){t.$watch(function(){return t.$eval(o.bindHtmlCompile)},function(o){n.html(o),e(n.contents())(t)})}}}function a(){function e(){return Object.keys(n).map(function(e){var t=angular.extend({id:e},n[e]);return t.controller||(t.controller="SidebarStubController"),t})}function t(t){var n=!0;return{sortedGroups:function(){return e().sort(function(e,t){return(e.nav||0)-(t.nav||0)})},isExpanded:function(){return n},showSidebar:function(){n=!0,t.$broadcast("qorSidebarStateChange",n)},hideSidebar:function(){n=!1,t.$broadcast("qorSidebarStateChange",n)},toggleSidebar:function(){n=!n,t.$broadcast("qorSidebarStateChange",n)},getTitle:function(){return o}}}var n={},o="qorio";this.config=function(e,t){if(n.id)throw Error("Group with id="+e+" already exist.");n[e]=t},this.setTitle=function(e){o=e},t.$inject=["$rootScope"],this.$get=t}function i(){return{restrict:"EA",link:function(e,t){if(!t.find("[qor-sidebar]").length)throw Error("qor-sidebar should be defined inside");if(!t.find("[qor-content]").length)throw Error("qor-content should be defined inside");t.find("[qor-content]").addClass("qor-content"),e.$on("qorSidebarStateChange",function(e){t.toggleClass("qor-sidebar-expanded",e)})}}}function r(e){return{restrict:"A",scope:!0,priority:500,compile:function(){return function(t,n,o){var a=e(t.$eval(o.propertyController),{$scope:t});n.data("$ngControllerController",a),n.children().data("$ngControllerController",a)}}}}angular.module("qorDash.core").controller("QorSidebarController",e).controller("SidebarStubController",function(){}).directive("qorSidebarContainer",i).directive("qorSidebar",t).provider("$qorSidebar",a).directive("qorSidebarGroupHeading",n).directive("propertyController",r).directive("bindHtmlCompile",o),e.$inject=["$scope","$rootScope","$qorSidebar"],t.$inject=["$rootScope","ICON_URL"],o.$inject=["$compile"],r.$inject=["$controller"]}(),function(){"use strict";function e(e){return{restrict:"ECA",terminal:!0,priority:400,link:function(t,n){var o,a=function(e){return e.length&&e.get(0).scrollHeight>e.get(0).clientHeight},i=function(e,t){return e!=t&&t.has(e).length?a(e)?!0:i(e.parent(),t):!1},r=function(e){return!a(e.closest(".qor-sheet-content"))},s=!1,l=!1;n[0].addEventListener("mousewheel",function(t){var a,c=e(t.target);if(!i(c,c.closest(".qor-sheet-content")))return r(c)||s&&l?(e(window).width()>=768&&(n[0].doScroll?n[0].doScroll(t.wheelDelta>0?"left":"right"):(t.wheelDelta||t.detail)>0?n[0].scrollLeft-=20:n[0].scrollLeft+=20,a=!1,l=!0),t.preventDefault()):l=!1,s=!0,clearTimeout(o),o=setTimeout(function(){s=!1,l=!1},400),a})}}}angular.module("qorDash.core").directive("horizontalScroll",e),e.$inject=["jQuery"]}(),function(){"use strict";function e(e,t){function n(e,n){e.$watch("vm.isSpinning",function(e){var o=n.find("img");t(function(){o.toggleClass("show",e)})})}function o(){function t(e,t){t.resolve&&(o.isSpinning=!0)}function n(){o.isSpinning=!1}var o=this;o.isSpinning=!1,e.$on("$stateChangeStart",t),e.$on("$stateChangeSuccess",n),e.$on("$stateChangeError",n)}return{restrict:"E",link:n,replace:!0,template:'<div class="loading-indicator"><img class="hide" src="assets/images/cube.gif"></div>',controller:o,controllerAs:"vm",bindToController:!0}}angular.module("qorDash.core").directive("loadingIndicator",e),e.$inject=["$rootScope","$timeout"]}(),function(){"use strict";function e(){function e(e){for(var t={},n=0;n<e.length;n++){var o=e[n],a=new Date(1e3*o.Created).toLocaleDateString(),i=t[a];void 0===i&&(i=0),i+=1,t[a]=i}return t}function t(e){for(var t=[],n=[],o=Object.keys(e),a=o.length-1;a>-1;a--){var i=o[a];t.push(i),n.push(e[i])}return[n,t]}function n(n){var o=this;n.$watch("vm.data",function(n){if(n){var a=e(n),i=t(a);o.dataset=[i[0]],o.labels=i[1],o.options={maintainAspectRatio:!1,scaleStepWidth:1,pointDotRadius:1,scaleOverride:!0,scaleSteps:o.labels.length},o.lineChartColours=[{fillColor:"rgba(151,187,205,0.5)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff"}]}})}return n.$inject=["$scope"],{restrict:"E",controller:n,controllerAs:"vm",bindToController:!0,replace:!1,scope:{data:"="},template:'<canvas class="chart chart-line" chart-colours="vm.lineChartColours"  chart-options="vm.options" chart-data="vm.dataset" chart-labels="vm.labels"></canvas>'}}angular.module("qorDash.core").directive("lineChart",e)}(),function(){"use strict";function e(){return{link:function(e,t){e.$watch(function(){return t.children().height()},function(e,n){e!==n&&$(t).scrollTop(t.children().height())})}}}angular.module("qorDash.core").directive("autoScroll",e)}(),function(){"use strict";function e(e,t){function n(){o.connection=o.connection||new EventSource(e),o.connection.addEventListener("Event",function(e){var n=JSON.parse(e.data).type;t.$broadcast("eventBus:all",e),t.$broadcast("eventBus:"+n,e)})}var o={initConnection:n};return o}angular.module("qorDash.core").factory("eventBus",e),e.$inject=["EVENTS_URL","$rootScope"]}(),function(){"use strict";function e(e,t,n){return{showError:function(o){var a;return a="string"==typeof o?o:o.data?o.data.error?o.data.error:n:t,e.error("Can't load data: "+a),a}}}angular.module("qorDash.core").factory("errorHandler",e),e.$inject=["Notification","UNKNOWN_ERROR","UNKNOWN_SERVER_ERROR"]}(),function(){"use strict";angular.module("qorDash.core").constant("UNKNOWN_ERROR","unknown error").constant("UNKNOWN_SERVER_ERROR","unknown server error").constant("USER_HAS_NO_ACCESS","User has no permissions")}(),!function(){"use strict";angular.module("qorDash.config",[]).constant("AUTH_API_URL","https://accounts.qor.io/v1").constant("API_HOST","https://redpill.qoriolabs.com").constant("WS_URL","wss://redpill.qoriolabs.com").constant("EVENTS_URL","https://redpill.qoriolabs.com/v1/test/events").constant("ICON_URL","assets/images/logo-without-text.png").constant("LOGIN_PAGE_ICON_URL","assets/images/logo-white.png").constant("AUTH_API_USER","501f0c0390301655982bf6ba5581f95d").constant("DOCKER_ENDPOINT","https://redpill.qoriolabs.com/v1/dockerapi").constant("AUTH_API_SECRET","fd2c94f3f2c88d25649334017a25f900").constant("GOOGLE_CLIENT_ID","138766960114-ikj7ignimooj54qabses3cc857l1a8h4.apps.googleusercontent.com").constant("GITHUB_CLIENT_ID","7284146c5831ac4ec98c")}(),function(){function e(e,t){function n(e){return e.data}function o(e){return errorHandler.showError(e),$q.reject(e.data?e.data:e)}function a(a,i,r){return e.get(t+"/v1/orchestrate/"+a+"/"+i+"/"+r+"/").then(n)["catch"](o)}function i(a,i){return e.get(t+"/v1/orchestrate/"+a+"/"+i+"/").then(n)["catch"](o)}function r(a,i,r,s){return e.get(t+"/v1/orchestrate/"+a+"/"+i+"/"+r+"/"+s).then(n)["catch"](o)}function s(a,i){var r={method:"POST",url:t+a,data:i};return e(r).then(n)["catch"](o)}return{getHistory:a,getInstances:i,getOption:r,getLogUrl:s}}angular.module("qorDash.api").factory("orchestrateService",e),e.$inject=["$http","API_HOST"]}(),function(){function e(e,t){function n(){return e.get("data/network-data.json").then(function(e){return e.data?e.data:e})["catch"](function(e){return t.showError(e),$q.reject(e.data?e.data:e)})}return{load:n}}angular.module("qorDash.api").factory("networkViewService",e),e.$inject=["$http","errorHandler"]}(),function(){function e(e,t,n,o,a,i){function r(){var r={method:"POST",url:n+"/auth",data:{username:o,password:a}};return t(r).then(function(e){return e.data.token})["catch"](function(t){return i.showError(t),e.reject(t.data?t.data:t)})}return{load:r}}angular.module("qorDash.api").factory("manageLoader",e),e.$inject=["$q","$http","AUTH_API_URL","AUTH_API_USER","AUTH_API_SECRET","errorHandler"]}(),function(){function e(e,t,n){function o(e){return e.data}function a(e){return n.showError(e),$q.reject(e.data?e.data:e)}function i(n){return e.get(t+"/v1/pkg/"+n+"/").then(o)["catch"](a)}function r(n){return e.get(t+"/v1/conf/"+n+"/").then(o)["catch"](a)}function s(n){return e.get(t+"/v1/env/"+n+"/").then(o)["catch"](a)}function l(n,i,r,s){var l={method:"POST",url:t+"/v1/conf/"+n+"/"+i+"/"+r,data:s};return e(l).then(o)["catch"](a)}function c(n,i,r,s,l){var c={method:"GET",url:t+"/v1/conf/"+n+"/"+i+"/"+r+"/"+s+"/"+l};return e(c).then(o)["catch"](a)}function d(n,i,r,s){var l={method:"GET",url:t+"/v1/conf/"+n+"/"+i+"/"+r+"/"+s+"/"};return e(l).then(o)["catch"](a)}function u(n,i,r){var s={method:"GET",url:t+"/v1/conf/"+n+"/"+i+"/"+r};return e(s).then(o)["catch"](a)}function m(n,i,r,s,l,c){var d={method:"POST",url:t+"/v1/conf/"+n+"/"+i+"/"+r+"/"+s+"/"+l,headers:{"X-Dash-Version":c}};return e(d).then(o)["catch"](a)}function p(n,i,r,s,l,c,d){var u={method:"PUT",url:t+"/v1/conf/"+n+"/"+i+"/"+r+"/"+s+"/"+l,headers:{"X-Dash-Version":c},data:d};return e(u).then(o)["catch"](a)}function v(n,i,r,s,l,c){var d={method:"POST",url:t+"/v1/conf/"+n+"/"+i+"/"+r+"/"+s+"/"+l,headers:{"Content-Type":"text/plain"},data:c};return e(d).then(o)["catch"](a)}function h(n,i,r,s,l,c){var d={method:"DELETE",url:t+"/v1/conf/"+n+"/"+i+"/"+r+"/"+s+"/"+l,headers:{"X-Dash-Version":c}};return e(d).then(o)["catch"](a)}function f(n,i,r,s,l){var c={method:"POST",url:t+"/v1/conf/"+n+"/"+i+"/"+r+"/"+s+"/"+l+"/live"};return e(c).then(o)["catch"](a)}return{getPackage:i,getInstance:r,loadEnv:s,files:{createFile:l,getFileContent:c,getVersions:d,getBaseFile:u,createVersion:m,saveFile:p,cloneFile:v,deleteFile:h,makeVersionLive:f}}}angular.module("qorDash.api").factory("configurationService",e),e.$inject=["$http","API_HOST","errorHandler"]}(),function(){function e(e,t,n,o){function a(e){return e.data?e.data:e}function i(e){return n.showError(e),o.reject(e.data?e.data:e)}function r(n){var o={method:"GET",url:t+"/admin/domain/",headers:{Authorization:"Bearer "+n}};return e(o).then(a)["catch"](i)}function s(n,o){var r={method:"GET",url:t+"/admin/domain/"+n,headers:{Authorization:"Bearer "+o}};return e(r).then(a)["catch"](i)}function l(n,o,r){var s={method:"POST",url:t+"/admin/domain/"+n,headers:{Authorization:"Bearer "+r},data:o};return e(s).then(a)["catch"](i)}return{getDomains:r,getDomainInfo:s,saveDomainInfo:l}}angular.module("qorDash.api").factory("authenticationService",e),e.$inject=["$http","AUTH_API_URL","errorHandler","$q"]}(),function(){function e(e,t,n){function o(e){return e.data||e}function a(e){return n.showError(e),e.data||e}function i(n){var i={method:"GET",url:t+"/account/",headers:{Authorization:"Bearer "+n}};return e(i).then(o)["catch"](a)}function r(n,i){var r={method:"GET",url:t+"/account/"+n,headers:{Authorization:"Bearer "+i}};return e(r).then(o)["catch"](a)}function s(n,i,r){var s={method:"POST",url:t+"/register",headers:{Authorization:"Bearer "+r},data:{identity:{username:n,oauth2_provider:"google.com",oauth2_account_id:i}}};return e(s).then(o)["catch"](a)}function l(n,i,r){var s={method:"POST",url:t+"/register",headers:{Authorization:"Bearer "+r},data:{identity:{username:n,oauth2_provider:"github.com",oauth2_account_id:i}}};return e(s).then(o)["catch"](a)}function c(n,i,r,s){var l={method:"POST",url:t+"/register",headers:{Authorization:"Bearer "+s},data:{identity:{username:n,password:i},custom_object:r}};return e(l).then(o)["catch"](a)}return{getAccounts:i,getAccountById:r,createAccount:c,createGoogleAccount:s,createGitHubAccount:l}}angular.module("qorDash.api").factory("accountsService",e),e.$inject=["$http","AUTH_API_URL","errorHandler","$q"]}(),function(){"use strict";function e(e){e.state("app.console.domains.domain.services.consoles.terminal",{url:"/:terminalId",templateUrl:"app/modules/console/terminal/service-terminal.html",controller:"ServiceTerminalController",controllerAs:"vm"})}angular.module("qorDash.console.domain.services.consoles.terminal",[]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t){var n=this;n.terminalId=e.terminalId,n.service=e.service,n.instance=e.instance,n.domain=e.domain,n.wsUrl=[t,"v1","console",n.domain,n.instance,n.service,n.terminalId].join("/")}angular.module("qorDash.console.domain.services.consoles.terminal").controller("ServiceTerminalController",e),e.$inject=["$stateParams","WS_URL"]}(),function(){"use strict";function e(e){e.state("app.console.domains.domain.services",{url:"/:instance",templateUrl:"app/modules/console/services/services.html",controller:"ServicesController",controllerAs:"vm",resolve:{resolvedServices:["domainService","$stateParams",function(e,t){return e.loadServices(t.domain,t.instance)}]}})}angular.module("qorDash.console.domain.services",[]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t){e.state("app.console",{url:"/console",views:{"main@":{template:'<div ui-view=""></div>',controller:["$state",function(e){var t=e.current.name,n="app.console"===t?"app.console.domains":t;
e.go(n)}]}}}).state("app.console.domains",{url:"",templateUrl:"app/modules/console/console.html",controller:"ConsoleController",controllerAs:"vm",resolve:{resolvedDomains:["domainService",function(e){return e.loadDomains()}]}}),t.config("console",{title:"Console",nav:8,content:'<span ui-sref="app.console" ui-sref-opts="{reload: true}" qor-sidebar-group-heading="Console" data-icon-class="fa fa-terminal"></span>'})}angular.module("qorDash.console",["qorDash.widget","qorDash.console","qorDash.console.domain","qorDash.console.domain.services","qorDash.console.domain.services.consoles","qorDash.console.domain.services.consoles.terminal"]).config(e),e.$inject=["$stateProvider","$qorSidebarProvider"]}(),function(){"use strict";function e(e,t){var n=this;n.instance=e.instance,n.services=t}angular.module("qorDash.console").controller("ServicesController",e),e.$inject=["$stateParams","resolvedServices"]}(),function(){"use strict";function e(e){e.state("app.console.domains.domain",{url:"/:domain",templateUrl:"app/modules/console/domain/domain.html",controller:"ConsoleDomainController",controllerAs:"vm",resolve:{resolvedDomain:["domainService","$stateParams",function(e,t){return e.loadDomain(t.domain)}]}})}angular.module("qorDash.console.domain",[]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e){var t=this;t.domain=e}angular.module("qorDash.console.domain").controller("ConsoleDomainController",e),e.$inject=["resolvedDomain"]}(),function(){"use strict";function e(e){e.state("app.console.domains.domain.services.consoles",{url:"/:service",templateUrl:"app/modules/console/consoles/consoles.html",controller:"ConsolesController",controllerAs:"vm",resolve:{resolvedServices:["domainService","$stateParams",function(e,t){return e.loadServices(t.domain,t.instance)}]}})}angular.module("qorDash.console.domain.services.consoles",[]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t){var n=this;n.service=e.service,n.consoles=t[n.service]}angular.module("qorDash.console.domain.services.consoles").controller("ConsolesController",e),e.$inject=["$stateParams","resolvedServices"]}(),function(){"use strict";function e(e){e.state("app.configurations.services",{url:"/:domain",templateUrl:"app/modules/configurations/services/services.html",controller:"ServicesController",controllerAs:"vm",resolve:{resolvedDomain:["domainService","$stateParams",function(e,t){return e.loadDomain(t.domain)}]}})}angular.module("qorDash.configurations.services",[]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n){var o=this;o.services=n.services,1==o.services.length&&"app.configurations.services"==t.current.name&&t.go(".state",{service:o.services[0]})}angular.module("qorDash.configurations.services").controller("ServicesController",e),e.$inject=["$scope","$state","resolvedDomain"]}(),function(){"use strict";function e(e){e.decorator("views",function(e,t){var n={},o=t(e);return angular.forEach(o,function(t,o){t.resolve=t.resolve||{},t.resolve.resolvedPermissions=["permissions",function(t){return t.resolveState(e.name)}],n[o]=t}),n})}angular.module("qorDash.auth.permissions",[]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n){var o=this,a=["login","logout","log_details"];this.current=null,this.storageKey="userPermissions",this.map=function(e){return e.reduce(function(e,t){return e[t.resource]=t.permissions,e},{})},this.clear=function(){o.current=null,t.localStorage.removeItem(o.storageKey)},this.save=function(e){o.current=null;var n=e&&e.data&&e.data.acls?o.map(e.data.acls):null;n&&t.localStorage.setItem(o.storageKey,JSON.stringify(n))},this.get=function(){return o.current=o.current||JSON.parse(t.localStorage.getItem(o.storageKey)),o.current},this.resolveState=function(t){return o.hasAccess(t)||e.reject(n)},this.hasAccess=function(e,t){if(a.indexOf(e)>=0)return!0;t=t||"read";var n=o.get(),i=/\./.test(e)?e.split(".")[1]:e,r=n&&n[i]&&n[i].indexOf(t)>=0;return!!r}}angular.module("qorDash.auth.permissions").service("permissions",e),e.$inject=["$q","$window","USER_HAS_NO_ACCESS"]}(),function(){"use strict";function e(e,t,n){var o=n[0];return{transclude:o.transclude,priority:o.priority-1,terminal:o.terminal,restrict:o.restrict,scope:{hasPermission:"@"},link:function(n,a,i){var r,s,l=n.hasPermission;if(l.indexOf(".")>=0){var c=l.split(".");r=c[0],s=c[1]}else r=e.current.name,s=l;var d,u=i.ngIf;d=u?function(){return n.$eval(u)&&t.hasAccess(r,s)}:function(){return t.hasAccess(r,s)},i.ngIf=d,o.link.apply(o,arguments)}}}angular.module("qorDash.auth.permissions").directive("hasPermission",e),e.$inject=["$state","permissions","ngIfDirective"]}(),function(){"use strict";function e(e,t,n,o){function a(t,a,i){function r(){e.init(t.provider.oauthProvider).then(e.login).then(t.vm.successLogin)["catch"](t.vm.failedLogin)}var s={google:{oauthProvider:n,name:"Google",iconClass:"fa fa-google"},github:{oauthProvider:o,name:"GitHub",iconClass:"fa fa-github"}};t.provider=s[i.provider],a.on("click",r),t.$on("$destroy",function(){a.off("click",r)})}function i(){function n(t){return e.exchangeToken(t).then(a.onSuccess)}function o(e){t.showError(e)}var a=this;a.successLogin=n,a.failedLogin=o}return{scope:{onSuccess:"=",provider:"@"},restrict:"E",replace:!0,link:a,controller:i,controllerAs:"vm",bindToController:!0,templateUrl:"app/modules/auth/oauth/oauth-signin-button.html"}}angular.module("qorDash.auth.oauth").directive("oauthSigninButton",e),e.$inject=["oauthAdapter","errorHandler","oauthProviderGoogle","oauthProviderGitHub"]}(),function(){"use strict";function e(e,t,n,o){function a(t){return c=t,e.when(c)}function i(){return c.login()}function r(){return c.logout()}function s(e){return c.exchangeToken(e).then(t.saveToken).then(n.save)["catch"](l)}function l(e){o.showError(e)}var c=null;return{_selectedProvider:c,init:a,login:i,logout:r,exchangeToken:s}}angular.module("qorDash.auth.oauth").factory("oauthAdapter",e),e.$inject=["$q","auth","permissions","errorHandler"]}(),function(){"use strict";angular.module("qorDash.widget.traffic",[])}(),function(){"use strict";function e(e,t){return{restrict:"EA",scope:{},link:function(n,o,a){e.d3().then(function(e){parseInt(a.margin)||20,parseInt(a.barHeight)||20,parseInt(a.barPadding)||5;n.$watch(function(){return angular.element(t)[0].innerWidth},function(){n.render(n.data)}),n.render=function(){function t(){function o(t){t.x=Math.max(0,Math.min(S-t.width,e.event.x)),t.y=Math.max(0,Math.min($-t.height,e.event.y)),e.select(this).attr("transform","translate("+t.x+","+t.y+")"),i.relayout(),n.selectAll(".node").selectAll("rect").attr("height",function(e){return e.height}),T.attr("d",r)}function s(e){e.children.forEach(function(e){e.state="contained",e.parent=this,e._parent=null,s(e)},e)}function m(e){e.state="expanded",e.children.forEach(function(e){e.state="collapsed",e._parent=this,e.parent=null,s(e)},e)}function p(e){e.state="collapsed",s(e)}function v(){T.style("stroke",h).style("marker-end",function(){return"url(#arrowHead)"}).transition().duration(C).style("opacity",u.LINK_DEFAULT),L.selectAll("rect").style("fill",function(e){return e.color=l(e.type.replace(/ .*/,"")),e.color}).style("stroke",function(t){return e.rgb(l(t.type.replace(/ .*/,""))).darker(.1)}).style("fill-opacity",u.NODE_DEFAULT),L.filter(function(e){return"collapsed"===e.state}).transition().duration(C).style("opacity",u.NODE_DEFAULT)}function b(e){I(2*C),A(),"collapsed"===e.state?m(e):p(e),i.relayout(),t(),T.attr("d",r),v()}function D(e){T.filter(function(t){return t.source===e}).style("marker-end",function(){return"url(#arrowHeadInflow)"}).style("stroke",g).style("opacity",u.LINK_DEFAULT),T.filter(function(t){return t.target===e}).style("marker-end",function(){return"url(#arrowHeadOutlow)"}).style("stroke",f).style("opacity",u.LINK_DEFAULT)}function P(e){T.filter(function(t){return t.source!==e&&t.target!==e}).style("marker-end",function(){return"url(#arrowHead)"}).transition().duration(C).style("opacity",u.LINK_FADED),L.filter(function(t){return t.name===e.name?!1:!i.connected(t,e)}).transition().duration(C).style("opacity",u.NODE_FADED)}var T,V,L,_,M,j;T=n.select("#links").selectAll("path.link").data(i.visibleLinks(),function(e){return e.id}),T.transition().duration(C).style("stroke-WIDTH",function(e){return Math.max(1,e.thickness)}).attr("d",r).style("opacity",u.LINK_DEFAULT),T.exit().remove(),V=T.enter().append("path").attr("class","link").style("fill","none"),V.on("mouseenter",function(t){d||(E().select(".value").text(function(){return t.direction>0?t.source.name+" → "+t.target.name+"\n"+x(t.value):t.target.name+" ← "+t.source.name+"\n"+x(t.value)}),e.select(this).style("stroke",h).transition().duration(C/2).style("opacity",u.LINK_HIGHLIGHT))}),V.on("mouseleave",function(){d||(A(),e.select(this).style("stroke",h).transition().duration(C/2).style("opacity",u.LINK_DEFAULT))}),V.sort(function(e,t){return t.thickness-e.thickness}).classed("leftToRight",function(e){return e.direction>0}).classed("rightToLeft",function(e){return e.direction<0}).style("marker-end",function(){return"url(#arrowHead)"}).style("stroke",h).style("opacity",0).transition().delay(C).duration(C).attr("d",r).style("stroke-WIDTH",function(e){return Math.max(1,e.thickness)}).style("opacity",u.LINK_DEFAULT),L=n.select("#nodes").selectAll(".node").data(i.collapsedNodes(),function(e){return e.id}),L.transition().duration(C).attr("transform",function(e){return"translate("+e.x+","+e.y+")"}).style("opacity",u.NODE_DEFAULT).select("rect").style("fill",function(e){return e.color=l(e.type.replace(/ .*/,"")),e.color}).style("stroke",function(t){return e.rgb(l(t.type.replace(/ .*/,""))).darker(.1)}).style("stroke-WIDTH","1px").attr("height",function(e){return e.height}).attr("width",i.nodeWidth()),L.exit().transition().duration(C).attr("transform",function(e){var t,n,o;return t=e.ancestors.filter(function(e){return"collapsed"===e.state})[0],n=t?t.x:e.x,o=t?t.y:e.y,"translate("+n+","+o+")"}).remove(),_=L.enter().append("g").attr("class","node"),_.attr("transform",function(e){var t=e._parent?e._parent.x:e.x,n=e._parent?e._parent.y:e.y;return"translate("+t+","+n+")"}).style("opacity",1e-6).transition().duration(C).style("opacity",u.NODE_DEFAULT).attr("transform",function(e){return"translate("+e.x+","+e.y+")"}),_.append("text"),_.append("rect").style("fill",function(e){return e.color=l(e.type.replace(/ .*/,"")),e.color}).style("stroke",function(t){return e.rgb(l(t.type.replace(/ .*/,""))).darker(.1)}).style("stroke-WIDTH","1px").attr("height",function(e){return e.height}).attr("width",i.nodeWidth()),L.on("mouseenter",function(t){d||(v(),D(t),P(t),e.select(this).select("rect").style("fill",function(e){return e.color=e.netFlow>0?f:g,e.color}).style("stroke",function(t){return e.rgb(t.color).darker(.1)}).style("fill-opacity",u.LINK_DEFAULT),a.style("left",t.x+w.LEFT+"px").style("top",t.y+t.height+w.TOP+15+"px").transition().duration(C).style("opacity",1).select(".value").text(function(){var e=t.children.length?"\n(Double click to expand)":"";return t.name+"\nNet flow: "+q(t.netFlow)+e}))}),L.on("mouseleave",function(){d||(A(),v())}),L.filter(function(e){return e.children.length}).on("dblclick",b),L.call(e.behavior.drag().origin(function(e){return e}).on("dragstart",function(){this.parentNode.appendChild(this)}).on("drag",o)),L.filter(function(e){return 0!==e.value}).select("text").attr("x",-6).attr("y",function(e){return e.height/2}).attr("dy",".35em").attr("text-anchor","end").attr("transform",null).text(function(e){return e.name}).filter(function(e){return e.x<S/2}).attr("x",6+i.nodeWidth()).attr("text-anchor","start"),M=n.select("#collapsers").selectAll(".collapser").data(i.expandedNodes(),function(e){return e.id}),j=M.enter().append("g").attr("class","collapser"),j.append("circle").attr("r",y.RADIUS).style("fill",function(e){return e.color=l(e.type.replace(/ .*/,"")),e.color}),j.style("opacity",u.NODE_DEFAULT).attr("transform",function(e){return"translate("+(e.x+e.width/2)+","+(e.y+y.RADIUS)+")"}),j.on("dblclick",b),M.select("circle").attr("r",y.RADIUS),M.transition().delay(C).duration(C).attr("transform",function(e,t){return"translate("+(y.RADIUS+2*t*(y.RADIUS+y.SPACING))+","+(-y.RADIUS-k)+")"}),M.on("mouseenter",function(t){if(!d){E().select(".value").text(function(){return t.name+"\n(Double click to collapse)"});var n=c(t.type.replace(/ .*/,""));e.select(this).style("opacity",u.NODE_HIGHLIGHT).select("circle").style("fill",n),L.filter(function(e){return e.ancestors.indexOf(t)>=0}).style("opacity",u.NODE_HIGHLIGHT).select("rect").style("fill",n)}}),M.on("mouseleave",function(t){d||(A(),e.select(this).style("opacity",u.NODE_DEFAULT).select("circle").style("fill",function(e){return e.color}),L.filter(function(e){return e.ancestors.indexOf(t)>=0}).style("opacity",u.NODE_DEFAULT).select("rect").style("fill",function(e){return e.color}))}),M.exit().remove()}var n,a,i,r,s,l,c,d,u={NODE_DEFAULT:.9,NODE_FADED:.1,NODE_HIGHLIGHT:.8,LINK_DEFAULT:.6,LINK_FADED:.05,LINK_HIGHLIGHT:.9},m=["Asset","Expense","Revenue","Equity","Liability"],p=["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],v=["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],h="#b3b3b3",f="#2E86D1",g="#D63028",b=36,y={RADIUS:b/2,SPACING:2},k=10,w={TOP:2*(y.RADIUS+k),RIGHT:k,BOTTOM:k,LEFT:k},C=400,$=500-w.TOP-w.BOTTOM,S=960-w.LEFT-w.RIGHT,D=32,x=function(t){var n=e.format(",.0f");return"£"+n(t)},q=function(t){var n=e.format(",.0f");return"£"+n(Math.abs(t))+(0>t?" CR":" DR")},I=function(e){d=!0,setTimeout(function(){d=!1},e)},A=function(){return a.transition().duration(C).style("opacity",0)},E=function(){return a.style("left",e.event.pageX+"px").style("top",e.event.pageY+15+"px").transition().duration(C).style("opacity",1)};l=e.scale.ordinal().domain(m).range(p),c=e.scale.ordinal().domain(m).range(v),n=e.select(o[0]).append("svg").attr("width",S+w.LEFT+w.RIGHT).attr("height",$+w.TOP+w.BOTTOM).append("g").attr("transform","translate("+w.LEFT+","+w.TOP+")"),n.append("g").attr("id","links"),n.append("g").attr("id","nodes"),n.append("g").attr("id","collapsers"),a=e.select(o[0]).append("div").attr("id","tooltip"),a.style("opacity",0).append("p").attr("class","value"),i=e.biHiSankey(),i.nodeWidth(b).nodeSpacing(10).linkSpacing(4).arrowheadScaleFactor(.5).size([S,$]),r=i.link().curvature(.45),s=n.append("defs"),s.append("marker").style("fill",h).attr("id","arrowHead").attr("viewBox","0 0 6 10").attr("refX","1").attr("refY","5").attr("markerUnits","strokeWidth").attr("markerWidth","1").attr("markerHeight","1").attr("orient","auto").append("path").attr("d","M 0 0 L 1 0 L 6 5 L 1 10 L 0 10 z"),s.append("marker").style("fill",g).attr("id","arrowHeadInflow").attr("viewBox","0 0 6 10").attr("refX","1").attr("refY","5").attr("markerUnits","strokeWidth").attr("markerWidth","1").attr("markerHeight","1").attr("orient","auto").append("path").attr("d","M 0 0 L 1 0 L 6 5 L 1 10 L 0 10 z"),s.append("marker").style("fill",f).attr("id","arrowHeadOutlow").attr("viewBox","0 0 6 10").attr("refX","1").attr("refY","5").attr("markerUnits","strokeWidth").attr("markerWidth","1").attr("markerHeight","1").attr("orient","auto").append("path").attr("d","M 0 0 L 1 0 L 6 5 L 1 10 L 0 10 z");var P=[{type:"Asset",id:"a",parent:null,name:"Assets"},{type:"Asset",id:1,parent:"a",number:"101",name:"Cash"},{type:"Asset",id:2,parent:"a",number:"120",name:"Accounts Receivable"},{type:"Asset",id:3,parent:"a",number:"140",name:"Merchandise Inventory"},{type:"Asset",id:4,parent:"a",number:"150",name:"Supplies"},{type:"Asset",id:5,parent:"a",number:"160",name:"Prepaid Insurance"},{type:"Asset",id:6,parent:"a",number:"170",name:"Land"},{type:"Asset",id:7,parent:"a",number:"175",name:"Buildings"},{type:"Asset",id:8,parent:"a",number:"178",name:"Acc. Depreciation Buildings"},{type:"Asset",id:9,parent:"a",number:"180",name:"Equipment"},{type:"Asset",id:10,parent:"a",number:"188",name:"Acc. Depreciation Equipment"},{type:"Liability",id:"l",parent:null,number:"l",name:"Liabilities"},{type:"Liability",id:11,parent:"l",number:"210",name:"Notes Payable"},{type:"Liability",id:12,parent:"l",number:"215",name:"Accounts Payable"},{type:"Liability",id:13,parent:"l",number:"220",name:"Wages Payable"},{type:"Liability",id:14,parent:"l",number:"230",name:"Interest Payable"},{type:"Liability",id:15,parent:"l",number:"240",name:"Unearned Revenues"},{type:"Liability",id:16,parent:"l",number:"250",name:"Mortage Loan Payable"},{type:"Equity",id:"eq",parent:null,number:"eq",name:"Equity"},{type:"Revenue",id:"r",parent:null,number:"r",name:"Revenues"},{type:"Revenue",id:"or",parent:"r",number:"",name:"Operating Revenue"},{type:"Revenue",id:17,parent:"or",number:"310",name:"Service Revenues"},{type:"Revenue",id:"nor",parent:"r",number:"",name:"Non-Operating Revenue"},{type:"Revenue",id:18,parent:"nor",number:"810",name:"Interest Revenues"},{type:"Revenue",id:19,parent:"nor",number:"910",name:"Asset Sale Gain"},{type:"Revenue",id:20,parent:"nor",number:"960",name:"Asset Sale Loss"},{type:"Expense",id:"ex",parent:null,number:"ex",name:"Expenses"},{type:"Expense",id:21,parent:"ex",number:"500",name:"Salaries Expense"},{type:"Expense",id:22,parent:"ex",number:"510",name:"Wages Expense"},{type:"Expense",id:23,parent:"ex",number:"540",name:"Supplies Expense"},{type:"Expense",id:24,parent:"ex",number:"560",name:"Rent Expense"},{type:"Expense",id:25,parent:"ex",number:"570",name:"Utilities Expense"},{type:"Expense",id:26,parent:"ex",number:"576",name:"Telephone Expense"},{type:"Expense",id:27,parent:"ex",number:"610",name:"Advertising Expense"},{type:"Expense",id:28,parent:"ex",number:"750",name:"Depreciation Expense"}],T=[{source:8,target:28,value:Math.floor(100*Math.random())},{source:17,target:18,value:Math.floor(100*Math.random())},{source:22,target:24,value:Math.floor(100*Math.random())},{source:3,target:13,value:Math.floor(100*Math.random())},{source:24,target:24,value:Math.floor(100*Math.random())},{source:5,target:4,value:Math.floor(100*Math.random())},{source:15,target:5,value:Math.floor(100*Math.random())},{source:18,target:8,value:Math.floor(100*Math.random())},{source:3,target:20,value:Math.floor(100*Math.random())},{source:17,target:18,value:Math.floor(100*Math.random())},{source:22,target:5,value:Math.floor(100*Math.random())},{source:4,target:24,value:Math.floor(100*Math.random())},{source:26,target:16,value:Math.floor(100*Math.random())},{source:27,target:6,value:Math.floor(100*Math.random())},{source:23,target:4,value:Math.floor(100*Math.random())},{source:10,target:24,value:Math.floor(100*Math.random())},{source:17,target:16,value:Math.floor(100*Math.random())},{source:5,target:12,value:Math.floor(100*Math.random())},{source:12,target:16,value:Math.floor(100*Math.random())},{source:19,target:5,value:Math.floor(100*Math.random())},{source:15,target:24,value:Math.floor(100*Math.random())},{source:27,target:2,value:Math.floor(100*Math.random())},{source:26,target:28,value:Math.floor(100*Math.random())},{source:22,target:24,value:Math.floor(100*Math.random())},{source:3,target:18,value:Math.floor(100*Math.random())},{source:18,target:5,value:Math.floor(100*Math.random())},{source:25,target:28,value:Math.floor(100*Math.random())},{source:12,target:1,value:Math.floor(100*Math.random())},{source:28,target:21,value:Math.floor(100*Math.random())},{source:9,target:16,value:Math.floor(100*Math.random())},{source:14,target:23,value:Math.floor(100*Math.random())},{source:6,target:1,value:Math.floor(100*Math.random())},{source:9,target:15,value:Math.floor(100*Math.random())},{source:16,target:24,value:Math.floor(100*Math.random())},{source:22,target:28,value:Math.floor(100*Math.random())},{source:8,target:21,value:Math.floor(100*Math.random())},{source:22,target:7,value:Math.floor(100*Math.random())},{source:18,target:10,value:Math.floor(100*Math.random())},{source:"eq",target:1,value:Math.floor(100*Math.random())},{source:1,target:21,value:Math.floor(100*Math.random())},{source:1,target:24,value:Math.floor(100*Math.random())},{source:17,target:1,value:Math.floor(100*Math.random())},{source:Math.ceil(28*Math.random()),target:Math.ceil(28*Math.random()),value:Math.floor(100*Math.random())},{source:Math.ceil(28*Math.random()),target:Math.ceil(28*Math.random()),value:Math.floor(100*Math.random())},{source:Math.ceil(28*Math.random()),target:Math.ceil(28*Math.random()),value:Math.floor(100*Math.random())},{source:Math.ceil(28*Math.random()),target:Math.ceil(28*Math.random()),value:Math.floor(100*Math.random())},{source:Math.ceil(28*Math.random()),target:Math.ceil(28*Math.random()),value:Math.floor(100*Math.random())},{source:Math.ceil(28*Math.random()),target:Math.ceil(28*Math.random()),value:Math.floor(100*Math.random())},{source:Math.ceil(28*Math.random()),target:Math.ceil(28*Math.random()),value:Math.floor(100*Math.random())},{source:Math.ceil(28*Math.random()),target:Math.ceil(28*Math.random()),value:Math.floor(100*Math.random())},{source:Math.ceil(28*Math.random()),target:Math.ceil(28*Math.random()),value:Math.floor(100*Math.random())},{source:Math.ceil(28*Math.random()),target:Math.ceil(28*Math.random()),value:Math.floor(100*Math.random())}];i.nodes(P).links(T).initializeNodes(function(e){e.state=e.parent?"contained":"collapsed"}).layout(D),I(2*C),t()}})}}}angular.module("qorDash.widget.traffic").directive("qlTraffic",e);e.$inject=["d3","$window","$interval","$compile","$rootScope"]}(),function(){"use strict";angular.module("qorDash.widget.timeline",["relativeDate","ui.bootstrap"])}(),function(){"use strict";function e(e,t){var n=function(e){e.height(e.parent().parent().parent().height())};return{link:function(o,a){e(function(){n(a),o.onresize=function(){n(a)},angular.element(t).bind("resize",function(){o.onresize()})})}}}function t(e,t,n,o){function a(t){var n=t.split(",");switch(n[0]){case"****":"["==n[1]?(c=n[3],e.$apply(function(){e.events.push(s(n,"event-icon-primary"))})):"]"==n[1]&&(l(n[3],"event-icon-primary",n[2]),c="");break;case"????":"["==n[1]?(c=n[3],e.$apply(function(){e.events.push(s(n,"event-icon-warning"))})):l(n[3],"event-icon-warning",n[2]);break;case"!!!!":"["==n[1]?(c=n[3],e.$apply(function(){e.events.push(s(n,"event-icon-danger"))})):l(n[3],"event-icon-danger",n[2]);break;default:t&&(e.allMessages[c]||(e.allMessages[c]=""),e.allMessages[c]+=t+"\n",e.openedTerminals[c]&&e.openedTerminals[c].echo(t))}}e.events=[],e.openedTerminals={};var i=function(e){a(e.data);var t=angular.element("body")[0];t.scrollTop=t.scrollHeight},r=new WebSocket(e.wsUrl);r.onmessage=i,e.$on("$destroy",function(){r.close()}),t.$on("timeline:newWsUrl",function(t,o){r.close(),n(function(){e.$apply(function(){e.events=[],e.allMessages={}})});try{r=new WebSocket(o),r.onmessage=i}catch(a){alert("Wrong WebSocket url"+a)}});var s=function(e,t){return{title:e[3],timestamp:e[2],text:e[4],event_icon_class:t,id:btoa(e[3]),isInfoCollapsed:!0}},l=function(e,t,n){var o=$("#"+btoa(e).substr(0,7));o.children("span").removeClass("event-icon-primary").addClass(t);var a=o.children("section").children("footer").children("ul").children("li").children("a");a.text(n-a.attr("data-original")+" seconds")};e.allMessages={};var c="";e.showDetails=function(t){var a=$("#"+btoa(t.title).substr(0,7)),i=a.children("section").children("footer").children("div"),r=o.initTerminalByObject(i.children("div").children("div"),{greetings:!1,enabled:!1}),s=a.children("section").children("footer").children("ul").children("a");r.disable(),t.isInfoCollapsed?(r.clear(),r.echo(e.allMessages[t.title]),n(function(){s.css("visibility","visible")},300),e.openedTerminals[t.title]=r):(s.css("visibility","hidden"),delete e.openedTerminals[t.title]),n(function(){t.isInfoCollapsed=!t.isInfoCollapsed})}}angular.module("qorDash.widget.timeline").controller("TimelineController",t).directive("qlTimeline",e),e.$inject=["$timeout","$window"],t.$inject=["$scope","$rootScope","$timeout","terminal"]}(),function(){"use strict";angular.module("qorDash.widget.terminal",[])}(),function(){"use strict";function e(){return{scope:{wsUrl:"@"},controller:n}}function t(){function e(e,t,n){return $("#"+e).terminal(n,t)}function t(e,t,n){return t||(t={greetings:!1}),e.terminal(n,t)}return{initTerminalById:e,initTerminalByObject:t}}function n(e,t,n){function o(){l&&(l=null),l=new WebSocket(e.wsUrl),l.onmessage=i}function a(e){try{l.send(e+"\n")}catch(t){s.echo(t)}}function i(e){var t=r(e.data);t&&s.echo(t)}function r(e){var t=e.split(",");switch(t[0]){case"****":return t[3];case"????":return"[[;#7f7f00;]"+t[3]+"]";case"!!!!":return"[[;#7f0000;]"+t[3]+"]";default:return e}}var s=n.initTerminalById(t.id?t.id:"terminal",{greetings:!1,outputLimit:150},a),l=null;o(),e.$on("$destroy",function(){l.close()})}angular.module("qorDash.widget.terminal").directive("qlTerminal",e).service("terminalService",t),n.$inject=["$scope","$attrs","terminalService"]}(),function(){"use strict";angular.module("qorDash.widget.network",[])}(),function(){"use strict";function e(){function e(e,n,o){function a(e){n.html(""),b.root=e,b.levels=[],b.queue=[],b.close=[],i(n),v()}function i(e){var t,n={top:20,right:0,bottom:0,left:0},a=e.width(),i=o.innerHeight-n.top-n.bottom-80;b.zoom=d3.behavior.zoom(),b.scrollLevel=1,b.width=a+n.left+n.right,b.height=i+n.bottom+n.top;var s=d3.select(e[0]);b.grandparent=s.insert("ul",":first-child").attr("class","grandparent breadcrumb"),b.svg=s.append("svg").attr("width",b.width).attr("height",b.height).style("margin-left",-n.left+"px").style("margin-right",-n.right+"px").classed("network-svg",!0).attr("transform","translate("+n.left+","+n.top+")").style("shape-rendering","crispEdges").call(b.zoom),b.g=b.svg.append("g"),b.queue.push(b.root),t=b.queue.shift(),t.width=9*b.width/10,t.height=8*b.height/10,t.headerheight=1*t.height/10,t.x=1*t.width/20,t.y=1*t.height/20,t.depth=1,b.depth=Math.pow(2,b.levels.length-1),b.zoom.scaleExtent([1,100]).on("zoom",p),l(t),r(t)}function r(e){var t=b.grandparent.selectAll("li").data(s(e));t.enter().append("li").append("a").text(function(e){return e.name}).on("click",function(e){d3.event.defaultPrevented||(b.showDetails(e),d(e),r(e))}),t.exit().remove("li")}function s(e){for(var t=[];;){if(t.push(e),!e.parent)break;e=e.parent}return t.reverse(),t}function l(e){var t,n;for(var o in e.children)e.children.hasOwnProperty(o)&&(e.children[o].parent=e,e.children[o].depth=e.depth+1,b.queue.push(e.children[o]));if("parent"in e){if((!b.curParent||b.curParent!==e.parent)&&(b.curChildNodeRow=1,b.curChildNodeColumn=0,b.numChildNode=1,b.curParent=e.parent,0!==b.queue.length))for(;b.queue[b.numChildNode-1].parent===b.curParent;)b.numChildNode++;g(),t=e.parent.width/20,n=e.parent.height/20,e.width=e.parent.width/b.numColumn-1.5*t,e.height=e.parent.height/b.numColumn-1.5*n,e.x=e.parent.x+t*b.curChildNodeRow+e.width*(b.curChildNodeRow-1),e.y=e.parent.headerheight+e.parent.y+n*b.curChildNodeColumn+e.height*(b.curChildNodeColumn-1),e.height=9*e.height/10,e.headerheight=1*e.height/10}e.children?c(e):u(e),m(e),0!==b.queue.length&&l(b.queue.shift())}function c(e){b.g.append("rect").style("fill","#ffffff").style("stroke","#949da5").style("stroke-width","1.4").classed("network-body",!0).attr("rx","3px").attr("x",e.x).attr("y",e.y).attr("width",e.width).attr("height",e.height+e.headerheight).on("click",function(){d3.event.defaultPrevented||(b.showDetails(e),d(e),r(e))}),b.g.append("rect").style("fill","#474C62").style("stroke","#949da5").style("stroke-width","1.4").classed("network-title",!0).attr("rx","3px").attr("x",e.x).attr("y",e.y).attr("width",e.width).attr("height",e.headerheight).on("click",function(){d3.event.defaultPrevented||(b.showDetails(e),d(e),r(e))}),e.text=b.g.append("text").style("fill","#ffffff").attr("text-anchor","middle").attr("x",e.x+e.width/2).attr("y",e.y+e.headerheight/2).attr("dy",".35em").attr("font-size",e.height/14+"px").text(e.name)}function d(e){var t=9*b.width/10,n=9*b.height/10,o=b.width/20,a=b.height/20,i=.9/Math.max(e.width/b.width,e.height/b.height),r=[t/2-(e.x+e.width/2)*i+o,n/2-(e.y+(e.height+e.headerheight)/2)*i+a];b.svg.transition().duration(750).call(b.zoom.translate(r).scale(i).event),b.pressedNode&&b.pressedNode.style("fill","#ffffff").style("font-weight","300"),e.text.style("fill","#C75E5E").style("font-weight","bold"),b.pressedNode=e.text}function u(e){e.x+=e.width/6,e.y+=e.height/6,e.width=2/3*e.width,e.height=2/3*e.height,b.g.append("rect").style("fill","#d3d3e6").style("stroke","#949da5").style("stroke-width","1.4").classed("network-body",!0).attr("rx","3px").attr("x",e.x).attr("y",e.y).attr("width",e.width).attr("height",e.height+e.headerheight).on("click",function(){d3.event.defaultPrevented||(b.showDetails(e),d(e),r(e))}),b.g.append("text").style("fill","#476bb8").attr("text-anchor","middle").attr("x",e.x+e.width/2).attr("y",e.y+e.height/2).attr("dy",".35em").attr("font-size",e.height/8+"px").text(e.name)}function m(e){b.levels[e.depth]||(b.levels[e.depth]=[]),b.levels[e.depth].push(e)}function p(){t(n),h(),b.g.attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")}function v(){b.levels[3].forEach(function(e){e.rect=f(e),b.close.push(e)}),b.preScrollLevel=1}function h(){if(b.scrollLevel=b.zoom.scale(),b.preScrollLevel!==b.scrollLevel){for(var e in b.close)if(b.close.hasOwnProperty(e)){var t=b.close[e],n=!1;if(b.preScrollLevel<b.scrollLevel)t.children?(t.children.forEach(function(e){t.headerheight*b.scrollLevel>15?(e.rect=f(e),e.draw=!0,b.close.push(e)):n=!0}),n||(t.rect.body.remove(),t.rect.text.remove(),t.draw=!1,delete b.close[e],n=!0)):(t.rect.body.remove(),t.rect.text.remove());else{var o=t.parent;o.draw?o.headerheight*b.scrollLevel<15&&(t.rect.body.remove(),t.rect.text.remove(),t.draw=!1,delete b.close[e]):o.headerheight*b.scrollLevel<15&&(t.rect.body.remove(),t.rect.text.remove(),t.draw=!1,delete b.close[e],o.rect=f(o),o.draw=!0,b.close.push(o))}}b.preScrollLevel=b.scrollLevel,d3.selectAll(".network-body").style("stroke-width",1.4/b.scrollLevel).attr("rx",3/b.scrollLevel+"px"),d3.selectAll(".network-title").style("stroke-width",1.4/b.scrollLevel).attr("rx",3/b.scrollLevel+"px"),d3.selectAll(".network-text").attr("font-size",16/b.scrollLevel+"px")}}function f(e){var t,n={},o=16/b.zoom.scale();return n.body=b.g.append("rect").style("fill","#fff").style("stroke","#949da5").style("stroke-width",1.4/b.scrollLevel).classed("network-body",!0).attr("rx",3/b.scrollLevel+"px").attr("x",e.x).attr("y",e.y).attr("width",e.width).attr("height",e.height+e.headerheight).on("click",function(){d3.event.defaultPrevented||(b.showDetails(e),d(e),r(e))}),n.text=b.g.append("text").style("fill","#476bb8").classed("network-text",!0).attr("x",e.x+e.width/2).attr("y",e.y+e.height/2).attr("text-anchor","middle").attr("dy",".35em").attr("font-size",o+"px").text(e.name).each(function(){t=this.getBBox().width}),n}function g(){b.numColumn=Math.round(Math.sqrt(b.numChildNode)),b.numColumn*b.numColumn<b.numChildNode&&b.numColumn++,b.curChildNodeColumn<b.numColumn?b.curChildNodeColumn++:(b.curChildNodeColumn=1,b.curChildNodeRow++)}var b=this;e.$watch("nv.networkData",function(e){e&&0!==Object.keys(e).length&&a(e)}),angular.element(o).bind("resize",function(){a(b.networkData)})}function t(e){$(e).on({mousewheel:function(e){"el"!=e.target.id&&(e.preventDefault(),e.stopPropagation())}})}return e.$inject=["$scope","$element","$window"],{restrict:"EA",replace:!0,scope:{networkData:"=",showDetails:"="},bindToController:!0,controller:e,controllerAs:"nv"}}angular.module("qorDash.widget.network").directive("qlNetwork",e)}(),function(){"use strict";angular.module("qorDash.widget.events",["relativeDate","ui.bootstrap"])}(),function(){"use strict";function e(e,t){var n=function(e){e.height(e.parent().parent().parent().height())};return{link:function(o,a){e(function(){n(a),o.onresize=function(){n(a)},angular.element(t).bind("resize",function(){o.onresize()})})}}}function t(e,t){e.events=[];var n=function(e,t){o(t.data);var n=angular.element("#events").parents(".qor-sheet-content")[0];n.scrollTop=n.scrollHeight
},o=function(t){e.$apply(function(){e.events.push(JSON.parse(t))})};e.removeSubscription=t.$on("eventBus:all",n),e.$on("$destroy",function(){e.removeSubscription()})}angular.module("qorDash.widget.events").directive("qlEvents",e).controller("EventsController",t),e.$inject=["$timeout","$window"],t.$inject=["$scope","$rootScope"]}(),function(){"use strict";angular.module("qorDash.widget.domain_stat",["ui.bootstrap"])}(),function(){"use strict";function e(e,t,n){var o={services:{nginx:{containers:1,cpu:4,memory:"4gb",disk:"10gb",image:"blinker/nginx:95",config:"production/v1.1",git_commit:"023dfe82a",last_update:1435565762},blinker:{containers:40,cpu:160,memory:"400gb",disk:"1000gb",image:"blinker/blinker:prod",config:"production/v1.0",git_commit:"23dfe878a",last_update:1435565762},sidekiq:{containers:20,cpu:80,memory:"200gb",disk:"500gb",image:"blinker/blinker:prod",config:"production/v1.0",git_commit:"23dfe878a",last_update:1435565762},clockwork:{containers:10,cpu:40,memory:"100gb",disk:"250gb",image:"blinker/blinker:prod",config:"production/v1.0",git_commit:"23dfe878a",last_update:1435565762},postgres:{containers:5,host:1,cpu:16,memory:"32gb",disk:"1000gb",version:"postgres 9.4",config:"",git_commit:"",last_update:1435565762},redis:{containers:1,cpu:8,memory:"100gb",disk:"250gb",image:"blinker/redis-2.8",config:"production/v1.0",git_commit:"",last_update:1435565762},memcached:{containers:4,cpu:16,memory:"400gb",disk:"250gb",image:"blinker/memcached",config:"production/v1.0",git_commit:"",last_update:1435565762}},infrastructure:{network:{vpc:1,availability_zones:3,subnets:6,security_groups:5},resources:{hosts:25,volumes:20,ip_addresses:10,load_balancers:2},containers:{all_time:7897,running:578,stopped:20,failed:4},process:{deployments:45,rollbacks:3,warnings:23,errors:4}}},a=function(t){var n=t;e.network=n.infrastructure.network,e.resources=n.infrastructure.resources,e.containers=n.infrastructure.containers,e.process=n.infrastructure.process,e.services=[];for(var o in t.services)t.services[o].name=o,e.services.push(t.services[o])};a(o),e.getRandomCardColor=function(){var e=["purple","yellow","green","blue"];return e[Math.floor(4*Math.random())]},e.putVarOrSpace=function(e){return e?e:"<br>"},e.applyFilter=function(e,t,o){return n(t)(e,o)}}angular.module("qorDash.widget.domain_stat").controller("DomainStatController",e),e.$inject=["$scope","$rootScope","$filter"]}(),function(){"use strict";angular.module("qorDash.widget.domain_details",["ui.bootstrap"])}(),function(){"use strict";function e(){return{restrict:"AE",scope:{node:"="},replace:!0,bindToController:!0,templateUrl:"app/widgets/domain_details/domain_details.html",controller:function(){},controllerAs:"vm"}}angular.module("qorDash.widget.domain_details").directive("domainDetails",e)}(),function(){"use strict";angular.module("qorDash.widget.container",[])}(),function(){"use strict";function e(e,t,n,o,a){return{restrict:"EA",link:function(o,i){function r(e){switch(e){case"hosts":return"data/container-h.json";case"services":return"data/container-s.json";default:return"data/container-az.json"}}function s(){return a.get(o.sourceJsonLink).then(function(e){o.sourceJson=e.data,$("#select-prop").text("");for(var t in e.data.selectors)$("#select-prop").append('<option value="'+e.data.selectors[t]+'">By '+e.data.selectors[t]+"</option>")})}o.$on("$destroy",function(){o.sourceJson=""}),e.d3().then(function(e){o.sourceJsonLink=r($("#select-type option:selected").val()),s(),o.heightMargin=65,o.widthMargin=10,o.$watch(function(){return angular.element(t)[0].innerWidth},function(){o.render(o.data)}),o.colors=[7964363,7964363,8421504,16498733,16777215,11776947],o.render=function(){function t(){u=d=o.sourceJson;var t=g.nodes(d).filter(function(e){return!e.children}),s=b.selectAll("g").data(t).enter().append("svg:g").attr("class","cell").attr("transform",function(e){return"translate("+e.x+","+e.y+")"}).on("click",function(e){return c(u==e.parent?d:e.parent)});s.append("svg:rect").attr("width",function(e){return e.dx-1<0?0:e.dx-1}).attr("height",function(e){return e.dy-1<0?0:e.dy-1}).style("fill",function(e){return f(e.parent.name)}),s.append("svg:text").attr("x",function(e){return e.dx/2}).attr("y",function(e){return e.dy/2}).attr("dy",".35em").attr("text-anchor","middle").style("fill","white").text(function(e){return e.name}).style("opacity",function(e){return e.w=this.getComputedTextLength(),e.dx>e.w?1:0}),e.select(window).on("click",function(){c(d)}),e.select("#select-type").on("change",function(){var t=e.select(this).property("value");o.sourceJsonLink=r(t),o.sourceJson=null,i.text(""),o.render(),c(u)}),e.select("#select-prop").on("change",function(){var t=e.select(this).property("value");switch(t){case"cpu":g.value(n).nodes(d);break;case"memory":g.value(a).nodes(d);break;case"disk":g.value(l).nodes(d)}c(u)})}function n(e){return e.cpu}function a(e){return e.memory}function l(e){return e.disk?e.disk:void 0}function c(t){var n=m/t.dx,o=p/t.dy;v.domain([t.x,t.x+t.dx]),h.domain([t.y,t.y+t.dy]);var a=b.selectAll("g.cell").transition().duration(e.event.altKey?7500:750).attr("transform",function(e){return"translate("+v(e.x)+","+h(e.y)+")"});a.select("rect").attr("width",function(e){return n*e.dx-1<0?0:n*e.dx-1}).attr("height",function(e){return o*e.dy-1<0?0:o*e.dy-1}),a.select("text").attr("x",function(e){return n*e.dx/2}).attr("y",function(e){return o*e.dy/2}).style("opacity",function(e){return n*e.dx>e.w?1:0}),u=t,e.event.stopPropagation()}console.log("call");var d,u,m=i.parent().width()-o.widthMargin,p=i.parent().parent().height()-o.heightMargin,v=e.scale.linear().range([0,m]),h=e.scale.linear().range([0,p]),f=e.scale.ordinal().range(["#7986CB","#808080","#FBC02D","#3F497F","#B3B3B3","#FFFFFF"]);0>m&&(m=0),0>p&&(p=0),o.width=i.parent().width(),o.height=p;var g=e.layout.treemap().round(!1).size([m,p]).sticky(!0).value(function(e){return e.cpu}),b=e.select(i[0]).append("div").attr("class","chart").style("width",m+"px").style("height",p+"px").append("svg:svg").attr("width",m).attr("height",p).append("svg:g").attr("transform","translate(.5,.5)");o.sourceJson?t():s().then(function(){t()})}}).then(function(){var e=function(){jQuery(i).animate({opacity:0,duration:30},function(){i.text(""),o.render(),jQuery(i).animate({opacity:1,duration:30})})};n(function(){i.parent().parent().height()-o.heightMargin!=o.height&&0!=i.height()&&0!=i.width&&e()},600)})}}}angular.module("qorDash.widget.container").directive("qlContainer",e);e.$inject=["d3","$window","$interval","$state","$http"]}(),function(){"use strict";function e(e,t,n,o){e.domains=o,1===e.domains.length&&"app.orchestrate"==t.current.name&&t.go("app.orchestrate.domain",{id:e.domains[0].id}),e.domain=e.domains.filter(function(e){return e.id==n.id})[0]}angular.module("qorDash.orchestrate").controller("OrchestrateController",e),e.$inject=["$scope","$state","$stateParams","resolvedDomains"]}(),function(){"use strict";function e(e,t){e.state("app.manage",{url:"/manage",views:{"main@":{templateUrl:"app/modules/manage/manage.html"}}}),t.config("manage",{title:"Manage",nav:7,content:'<span ui-sref="app.manage" ui-sref-opts="{reload: true}" qor-sidebar-group-heading="Manage" data-icon-class="fa fa-edit"></span>'})}angular.module("qorDash.manage",["qorDash.manage.accounts","qorDash.manage.settings","qorDash.manage.accounts.account"]).config(e),e.$inject=["$stateProvider","$qorSidebarProvider"]}(),function(){"use strict";function e(){return{dataChanged:t}}function t(e,t,o,a,i){switch(t){case"edit-value":n("edit-value",e,o,a);break;case"edit-key":n("edit-key",e,o,null,i,a);break;case"add-value":n("add-value",e,o);break;case"add-object":n("add-object",e,o,a,null,i);break;default:throw"unknown type"}}function n(e,t,n,o,a,i){var r=n.split(".");for(""===r[0]&&r.splice(0,1);r.length>1;)t=t[r.shift()];switch(e){case"edit-value":t[r.shift()]=o;break;case"edit-key":t=t[r.shift()],t[i]=t[a],delete t[a];break;case"add-value":t[r.shift()].push("");break;case"add-object":t=t[r.shift()],angular.isArray(t)?t.push(jQuery.extend(!0,{},o)):t[i]=jQuery.extend(!0,{},o);break;default:throw"unknown type"}}angular.module("qorDash.manage").factory("objectEdit",e)}(),function(){"use strict";function e(){}angular.module("qorDash.manage").controller("ManageController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(e){return e.load()}angular.module("qorDash.manage").factory("currentUser",e),e.$inject=["manageLoader"]}(),function(){"use strict";function e(e,t){var n=this;n.domains=t,1===n.domains.length&&"app.domains"==e.current.name&&e.go(".domain",{domain:n.domains[0].id})}angular.module("qorDash.domains").controller("DomainsController",e),e.$inject=["$state","resolvedDomains"]}(),function(){"use strict";function e(e,t){var n=this;n.domains=t,1===n.domains.length&&"app.docker.domains"==e.current.name&&e.go(".domain",{domain:n.domains[0].id})}angular.module("qorDash.docker").controller("DockerController",e),e.$inject=["$state","resolvedDomains"]}(),function(){"use strict";function e(e){e.state("app.deployment",{url:"/deployment",templateUrl:"app/modules/deployment/deployment.html",controller:"DeploymentController"})}angular.module("qorDash.deployment",["qorDash.widget","qorDash.widget.terminal","qorDash.widget.timeline"]).config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o){e.wsTimelineUrl=o+"/v1/ws/run/timeline1"}angular.module("qorDash.deployment").controller("DeploymentController",e),e.$inject=["$scope","$rootScope","$location","WS_URL"]}(),function(){"use strict";function e(e,t){e.state("app.dashboard",{url:"/dashboard",views:{"main@":{templateUrl:"app/modules/dashboard/dashboard.html",controller:"DashboardController"}}}),t.config("dashboard",{title:"Dashboard",nav:1,content:'<span ui-sref="app.dashboard" ui-sref-opts="{reload: true}" qor-sidebar-group-heading="Events" data-icon-class="fa fa-newspaper-o"></span>'})}angular.module("qorDash.dashboard",["qorDash.widget","qorDash.widget.terminal","qorDash.widget.timeline","qorDash.widget.events","qorDash.config"]).config(e),e.$inject=["$stateProvider","$qorSidebarProvider"]}(),function(){"use strict";function e(){}angular.module("qorDash.dashboard").controller("DashboardController",e)}(),function(){"use strict";function e(e){e.initConnection()}function t(e,t,n){function o(){n.toggleSidebar()}var a=this;a.title=e.appTitle,a.toggleSidebar=o,t.app=e}function n(e,t,n){function o(){function t(){n.$apply(function(){a.resolve(window.d3)})}var o=e[0].createElement("script");o.type="text/javascript",o.async=!0,o.src="https://cdn.rawgit.com/Neilos/bihisankey/master/bihisankey.js",o.onreadystatechange=function(){"complete"==this.readyState&&t()},o.onload=t;var i=e[0].getElementsByTagName("body")[0];i.appendChild(o)}var a=t.defer(),i=e[0].createElement("script");i.type="text/javascript",i.async=!0,i.src="http://d3js.org/d3.v3.min.js",i.onreadystatechange=function(){"complete"==this.readyState&&o()},i.onload=o;var r=e[0].getElementsByTagName("body")[0];return r.appendChild(i),{d3:function(){return a.promise}}}function o(e){return e.jQuery}angular.module("qorDash.core").controller("App",t).factory("d3",n).factory("jQuery",o).run(e),e.$inject=["eventBus"],t.$inject=["config","$scope","$qorSidebar"],n.$inject=["$document","$q","$rootScope"],o.$inject=["$window"]}(),function(){"use strict";var e=angular.module("qorDash.core"),t={name:"Infradash",title:"Infradash",version:"1.0.0",debug:!0,settings:{colors:{white:"#fff",black:"#000","gray-light":"#999","gray-lighter":"#eee",gray:"#666","gray-dark":"#343434","gray-darker":"#222","gray-semi-light":"#777","gray-semi-lighter":"#ddd","brand-primary":"#5d8fc2","brand-success":"#64bd63","brand-warning":"#f0b518","brand-danger":"#dd5826","brand-info":"#5dc4bf"},screens:{"xs-max":767,"sm-min":768,"sm-max":991,"md-min":992,"md-max":1199,"lg-min":1200},navCollapseTimeout:2500},state:{"nav-static":!1}},n=function(){this._initResizeEvent(),this._initOnScreenSizeCallbacks()};n.prototype={_resizeCallbacks:[],_screenSizeCallbacks:{xs:{enter:[],exit:[]},sm:{enter:[],exit:[]},md:{enter:[],exit:[]},lg:{enter:[],exit:[]}},isScreen:function(e){var n=window.innerWidth;return(n>=t.settings.screens[e+"-min"]||"xs"==e)&&(n<=t.settings.screens[e+"-max"]||"lg"==e)},getScreenSize:function(){var e=window.innerWidth;return e<=t.settings.screens["xs-max"]?"xs":e>=t.settings.screens["sm-min"]&&e<=t.settings.screens["sm-max"]?"sm":e>=t.settings.screens["md-min"]&&e<=t.settings.screens["md-max"]?"md":e>=t.settings.screens["lg-min"]?"lg":void 0},onScreenSize:function(e,t,n){n="undefined"!=typeof n?n:!0,this._screenSizeCallbacks[e][n?"enter":"exit"].push(t)},changeColor:function(e,t,n){var o=function(e,t){var n="0";for(e+="";e.length<t;)e=n+e;return e};e=e.replace(/^\s*|\s*$/,""),e=e.replace(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i,"#$1$1$2$2$3$3");var a=Math.round(256*t)*(n?-1:1),i=e.match(new RegExp("^rgba?\\(\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])(?:\\s*,\\s*(0|1|0?\\.\\d+))?\\s*\\)$","i")),r=i&&null!=i[4]?i[4]:null,s=i?[i[1],i[2],i[3]]:e.replace(/^#?([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])/i,function(){return parseInt(arguments[1],16)+","+parseInt(arguments[2],16)+","+parseInt(arguments[3],16)}).split(/,/);return i?"rgb"+(null!==r?"a":"")+"("+Math[n?"max":"min"](parseInt(s[0],10)+a,n?0:255)+", "+Math[n?"max":"min"](parseInt(s[1],10)+a,n?0:255)+", "+Math[n?"max":"min"](parseInt(s[2],10)+a,n?0:255)+(null!==r?", "+r:"")+")":["#",o(Math[n?"max":"min"](parseInt(s[0],10)+a,n?0:255).toString(16),2),o(Math[n?"max":"min"](parseInt(s[1],10)+a,n?0:255).toString(16),2),o(Math[n?"max":"min"](parseInt(s[2],10)+a,n?0:255).toString(16),2)].join("")},lightenColor:function(e,t){return this.changeColor(e,t,!1)},darkenColor:function(e,t){return this.changeColor(e,t,!0)},max:function(e){return Math.max.apply(null,e)},min:function(e){return Math.min.apply(null,e)},_initResizeEvent:function(){var e;$(window).on("resize",function(){clearTimeout(e),e=setTimeout(function(){$(window).trigger("sn:resize")},100)})},_initOnScreenSizeCallbacks:function(){var e,t=this,n=this.getScreenSize();$(window).resize(function(){clearTimeout(e),e=setTimeout(function(){var e=t.getScreenSize();e!=n&&(t._screenSizeCallbacks[n].exit.forEach(function(t){t(e,n)}),t._screenSizeCallbacks[e].enter.forEach(function(t){t(e,n)}),console.log("screen changed. new: "+e+", old: "+n)),n=e},100)})}},t.helpers=new n,e.value("config",t)}(),function(){"use strict";function e(e,t){var n=this;n.domains=t,1===n.domains.length&&"app.console.domains"==e.current.name&&e.go(".domain",{domain:n.domains[0].id})}angular.module("qorDash.console").controller("ConsoleController",e),e.$inject=["$state","resolvedDomains"]}(),function(){"use strict";function e(e,t){e.state("app.configurations",{url:"/configurations",resolve:{resolvedDomains:["domainService",function(e){return e.loadDomains()}]},views:{"main@":{templateUrl:"app/modules/configurations/configurations.html",controller:"ConfigurationsController"}}}),t.config("configurations",{title:"Config",nav:5,content:'<span ui-sref="app.configurations" ui-sref-opts="{reload: true}" qor-sidebar-group-heading="Config" data-icon-class="fa fa-cogs"></span>'})}angular.module("qorDash.configurations",["qorDash.configurations.services","qorDash.configurations.services.state","qorDash.configurations.services.state.files","qorDash.configurations.services.state.files.files-view","qorDash.configurations.services.state.files.files-view.diff","qorDash.configurations.services.state.instances","qorDash.configurations.services.state.instances.editor","qorDash.configurations.services.state.packages","qorDash.configurations.services.state.packages.editor"]).config(e),e.$inject=["$stateProvider","$qorSidebarProvider"]}(),function(){"use strict";function e(e,t,n,o){e.domains=o,1===e.domains.length&&"app.configurations"==t.current.name&&t.go(".services",{domain:e.domains[0].id}),e.domain=e.domains.filter(function(e){return e.id==n.domain})[0]}angular.module("qorDash.configurations").controller("ConfigurationsController",e),e.$inject=["$scope","$state","$stateParams","resolvedDomains"]}(),function(){"use strict";function e(e,t){e.state("app.compose",{url:"/compose",views:{"main@":{templateUrl:"app/modules/compose/compose.html",controller:"ComposeController"}}}).state("app.compose.sub",{url:"/sub",templateUrl:"app/modules/compose/compose-sub.html"}).state("app.compose.sub.sub",{url:"/sub",templateUrl:"app/modules/compose/compose-sub-sub.html"}).state("app.compose.sub.sub.sub",{url:"/sub",templateUrl:"app/modules/compose/compose-sub-sub-sub.html"}).state("app.compose.sub.sub.sub.sub",{url:"/sub",templateUrl:"app/modules/compose/compose-sub-sub-sub-sub.html"}),t.config("compose",{title:"Compose",nav:4,content:'<span ui-sref="app.compose" ui-sref-opts="{reload: true}" qor-sidebar-group-heading="compose" data-icon-class="fa fa-envelope"></span>'})}angular.module("qorDash.compose",[]).config(e),e.$inject=["$stateProvider","$qorSidebarProvider"]}(),function(){"use strict";function e(e){e.number=1,e.plus=function(){e.number++}}angular.module("qorDash.compose").controller("ComposeController",e),e.$inject=["$scope","$rootScope","$location"]}(),function(){"use strict";function e(e,t,n){t.interceptors.push("authInterceptor"),e.state("login",{url:"/login",templateUrl:"app/modules/auth/login.html",controller:"LoginController",controllerAs:"vm"}).state("logout",{url:"/logout",controller:["$state","user",function(e,t){t.logout(),e.go("login")}]}),n.config("logout",{title:"Logout",nav:20,content:'<span id="user-actions" ui-sref="logout" qor-sidebar-group-heading="Logout" data-icon-class="fa fa-sign-out"></span>'})}function t(e,t,n){e.$on("$stateChangeStart",function(e,o){return"login"===o.name||n.isAuthed()?void 0:(t.transitionTo("login"),void e.preventDefault())})}angular.module("qorDash.auth",["qorDash.auth.oauth","qorDash.auth.permissions"]).config(e).run(t),e.$inject=["$stateProvider","$httpProvider","$qorSidebarProvider"],t.$inject=["$rootScope","$state","user"]}(),function(){"use strict";function e(e,t,n,o){function a(){var e=n.getParsedToken();return Boolean(e&&Math.round((new Date).getTime()/1e3)<=e.exp)}function i(a,i){var r={username:a,password:i};return e.post(t+"/auth",r).then(n.saveToken).then(o.save)}function r(){n.removeToken(),o.clear()}return{isAuthed:a,logout:r,login:i}}angular.module("qorDash.auth").service("user",e),e.$inject=["$http","AUTH_API_URL","auth","permissions"]}(),function(){"use strict";function e(e,t,n){function o(){s.isLoading=!0,t.login(s.userCredentials.login,s.userCredentials.password).then(a)["catch"](i)["finally"](function(){s.isLoading=!1})}function a(){e.go("app.dashboard")}function i(e){var t=e&&e.data&&e.data.error?e.data.error:"unknown";s.loginForm.$setValidity(t,!1)}function r(){if(s.loginForm.$invalid&&s.loginForm.$submitted){s.loginForm.$setPristine(),s.loginForm.$setUntouched();for(var e in s.loginForm.$error)s.loginForm.$setValidity(e,!0)}}var s=this;return s.login=o,s.removeError=r,s.successCallback=a,s.isLoading=!1,s.ICON_URL=n,s.userCredentials={},t.isAuthed()?void e.go("app.dashboard"):void 0}angular.module("qorDash.auth").controller("LoginController",e),e.$inject=["$state","user","LOGIN_PAGE_ICON_URL"]}(),function(){"use strict";function e(e,t){function n(n){return n.data&&n.data.token&&(e.localStorage[r.tokenKey]=n.data.token),t.when(n)}function o(){return e.localStorage[r.tokenKey]}function a(){e.localStorage.removeItem(r.tokenKey)}function i(){var t=o();if(!t)return!1;var n=t.split(".")[1],a=n.replace("-","+").replace("_","/");return JSON.parse(e.atob(a))}var r=this;return r.tokenKey="authToken",{saveToken:n,getToken:o,removeToken:a,getParsedToken:i}}angular.module("qorDash.auth").service("auth",e),e.$inject=["$window","$q"]}(),function(){"use strict";function e(e){function t(t){var n=e.getToken();return n&&!t.headers.Authorization&&(t.headers.Authorization="Bearer "+n),t.headers.Accept="application/json",t}function n(e){return e}return{request:t,response:n}}angular.module("qorDash.auth").factory("authInterceptor",e),e.$inject=["auth"]}(),function(){"use strict";function e(e){e.defaults.headers.post["Content-Type"]="application/json"}function t(e,t){e.$on("$stateChangeError",function(e,n,o,a,i,r){t.showError(r)})}angular.module("qorDash",["ui.router","ui.layout","chart.js","ngMessages","ngAnimate","ngSanitize","qorDash.config","qorDash.api","qorDash.core","qorDash.auth","qorDash.dashboard","qorDash.domains","qorDash.compose","qorDash.configurations","qorDash.orchestrate","qorDash.manage","qorDash.docker","qorDash.console"]).config(e).run(t),e.$inject=["$httpProvider","$stateProvider"],t.$inject=["$rootScope","errorHandler"],angular.element(document).ready(function(){angular.bootstrap(document,["qorDash"])})}(),angular.module("qorDash").run(["$templateCache",function(e){e.put("app/modules/auth/login.html",'<div class="container center-vertical"><main id="content" role="main"><div class="row"><div class="col-lg-4 col-sm-6 col-xs-10 col-lg-offset-4 col-sm-offset-3 col-xs-offset-1"><section class="widget widget-login animated fadeInUp"><header><img src="{{vm.ICON_URL}}" class="login-logo" width="250"></header><div class="widget-body"><form class="login-form mt-lg" name="vm.loginForm" ng-submit="vm.login()"><ng-messages for="vm.loginForm.$error" role="alert"><p ng-message="error-account-not-found" class="error-message">Account not found</p><p ng-message="error-bad-credentials" class="error-message">Bad credentials</p><p ng-message="unknown" class="error-message">Unknown server error</p></ng-messages><div class="form-group has-feedback" ng-class="{\'has-error\' : vm.loginForm.$invalid && vm.loginForm.$submitted}"><input type="text" class="form-control" name="username" ng-model="vm.userCredentials.login" ng-keyup="vm.removeError()" placeholder="Username" required="required"> <span class="glyphicon glyphicon-user form-control-feedback"></span></div><div class="form-group has-feedback small-margin" ng-class="{\'has-error\' : vm.loginForm.$invalid && vm.loginForm.$submitted}"><input type="password" class="form-control" name="password" ng-model="vm.userCredentials.password" ng-keyup="vm.removeError()" placeholder="Password" required="required"> <span class="glyphicon glyphicon-lock form-control-feedback"></span></div><div class="clearfix"><div class="login-toolbar pull-right"><button type="submit" class="btn btn-inverse btn-sm btn-login" ng-disabled="vm.isLoading"><span ng-hide="vm.isLoading">Log In</span> <span ng-show="vm.isLoading">Loading...</span></button><oauth-signin-button on-success="vm.successCallback" provider="google"></oauth-signin-button><oauth-signin-button on-success="vm.successCallback" provider="github"></oauth-signin-button></div></div><div class="row widget-login-footer"><div class="col-sm-6 col-sm-push-6"><div class="clearfix"><div class="checkbox widget-login-info pull-right ml-n-lg"><input type="checkbox" id="checkbox1" value="1"> <label for="checkbox1">Keep me signed in</label></div></div></div><div class="col-sm-6 col-sm-pull-6"><a class="mr-n-lg login-trouble" href="#">Trouble with account?</a></div></div></form></div><div class="login-page-footer text-center">2015 &copy; {{app.title}}</div></section></div></div></main></div>'),e.put("app/modules/compose/compose-sub-sub-sub-sub.html",'<section horizontal-ui-sheet=""><header horizontal-ui-sheet-header="" title="Compose sub test"></header><div horizontal-ui-sheet-content=""><p>Compose sub page to test nested navigation</p></div></section>'),e.put("app/modules/compose/compose-sub-sub-sub.html",'<section horizontal-ui-sheet=""><header horizontal-ui-sheet-header="" title="Compose sub test"></header><div horizontal-ui-sheet-content=""><p>Compose sub page to test nested navigation</p><a ui-sref="app.compose.sub.sub.sub.sub">Test nested navigation</a></div></section>'),e.put("app/modules/compose/compose-sub-sub.html",'<section horizontal-ui-sheet=""><header horizontal-ui-sheet-header="" title="Compose sub test"></header><div horizontal-ui-sheet-content=""><p>Compose sub page to test nested navigation</p><a ui-sref="app.compose.sub.sub.sub">Test nested navigation</a></div></section>'),e.put("app/modules/compose/compose-sub.html",'<section horizontal-ui-sheet=""><header horizontal-ui-sheet-header="" title="Compose sub test"></header><div horizontal-ui-sheet-content=""><p>Compose sub page to test nested navigation</p><a ui-sref="app.compose.sub.sub">Test nested navigation</a></div></section>'),e.put("app/modules/compose/compose.html",'<section horizontal-ui-sheet="" class="qor-sheet-full"><div horizontal-ui-sheet-content=""><h1 class="page-title">Compose</h1><a ui-sref="app.compose.sub">Test nested navigation</a></div></section>'),e.put("app/modules/configurations/configurations.html",'<section horizontal-ui-sheet="" class="qor-sheet-s"><header horizontal-ui-sheet-header="" title="Domain Class"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope"><a class="list-group-item" ng-repeat="domain in domains | orderBy:\'\'" ui-sref-active="active" ui-sref=".services({domain : domain.id})">{{domain.name}}</a></div></div></section>'),e.put("app/modules/console/console.html",'<section horizontal-ui-sheet="" class="qor-sheet-s"><header horizontal-ui-sheet-header="" title="Console"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope"><a class="list-group-item" ng-repeat="domain in vm.domains | orderBy:\'\'" ui-sref-active="active" ui-sref=".domain({domain : domain.id})">{{domain.name}}</a></div></div></section>'),e.put("app/modules/core/app.html",'<div class="qor-app" qor-sidebar-container=""><header class="qor-header"><a class="qor-sidebar-toggle" ng-click="vm.toggleSidebar()"><i class="fa fa-bars"></i></a> <span class="qor-header-userinfo pull-right">{{vm.title}}</span></header><nav qor-sidebar=""></nav><main horizontal-ui-view="main" horizontal-scroll="" class="shuffle-animation" qor-content=""></main></div>'),e.put("app/modules/dashboard/dashboard.html",'<section horizontal-ui-sheet="" class="qor-sheet-full"><div horizontal-ui-sheet-content=""><div class="widget-container"><div ql-widget="Events"></div></div></div></section>'),e.put("app/modules/docker/docker.html",'<section horizontal-ui-sheet="" class="qor-sheet-s"><header horizontal-ui-sheet-header="" title="Docker"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope"><a class="list-group-item" ng-repeat="domain in vm.domains | orderBy:\'\'" ui-sref-active="active" ui-sref=".domain({domain : domain.id})">{{domain.name}}</a></div></div></section>'),e.put("app/modules/domains/domains.html",'<section horizontal-ui-sheet="" class="qor-sheet-s"><header horizontal-ui-sheet-header="" title="Domains"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope"><a class="list-group-item" ng-repeat="domain in vm.domains | orderBy:\'\'" ui-sref-active="active" ui-sref=".domain({domain : domain.id})">{{domain.name}}</a></div></div></section>'),e.put("app/modules/manage/manage.html",'<section horizontal-ui-sheet="" class="qor-sheet-s"><header horizontal-ui-sheet-header="" title="Manage"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope"><a class="list-group-item" ui-sref-active="active" ui-sref="app.manage.accounts">Accounts</a> <a class="list-group-item" ui-sref-active="active" ui-sref="app.manage.settings">Settings</a></div></div></section>'),e.put("app/modules/orchestrate/orchestrate.html",'<section horizontal-ui-sheet="" class="qor-sheet-half"><header horizontal-ui-sheet-header="" title="Domains"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope"><a class="list-group-item" ng-repeat="domain in domains | orderBy:\'\'" ui-sref-active="active" ui-sref="app.orchestrate.domain({id : domain.id})">{{domain.name}}</a></div></div></section>'),e.put("app/widgets/container/container.html",'<div class="container-select"><select id="select-type"><option value="hosts">By Hosts</option><option value="services">By Services</option><option value="az">By AZ</option></select></div><div class="container-select"><select id="select-prop"></select></div><ql-container class="container-view"></ql-container>'),e.put("app/widgets/domain_details/domain_details.html",'<div class="well" ng-if="vm.node.logs"><div class="btn-group" dropdown="" dropdown-append-to-body=""><button type="button" class="btn btn-primary dropdown-toggle" dropdown-toggle="">Logs <span class="caret"></span></button><ul class="dropdown-menu" role="menu"><li ng-repeat="log in vm.node.logs"><a ui-sref="app.domains.domain.env.network.node.logs">{{log}}</a></li></ul></div></div>'),e.put("app/widgets/domain_stat/domain_stat.html",'<div ng-controller="DomainStatController"><div class="row domain-stat domain-stat-details"><div class="col-md-4 col-sm-6" ng-repeat="service in services"><section class="widget widget-stat-details purple"><div class="widget-caption purple">{{service.name}}</div><div class="row"><div class="col-md-3 widget-stat-little-block no-left-border"><h3>{{service.containers}}</h3><p class="text-muted">container</p></div><div class="col-md-3 widget-stat-little-block"><h3>{{service.cpu}}</h3><p class="text-muted">cpu</p></div><div class="col-md-3 widget-stat-little-block"><h3>{{service.memory}}</h3><p class="text-muted">memory</p></div><div class="col-md-3 widget-stat-little-block"><h3>{{service.disk}}</h3><p class="text-muted">disk</p></div></div><div class="row widget-stat-other-details"><div class="col-md-3 right-text"><p class="text-muted">image</p><p class="text-muted">config</p><p class="text-muted">git_commit</p><p class="text-muted">last_update</p></div><div class="col-md-9"><p class="b" ng-bind-html="putVarOrSpace(service.image)"></p><p class="b" ng-bind-html="putVarOrSpace(service.config)"></p><p class="b" ng-bind-html="putVarOrSpace(service.git_commit)"></p><p class="b" ng-bind-html="putVarOrSpace(applyFilter(service.last_update * 1000, \'date\', \'yyyy-MM-dd HH:mm:ss\'))"></p></div></div></section></div></div></div>'),e.put("app/widgets/events/events.html",'<div id="events" ng-controller="EventsController"><ul class="timeline" style="padding: 10px 0 0 0; margin-bottom: 0px;" ng-show="events.length>0"><li class="on-left" ng-repeat="event in events" id="{{::event.id | limitTo:7}}"><time class="event-time" datetime="{{::event.timestamp}}"><span class="date">{{::event.timestamp * 1000 | date: \'EEE\'}}</span> <span class="time">{{::event.timestamp * 1000 | date: \'shortTime\'}}</span></time><section class="event event-padding" ng-class="{\'fatal\' : event.status == \'fatal\', \'warning\' : event.status == \'warning\'}"><h4 class="event-heading"><a ng-click="showDetails(event)">{{event.title}}</a></h4><p class="fs-sm text-muted">{{::event.timestamp * 1000 | date:\'EEEE, MMMM d, y HH:mm:ss\'}}</p><p class="fs-mini">{{::event.description}}</p></section></li></ul></div>'),e.put("app/widgets/network/network.html",'<div ql-network="" class="network"></div>'),e.put("app/widgets/timeline/timeline.html",'<div id="timeline" ql-time-line=""><ul class="timeline" style="padding: 10px; margin-bottom: 0px;" ng-controller="TimelineController"><li class="on-left" ng-repeat="event in events" id="{{::event.id | limitTo:7}}"><time class="event-time" datetime="{{::event.timestamp}}"><span class="date">{{::event.timestamp * 1000 | date: \'EEE\'}}</span> <span class="time">{{::event.timestamp * 1000 | date: \'shortTime\'}}</span></time><section class="event"><h4 class="event-heading"><a ng-click="showDetails(event)">{{event.title}}</a></h4><p class="fs-sm text-muted">{{::event.timestamp * 1000 | date:\'EEEE, MMMM d, y HH:mm:ss\'}}</p><p class="fs-mini">{{::event.text}}</p><footer><ul class="post-links"><li><a href="#" data-original="{{::event.timestamp}}">{{::event.timestamp * 1000 | relativeDate }}</a></li><a class="details-link" style="visibility: hidden;" ng-click="showDetails(event)"><img src="assets/images/collapse-button.png" height="20px" width="20px"></a></ul><div collapse="event.isInfoCollapsed"><div class="terminal-wrapper mt-sm"><div></div></div></div></footer></section></li></ul></div>'),e.put("app/widgets/traffic/traffic.html",'<ql-traffic class="network" bar-height="20" bar-padding="5"></ql-traffic>'),e.put("app/modules/auth/oauth/oauth-signin-button.html",'<a class="btn btn-block btn-social btn-google btn-default btn-sm btn-signup g-signin2"><i ng-class="provider.iconClass"></i>Sign in with {{provider.name}}</a>'),e.put("app/modules/configurations/services/services.html",'<section horizontal-ui-sheet="" class="qor-sheet-s"><header horizontal-ui-sheet-header="" title="Services"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope"><a class="list-group-item" ng-repeat="service in vm.services | orderBy:\'\'" ui-sref-active="active" ui-sref=".state({service: service})">{{service}}</a></div></div></section>'),e.put("app/modules/console/consoles/consoles.html",'<section horizontal-ui-sheet="" class="qor-sheet-s"><header horizontal-ui-sheet-header="" title="{{vm.service}}"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope"><a class="list-group-item" ng-repeat="console in vm.consoles | orderBy:\'\'" ui-sref-active="active" ui-sref=".terminal({terminalId: console})">{{console}}</a></div></div></section>'),e.put("app/modules/console/domain/domain.html",'<section horizontal-ui-sheet="" class="qor-sheet-s"><header horizontal-ui-sheet-header="" title="{{vm.domain.name}}"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope"><a class="list-group-item" ng-repeat="instance in vm.domain.instances | orderBy:\'\'" ui-sref-active="active" ui-sref=".services({instance : instance})">{{instance}}</a></div></div></section>'),e.put("app/modules/console/services/services.html",'<section horizontal-ui-sheet="" class="qor-sheet-s"><header horizontal-ui-sheet-header="" title="{{vm.instance}}"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope"><a class="list-group-item" ng-repeat="(service, consoles) in vm.services | orderBy:\'\'" ui-sref-active="active" ui-sref=".consoles({service: service})">{{service}}</a></div></div></section>'),e.put("app/modules/console/terminal/service-terminal.html",'<section horizontal-ui-sheet="" class="qor-sheet-fill"><header horizontal-ui-sheet-header="" title="{{vm.terminalId}}"></header><div horizontal-ui-sheet-content=""><div id="service_terminal" ql-terminal="" ws-url="{{vm.wsUrl}}"></div></div></section>'),e.put("app/modules/core/nested-table/nested-table.html",'<div><table><tbody><tr data-ng-repeat="(key, value) in vm.data track by $index" ng-show="vm.isVisible(vm.parentKey + \'.\' + key)" class="animate-show"><td class="white-bg" ng-if="!vm.isArray(vm.data)"><div class="td-container"><div edit-disabled="!vm.isEditable(vm.parentKey)" editable-text="key" onbeforesave="vm.updateData(vm.parentKey, $data, key, \'key\')" buttons="no">{{key}}</div><i class="fa table-angle" ng-class="{\'fa-angle-right\': !vm.getDisplayState(vm.parentKey + \'.\' + key), \'fa-angle-left\': vm.getDisplayState(vm.parentKey + \'.\' + key)}" ng-click="vm.changeDisplayState(vm.parentKey + \'.\' + key)" ng-if="vm.isObject(value)"></i></div></td><td class="white-bg value-td" ng-if="!vm.isObject(value)" editable-text="value" onbeforesave="vm.updateData(vm.parentKey + \'.\' + key, $data)" buttons="no">{{value}}</td><td ng-if="vm.isObject(value)" colspan="100"><nested-table display-options="vm.displayOptions" onchange="vm.onchange" object-name="vm.objectName" parent-key="(vm.parentKey + \'.\' + key)" config="vm.config" data="value"></nested-table></td></tr><tr ng-show="(vm.isArray(vm.data) || vm.isPlusAvailable(vm.parentKey)) && vm.isVisible(vm.parentKey + \'.\' + key)"><td class="white-bg td-plus" ng-click="vm.addElement(vm.parentKey)">+</td></tr></tbody></table></div>'),e.put("app/modules/docker/container/container.html",'<section horizontal-ui-sheet="" class="qor-sheet-half"><header horizontal-ui-sheet-header="" title="{{vm.container.Name}}"></header><div horizontal-ui-sheet-content=""><div class="detail container-details"><div ng-if="!vm.container.edit" class="name"><h4>Container: {{ vm.container.Name }} <button class="btn btn-primary" ng-click="vm.container.edit = true;">Rename</button></h4></div><div ng-if="vm.container.edit" id="name-edit"><h4>Container: <input type="text" ng-model="vm.container.newContainerName"> <button class="btn btn-success" ng-click="vm.rename()">Save</button> <button class="btn btn-danger" ng-click="vm.container.edit = false;">&times;</button></h4></div><div class="btn-group detail" id="actions"><button class="btn btn-success" ng-click="vm.start()" ng-show="!vm.container.State.Running">Start</button> <button class="btn btn-warning" ng-click="vm.stop()" ng-show="vm.container.State.Running && !vm.container.State.Paused">Stop</button> <button class="btn btn-danger" ng-click="kill()" has-permission="kill" ng-show="vm.container.State.Running && !vm.container.State.Paused">Kill</button> <button class="btn btn-info" ng-click="vm.pause()" ng-show="vm.container.State.Running && !vm.container.State.Paused">Pause</button> <button class="btn btn-success" ng-click="vm.unpause()" ng-show="vm.container.State.Running && vm.container.State.Paused">Unpause</button> <button class="btn btn-success" ng-click="vm.restart()" ng-show="vm.container.State.Running && !vm.container.State.Stopped">Restart</button> <button class="btn btn-primary" ng-click="vm.commit()" ng-show="vm.container.State.Running && !vm.container.State.Paused">Commit</button></div><table class="table"><tbody><tr><td>Created:</td><td>{{ vm.container.Created }}</td></tr><tr><td>Path:</td><td>{{ vm.container.Path }}</td></tr><tr><td>Args:</td><td>{{ vm.container.Args }}</td></tr><tr><td>Exposed Ports:</td><td><ul style="display: inline-table"><li ng-repeat="(k, v) in vm.container.Config.ExposedPorts">{{ k }}</li></ul></td></tr><tr><td>Environment:</td><td><ul style="display: inline-table"><li ng-repeat="k in vm.container.Config.Env">{{ k }}</li></ul></td></tr><tr><td>Publish All:</td><td>{{ vm.container.HostConfig.PublishAllPorts }}</td></tr><tr><td>Ports:</td><td><ul style="display:inline-table"><li ng-repeat="(containerport, hostports) in vm.container.HostConfig.PortBindings">{{ containerport }} => <span class="label label-default" ng-repeat="(k,v) in hostports">{{ v.HostIp }}:{{ v.HostPort }}</span></li></ul></td></tr><tr><td>Hostname:</td><td>{{ vm.container.Config.Hostname }}</td></tr><tr><td>IPAddress:</td><td>{{ vm.container.NetworkSettings.IPAddress }}</td></tr><tr><td>Cmd:</td><td>{{ vm.container.Config.Cmd }}</td></tr><tr><td>Entrypoint:</td><td>{{ vm.container.Config.Entrypoint }}</td></tr><tr><td>Volumes:</td><td>{{ vm.container.Volumes }}</td></tr><tr><td>SysInitpath:</td><td>{{ vm.container.SysInitPath }}</td></tr><tr><td>Image:</td><td><a ui-sref="^.^.images.image({imageId: vm.container.Image})">{{ vm.container.Image }}</a></td></tr><tr><td>State:</td><td><span class="label {{ vm.container.State|getstatelabel }}">{{ vm.container.State|getstatetext }}</span></td></tr><tr><td>Logs:</td><td><a ui-sref=".logs">stdout/stderr</a></td></tr><tr><td>Stats:</td><td><a ui-sref=".stats">stats</a></td></tr><tr><td>Top:</td><td><a ui-sref=".top">Top</a></td></tr></tbody></table><div class="changes-container"><div>Changes: <i class="icon-refresh" style="width:32px;height:32px;" ng-click="vm.getChanges()"></i></div><div><ul><li ng-repeat="change in vm.changes | filter:vm.hasContent"><strong>{{ change.Path }}</strong> {{ change.Kind }}</li></ul></div></div><button class="btn btn-remove-container" ng-click="vm.remove()">Remove Container</button></div></div></section>'),e.put("app/modules/docker/container.logs/logs.html",'<section horizontal-ui-sheet="" class="qor-sheet-half"><header horizontal-ui-sheet-header="" title="Logs"></header><div horizontal-ui-sheet-content=""><div class="logs"><div class="docker-logs-left"><h4 class="display-inline">Logs for container: <a ui-sref="^.^.container({containerId: vm.container.Id})">{{ vm.container.Name }}</a></h4><div class="btn-group detail log-btns"><button class="btn btn-info" ng-click="vm.scrollTo(\'stdout\')">vm.stdout</button> <button class="btn btn-primary" ng-click="vm.scrollTo(\'stderr\')">vm.stderr</button></div></div><div class="reload-logs pull-right"><div><a class="btn btn-warning" ng-click="vm.toggleTail()" role="button">Reload logs</a> <input id="tailLines" type="number" ng-model="vm.tailLines" ng-keypress="($event.which === 13)? vm.toggleTail() : 0"> <label for="tailLines">lines</label> <input class="new-checkbox bordered" id="timestampToggle" ng-model="vm.showTimestamps" ng-change="vm.toggleTimestamps()" type="checkbox"><label for="timestampToggle"></label>Timestamp</div></div><div class="col-xs-12"><div class="panel panel-default logs-panel"><div class="panel-heading"><h3 id="stdout" class="panel-title">STDOUT</h3></div><div class="panel-body"><pre class="pre-scrollable pre-x-scrollable">{{vm.stdout}}</pre></div></div></div><div class="col-xs-12"><div class="panel panel-default logs-panel"><div class="panel-heading"><h3 id="stderr" class="panel-title">STDERR</h3></div><div class="panel-body"><pre class="pre-scrollable pre-x-scrollable">{{vm.stderr}}</pre></div></div></div></div></div></section>'),e.put("app/modules/docker/container.stats/stats.html",'<section horizontal-ui-sheet="" class="qor-sheet-half"><header horizontal-ui-sheet-header="" title="Stats"></header><div horizontal-ui-sheet-content=""><div class="row"><div class="col-xs-12"><h2>CPU</h2><div class="row"><div class="col-sm-7"><canvas class="chart chart-line" chart-colours="vm.cpuStyles" chart-options="vm.chartOtions" chart-data="vm.cpuData" chart-labels="vm.cpuLabels"></canvas></div></div><h2>Memory</h2><div class="row"><div class="col-sm-7"><canvas class="chart chart-line" chart-colours="vm.memoryStyles" chart-options="vm.memoryChartOptions" chart-data="vm.memoryData" chart-labels="vm.memoryLabels"></canvas></div><div class="col-sm-offset-1 col-sm-4"><table class="table"><tr><td>Max usage</td><td>{{ (vm.data.memory_stats.max_usage || 0) | humansize }}</td></tr><tr><td>Limit</td><td>{{ (vm.data.memory_stats.limit || 0) | humansize }}</td></tr><tr><td>Fail count</td><td>{{ vm.data.memory_stats.failcnt }}</td></tr></table><accordion><accordion-group heading="Other stats"><table class="table"><tr ng-repeat="(key, value) in vm.data.memory_stats.stats"><td>{{ key }}</td><td>{{ value }}</td></tr></table></accordion-group></accordion></div></div><h1>Network</h1><div class="row"><div class="col-sm-7"><canvas class="chart chart-line" chart-legend="true" chart-series="vm.networkLegendData" chart-colours="vm.networkStyles" chart-options="vm.networkChartOptions" chart-data="vm.networkData" chart-labels="vm.networkLabels"></canvas></div><div class="col-sm-offset-1 col-sm-4"><accordion><accordion-group heading="Other stats"><table class="table"><tr ng-repeat="(key, value) in vm.data.network"><td>{{ key }}</td><td>{{ value }}</td></tr></table></accordion-group></accordion></div></div></div></div></div></section>'),e.put("app/modules/docker/container.top/top.html",'<section horizontal-ui-sheet="" class="qor-sheet-half"><header horizontal-ui-sheet-header="" title="Top"></header><div horizontal-ui-sheet-content=""><div class="containerTop"><div class="form-group col-xs-2"><input type="text" class="form-control" placeholder="[options] (aux)" ng-model="vm.ps_args"></div><button type="button" class="btn qor-btn-primary" ng-click="vm.getTop()">Submit</button><table class="table table-striped"><thead><tr><th ng-repeat="title in vm.containerTop.Titles">{{title}}</th></tr></thead><tbody><tr ng-repeat="processInfos in vm.containerTop.Processes"><td ng-repeat="processInfo in processInfos track by $index">{{processInfo}}</td></tr></tbody></table></div></div></section>'),e.put("app/modules/docker/containers/containers.html",'<section horizontal-ui-sheet="" class="qor-sheet-half"><header horizontal-ui-sheet-header="" title="Containers"></header><div horizontal-ui-sheet-content=""><h3 class="config-table-header">Containers</h3><div class="btn-group pull-left"><div dropdown="" dropdown-append-to-body="" class="dropdown"><button class="btn btn-default config-table-header-button" dropdown-toggle="" aria-haspopup="true" aria-expanded="false">Action<span class="fa fa-angle-down pull-right"></span></button><ul class="dropdown-menu"><li><a ng-click="vm.startAction()">Start</a></li><li><a ng-click="vm.stopAction()">Stop</a></li><li><a ng-click="vm.restartAction()">Restart</a></li><li has-permission="kill"><a ng-click="vm.killAction()">Kill</a></li><li><a ng-click="vm.pauseAction()">Pause</a></li><li><a ng-click="vm.unpauseAction()">Unpause</a></li><li><a ng-click="vm.removeAction()">Remove</a></li></ul></div></div><div class="text-right containers-form"><input class="new-checkbox bordered" type="checkbox" ng-model="vm.displayAll" id="displayAll" ng-change="vm.toggleGetAll()"><label for="displayAll"></label><p>Display All</p><input type="text" class="form-control" id="filter" placeholder="Filter" ng-model="vm.filter"> <label class="sr-only" for="filter">Filter</label></div><table class="table containers-table"><thead><tr><th><input class="new-checkbox bordered" id="header-checkbox" ng-model="vm.toggle" ng-change="vm.toggleSelectAll()" type="checkbox"><label for="header-checkbox"></label> ACTION</th><th>NAME</th><th>IMAGE</th><th>COMMAND</th><th>CREATED</th><th>STATUS</th></tr></thead><tbody><tr ng-repeat="container in vm.containers | filter:vm.filter | orderBy:vm.predicate"><td class="center-text"><input class="new-checkbox bordered" id="check-{{container.Id}}" ng-model="container.Checked" type="checkbox"><label for="check-{{container.Id}}"></label></td><td><a ui-sref=".container({containerId: container.Id})">{{ container|containername}}</a></td><td><a ui-sref="^.images.image({imageId: container.Image})">{{ container.Image }}</a></td><td>{{ container.Command|truncate:40 }}</td><td>{{ container.Created|getdate }}</td><td><span class="label label-{{ container.Status|statusbadge }}">{{ container.Status }}</span></td></tr></tbody></table></div></section>'),e.put("app/modules/docker/dockers/dockers.html",'<section horizontal-ui-sheet="" class="qor-sheet-s"><header horizontal-ui-sheet-header="" title="{{vm.instance}}"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope"><a class="list-group-item" ng-repeat="(host, docker) in vm.dockers | orderBy:\'\'" ui-sref-active="active" ui-sref=".menu({dockerId: host})">{{host}}</a></div></div></section>'),e.put("app/modules/docker/domain/domain.html",'<section horizontal-ui-sheet="" class="qor-sheet-s"><header horizontal-ui-sheet-header="" title="{{vm.domain.name}}"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope"><a class="list-group-item" ng-repeat="instance in vm.domain.instances | orderBy:\'\'" ui-sref-active="active" ui-sref=".dockers({instance : instance})">{{instance}}</a></div></div></section>'),e.put("app/modules/docker/image/create-modal.html",'<div class="modal-header"><button type="button" class="close" ng-click="close()" data-dismiss="modal" aria-hidden="true">&times;</button><h3>Create And Start Container From Image</h3></div><div class="modal-body"><form role="form"><accordion close-others="true"><accordion-group heading="Container options" is-open="menuStatus.containerOpen"><fieldset><div class="row"><div class="col-xs-6"><div class="form-group"><label>Cmd:</label> <input type="text" placeholder=\'["/bin/echo", "Hello world"]\' ng-model="config.Cmd" class="form-control"> <small>Input commands as a raw string or JSON array</small></div><div class="form-group"><label>Entrypoint:</label> <input type="text" ng-model="config.Entrypoint" class="form-control" placeholder="./entrypoint.sh"></div><div class="form-group"><label>Name:</label> <input type="text" ng-model="config.name" class="form-control"></div><div class="form-group"><label>Hostname:</label> <input type="text" ng-model="config.Hostname" class="form-control"></div><div class="form-group"><label>Domainname:</label> <input type="text" ng-model="config.Domainname" class="form-control"></div><div class="form-group"><label>User:</label> <input type="text" ng-model="config.User" class="form-control"></div><div class="form-group"><label>Memory:</label> <input type="number" ng-model="config.Memory" class="form-control"></div><div class="form-group"><label>Volumes:</label><div ng-repeat="volume in config.Volumes"><div class="form-group form-inline"><input type="text" ng-model="volume.name" class="form-control" placeholder="/var/data"> <button type="button" class="btn btn-danger btn-sm" ng-click="rmEntry(config.Volumes, volume)">x</button></div></div><button type="button" class="btn btn-success btn-sm" ng-click="addEntry(config.Volumes, {name: \'\'})">Add Volume</button></div></div><div class="col-xs-6"><div class="form-group"><label>MemorySwap:</label> <input type="number" ng-model="config.MemorySwap" class="form-control"></div><div class="form-group"><label>CpuShares:</label> <input type="number" ng-model="config.CpuShares" class="form-control"></div><div class="form-group"><label>Cpuset:</label> <input type="text" ng-model="config.Cpuset" class="form-control" placeholder="1,2"> <small>Input as comma-separated list of numbers</small></div><div class="form-group"><label>WorkingDir:</label> <input type="text" ng-model="config.WorkingDir" class="form-control" placeholder="/app"></div><div class="form-group"><label>MacAddress:</label> <input type="text" ng-model="config.MacAddress" class="form-control" placeholder="12:34:56:78:9a:bc"></div><div class="form-group"><label for="networkDisabled">NetworkDisabled:</label> <input class="new-checkbox bordered" id="networkDisabled" ng-model="config.NetworkDisabled" type="checkbox"><label for="networkDisabled"></label></div><div class="form-group"><label for="tty">Tty:</label> <input class="new-checkbox bordered" id="tty" ng-model="config.Tty" type="checkbox"><label for="tty"></label></div><div class="form-group"><label for="openStdin">OpenStdin:</label> <input class="new-checkbox bordered" id="openStdin" ng-model="config.OpenStdin" type="checkbox"><label for="openStdin"></label></div><div class="form-group"><label for="stdinOnce">StdinOnce:</label> <input class="new-checkbox bordered" id="stdinOnce" ng-model="config.StdinOnce" type="checkbox"><label for="stdinOnce"></label></div><div class="form-group"><label>SecurityOpts:</label><div ng-repeat="opt in config.SecurityOpts"><div class="form-group form-inline"><input type="text" ng-model="opt.name" class="form-control" placeholder="label:type:svirt_apache"> <button type="button" class="btn btn-danger btn-sm" ng-click="rmEntry(config.SecurityOpts, opt)">x</button></div></div><button type="button" class="btn btn-success btn-sm" ng-click="addEntry(config.SecurityOpts, {name: \'\'})">Add Option</button></div></div></div><hr><div class="form-group"><label>Env:</label><div ng-repeat="envar in config.Env"><div class="form-group form-inline"><div class="form-group"><label class="sr-only">Variable Name:</label> <input type="text" ng-model="envar.name" class="form-control" placeholder="NAME"></div><div class="form-group"><label class="sr-only">Variable Value:</label> <input type="text" ng-model="envar.value" class="form-control" placeholder="value"></div><div class="form-group"><button class="btn btn-danger btn-xs form-control" ng-click="rmEntry(config.Env, envar)">x</button></div></div></div><button type="button" class="btn btn-success btn-sm" ng-click="addEntry(config.Env, {name: \'\', value: \'\'})">Add environment variable</button></div></fieldset></accordion-group><accordion-group heading="HostConfig options" is-open="menuStatus.hostConfigOpen"><fieldset><div class="row"><div class="col-xs-6"><div class="form-group"><label>Binds:</label><div ng-repeat="bind in config.HostConfig.Binds"><div class="form-group form-inline"><input type="text" ng-model="bind.name" class="form-control" placeholder="/host:/container"> <button type="button" class="btn btn-danger btn-sm" ng-click="rmEntry(config.HostConfig.Binds, bind)">x</button></div></div><button type="button" class="btn btn-success btn-sm" ng-click="addEntry(config.HostConfig.Binds, {name: \'\'})">Add Bind</button></div><div class="form-group"><label>Links:</label><div ng-repeat="link in config.HostConfig.Links"><div class="form-group form-inline"><input type="text" ng-model="link.name" class="form-control" placeholder="web:db"> <button type="button" class="btn btn-danger btn-sm" ng-click="rmEntry(config.HostConfig.Links, link)">x</button></div></div><button type="button" class="btn btn-success btn-sm" ng-click="addEntry(config.HostConfig.Links, {name: \'\'})">Add Link</button></div><div class="form-group"><label>Dns:</label><div ng-repeat="entry in config.HostConfig.Dns"><div class="form-group form-inline"><input type="text" ng-model="entry.name" class="form-control" placeholder="8.8.8.8"> <button type="button" class="btn btn-danger btn-sm" ng-click="rmEntry(config.HostConfig.Dns, entry)">x</button></div></div><button type="button" class="btn btn-success btn-sm" ng-click="addEntry(config.HostConfig.Dns, {name: \'\'})">Add entry</button></div><div class="form-group"><label>DnsSearch:</label><div ng-repeat="entry in config.HostConfig.DnsSearch"><div class="form-group form-inline"><input type="text" ng-model="entry.name" class="form-control" placeholder="example.com"> <button type="button" class="btn btn-danger btn-sm" ng-click="rmEntry(config.HostConfig.DnsSearch, entry)">x</button></div></div><button type="button" class="btn btn-success btn-sm" ng-click="addEntry(config.HostConfig.DnsSearch, {name: \'\'})">Add entry</button></div><div class="form-group"><label>CapAdd:</label><div ng-repeat="entry in config.HostConfig.CapAdd"><div class="form-group form-inline"><input type="text" ng-model="entry.name" class="form-control" placeholder="cap_sys_admin"> <button type="button" class="btn btn-danger btn-sm" ng-click="rmEntry(config.HostConfig.CapAdd, entry)">x</button></div></div><button type="button" class="btn btn-success btn-sm" ng-click="addEntry(config.HostConfig.CapAdd, {name: \'\'})">Add entry</button></div><div class="form-group"><label>CapDrop:</label><div ng-repeat="entry in config.HostConfig.CapDrop"><div class="form-group form-inline"><input type="text" ng-model="entry.name" class="form-control" placeholder="cap_sys_admin"> <button type="button" class="btn btn-danger btn-sm" ng-click="rmEntry(config.HostConfig.CapDrop, entry)">x</button></div></div><button type="button" class="btn btn-success btn-sm" ng-click="addEntry(config.HostConfig.CapDrop, {name: \'\'})">Add entry</button></div></div><div class="col-xs-6"><div class="form-group"><label>NetworkMode:</label> <input type="text" ng-model="config.HostConfig.NetworkMode" class="form-control" placeholder="bridge"></div><div class="form-group"><label for="publishAllPorts">PublishAllPorts:</label> <input class="new-checkbox bordered" id="publishAllPorts" ng-model="config.HostConfig.PublishAllPorts" type="checkbox"><label for="publishAllPorts"></label></div><div class="form-group"><label for="privileged">Privileged:</label> <input class="new-checkbox bordered" id="privileged" ng-model="config.HostConfig.Privileged" type="checkbox"><label for="privileged"></label></div><div class="form-group"><label>VolumesFrom:</label><div ng-repeat="volume in config.HostConfig.VolumesFrom"><div class="form-group form-inline"><select ng-model="volume.name" ng-options="name for name in containerNames track by name" class="form-control"></select><button class="btn btn-danger btn-xs form-control" ng-click="rmEntry(config.HostConfig.VolumesFrom, volume)">x</button></div></div><button type="button" class="btn btn-success btn-sm" ng-click="addEntry(config.HostConfig.VolumesFrom, {name: \'\'})">Add volume</button></div><div class="form-group"><label>RestartPolicy:</label><select ng-model="config.HostConfig.RestartPolicy.name"><option value="">disabled</option><option value="always">always</option><option value="on-failure">on-failure</option></select><label>MaximumRetryCount:</label> <input type="number" ng-model="config.HostConfig.RestartPolicy.MaximumRetryCount"></div></div></div><hr><div class="form-group"><label>ExtraHosts:</label><div ng-repeat="entry in config.HostConfig.ExtraHosts"><div class="form-group form-inline"><div class="form-group"><label class="sr-only">Hostname:</label> <input type="text" ng-model="entry.host" class="form-control" placeholder="hostname"></div><div class="form-group"><label class="sr-only">IP Address:</label> <input type="text" ng-model="entry.ip" class="form-control" placeholder="127.0.0.1"></div><div class="form-group"><button class="btn btn-danger btn-xs form-control" ng-click="rmEntry(config.HostConfig.ExtraHosts, entry)">x</button></div></div></div><button type="button" class="btn btn-success btn-sm" ng-click="addEntry(config.HostConfig.ExtraHosts, {host: \'\', ip: \'\'})">Add extra host</button></div><div class="form-group"><label>LxcConf:</label><div ng-repeat="entry in config.HostConfig.LxcConf"><div class="form-group form-inline"><div class="form-group"><label class="sr-only">Name:</label> <input type="text" ng-model="entry.name" class="form-control" placeholder="lxc.utsname"></div><div class="form-group"><label class="sr-only">Value:</label> <input type="text" ng-model="entry.value" class="form-control" placeholder="docker"></div><div class="form-group"><button class="btn btn-danger btn-xs form-control" ng-click="rmEntry(config.HostConfig.LxcConf, entry)">x</button></div></div></div><button type="button" class="btn btn-success btn-sm" ng-click="addEntry(config.HostConfig.LxcConf, {name: \'\', value: \'\'})">Add Entry</button></div><div class="form-group"><label>Devices:</label><div ng-repeat="device in config.HostConfig.Devices"><div class="form-group form-inline inline-four"><label class="sr-only">PathOnHost:</label> <input type="text" ng-model="device.PathOnHost" class="form-control" placeholder="PathOnHost"> <label class="sr-only">PathInContainer:</label> <input type="text" ng-model="device.PathInContainer" class="form-control" placeholder="PathInContainer"> <label class="sr-only">CgroupPermissions:</label> <input type="text" ng-model="device.CgroupPermissions" class="form-control" placeholder="CgroupPermissions"> <button class="btn btn-danger btn-xs form-control" ng-click="rmEntry(config.HostConfig.Devices, device)">x</button></div></div><button type="button" class="btn btn-success btn-sm" ng-click="addEntry(config.HostConfig.Devices, { PathOnHost: \'\', PathInContainer: \'\', CgroupPermissions: \'\'})">Add Device</button></div><div class="form-group"><label>PortBindings:</label><div ng-repeat="portBinding in config.HostConfig.PortBindings"><div class="form-group form-inline inline-four"><label class="sr-only">Host IP:</label> <input type="text" ng-model="portBinding.ip" class="form-control" placeholder="Host IP Address"> <label class="sr-only">Host Port:</label> <input type="text" ng-model="portBinding.extPort" class="form-control" placeholder="Host Port"> <label class="sr-only">Container port:</label> <input type="text" ng-model="portBinding.intPort" class="form-control" placeholder="Container Port"><select ng-model="portBinding.protocol"><option value="">tcp</option><option value="udp">udp</option></select><button class="btn btn-danger btn-xs form-control" ng-click="rmEntry(config.HostConfig.PortBindings, portBinding)">x</button></div></div><button type="button" class="btn btn-success btn-sm" ng-click="addEntry(config.HostConfig.PortBindings, {ip: \'\', extPort: \'\', intPort: \'\'})">Add Port Binding</button></div></fieldset></accordion-group></accordion></form></div><div class="modal-footer"><a href="" class="btn btn-primary btn-lg" ng-click="create()">Create</a></div>'),e.put("app/modules/docker/image/image.html",'<section horizontal-ui-sheet="" class="qor-sheet-half"><header horizontal-ui-sheet-header="" title="{{vm.image.Id}}"></header><div horizontal-ui-sheet-content=""><div class="alert alert-error" ng-show="vm.error">{{vm.error}}</div><div class="detail"><h4>Image: {{ vm.tag }}</h4><div class="btn-group detail"><button class="btn btn-success" ng-click="vm.openCreateImageModal()">Create</button></div><div><h4>Containers created:</h4><line-chart data="vm.containers"></line-chart></div><table class="table table-striped"><tbody><tr><td>Created:</td><td>{{ vm.image.Created }}</td></tr><tr><td>Parent:</td><td><a ui-sref=".({imageId: vm.image.Parent})">{{ vm.image.Parent }}</a></td></tr><tr><td>Size (Virtual Size):</td><td>{{ vm.image.Size|humansize }} ({{ vm.image.VirtualSize|humansize }})</td></tr><tr><td>Hostname:</td><td>{{ vm.image.ContainerConfig.Hostname }}</td></tr><tr><td>User:</td><td>{{ vm.image.ContainerConfig.User }}</td></tr><tr><td>Cmd:</td><td>{{ vm.image.ContainerConfig.Cmd }}</td></tr><tr><td>Volumes:</td><td>{{ vm.image.ContainerConfig.Volumes }}</td></tr><tr><td>Volumes from:</td><td>{{ vm.image.ContainerConfig.VolumesFrom }}</td></tr><tr><td>Built with:</td><td>Docker {{ vm.image.DockerVersion }} on {{ vm.image.Os}}, {{ vm.image.Architecture }}</td></tr></tbody></table><div class="row-fluid"><div class="span1">History:</div><div class="span5"><i class="icon-refresh" style="width:32px;height:32px;" ng-click="vm.getHistory()"></i></div></div><div class="well well-large"><ul><li ng-repeat="change in vm.history"><strong>{{ change.Id }}</strong>: Created: {{ change.Created|getdate }} Created by: {{ change.CreatedBy}}</li></ul></div><hr><div class="row-fluid"><form class="form-inline" role="form"><fieldset><legend>Tag image</legend><div class="form-group"><label>Tag:</label> <input type="text" placeholder="repo..." ng-model="vm.tag1.repo" class="form-control"></div><div class="form-group"><input class="new-checkbox bordered" id="check-tag" ng-model="vm.tag1.force" type="checkbox"><label for="check-tag"></label> Force?</div><input type="button" ng-click="vm.updateTag()" value="Tag" class="btn btn-primary"></fieldset></form></div><hr><div class="btn-remove"><button class="btn btn-large btn-block btn-primary btn-danger" ng-click="vm.remove()">Remove Image</button></div></div></div></section>'),e.put("app/modules/docker/images/images.html",'<section horizontal-ui-sheet="" class="qor-sheet-half"><header horizontal-ui-sheet-header="" title="{{dockerId}}"></header><div horizontal-ui-sheet-content=""><h3 class="config-table-header">Images</h3><div><div class="btn-group pull-left"><div dropdown="" dropdown-append-to-body="" class="dropdown"><button class="btn btn-default config-table-header-button" dropdown-toggle="" aria-haspopup="true" aria-expanded="false">Action<span class="fa fa-angle-down pull-right"></span></button><ul class="dropdown-menu"><li><a ng-click="vm.removeAction()">Remove</a></li></ul></div></div><button class="btn btn-default config-table-header-button" id="pull-image" ng-click="vm.pullImage()">Pull</button><div class="pull-right form-inline containers-form"><input type="text" class="form-control" id="filter" placeholder="Filter" ng-model="vm.filter"> <label class="sr-only" for="filter">Filter</label></div></div><table class="table images-table"><thead><tr><th><input class="new-checkbox bordered" id="header-checkbox" ng-model="vm.toggle" ng-change="vm.toggleSelectAll()" type="checkbox"><label for="header-checkbox"></label> ACTION</th><th>ID</th><th>REPOSITORY</th><th>VIRTUALSIZE</th><th>CREATED</th></tr></thead><tbody><tr ng-repeat="image in vm.images | filter:vm.filter | orderBy:vm.predicate"><td class="center-text"><input class="new-checkbox bordered" id="check-{{image.Id}}" ng-model="image.Checked" type="checkbox"><label for="check-{{image.Id}}"></label></td><td><a ui-sref=".image({imageId: image.Id, imageTag: (image|repotag)})">{{ image.Id|truncate:20}}</a></td><td>{{ image|repotag }}</td><td>{{ image.VirtualSize|humansize }}</td><td>{{ image.Created|getdate }}</td></tr></tbody></table></div></section>'),e.put("app/modules/docker/images/pull-image.html",'<div class="modal-header"><button type="button" class="close" ng-click="vm.close()" data-dismiss="modal" aria-hidden="true">&times;</button><h3>Pull Image</h3></div><div class="modal-body"><form novalidate="" role="form" name="pullForm"><div class="form-group"><label>Registry:</label> <input type="text" ng-model="vm.config.registry" class="form-control" placeholder="Registry. Leave empty to user docker hub"></div><div class="form-group"><label>Repo:</label> <input type="text" ng-model="vm.config.repo" class="form-control" placeholder="Repository - usually your username."></div><div class="form-group"><label>Image Name:</label> <input type="text" ng-model="vm.config.fromImage" class="form-control" placeholder="Image name" required=""></div><div class="form-group"><label>Tag Name:</label> <input type="text" ng-model="vm.config.tag" class="form-control" placeholder="Tag name. If empty it will download ALL tags."></div></form></div><div class="alert alert-error" ng-show="vm.error">{{ vm.error }}</div><div class="modal-footer"><a href="" class="btn btn-primary" ng-click="vm.pull()">Pull</a></div>'),e.put("app/modules/docker/info/info.html",'<section horizontal-ui-sheet="" class="qor-sheet-half"><header horizontal-ui-sheet-header="" title="Information"></header><div horizontal-ui-sheet-content=""><div class="detail"><h3 class="config-table-header">Docker Information</h3><table class="docker-info-small"><tbody><tr><td>API Endpoint:</td><td>{{ vm.endpoint }}</td></tr><tr><td>API Version:</td><td>{{ vm.docker.ApiVersion }}</td></tr><tr><td>Docker version:</td><td>{{ vm.docker.Version }}</td></tr><tr><td>Git Commit:</td><td>{{ vm.docker.GitCommit }}</td></tr><tr><td>Go Version:</td><td>{{ vm.docker.GoVersion }}</td></tr></tbody></table><table class="table docker-info-table"><tbody><tr><td>Containers:</td><td>{{ vm.info.Containers }}</td></tr><tr><td>Images:</td><td>{{ vm.info.Images }}</td></tr><tr><td>Debug:</td><td>{{ vm.info.Debug }}</td></tr><tr><td>CPUs:</td><td>{{ vm.info.NCPU }}</td></tr><tr><td>Total Memory:</td><td>{{ vm.info.MemTotal|humansize }}</td></tr><tr><td>Operating System:</td><td>{{ vm.info.OperatingSystem }}</td></tr><tr><td>Kernel Version:</td><td>{{ vm.info.KernelVersion }}</td></tr><tr><td>ID:</td><td>{{ vm.info.ID }}</td></tr><tr><td>Labels:</td><td>{{ vm.info.Labels }}</td></tr><tr><td>File Descriptors:</td><td>{{ vm.info.NFd }}</td></tr><tr><td>Goroutines:</td><td>{{ vm.info.NGoroutines }}</td></tr><tr><td>Storage Driver:</td><td>{{ vm.info.Driver }}</td></tr><tr><td>Storage Driver Status:</td><td><p ng-repeat="val in vm.info.DriverStatus">{{ val[0] }}: {{ val[1] }}</p></td></tr><tr><td>Execution Driver:</td><td>{{ vm.info.ExecutionDriver }}</td></tr><tr><td>Events:</td><td><a ui-sref=".events">Events</a></td></tr><tr><td>IPv4 Forwarding:</td><td>{{ vm.info.IPv4Forwarding }}</td></tr><tr><td>Index Server Address:</td><td>{{ vm.info.IndexServerAddress }}</td></tr><tr><td>Init Path:</td><td>{{ vm.info.InitPath }}</td></tr><tr><td>Docker Root Directory:</td><td>{{ vm.info.DockerRootDir }}</td></tr><tr><td>Init SHA1</td><td>{{ vm.info.InitSha1 }}</td></tr><tr><td>Memory Limit:</td><td>{{ vm.info.MemoryLimit }}</td></tr><tr><td>Swap Limit:</td><td>{{ vm.info.SwapLimit }}</td></tr></tbody></table></div></div></section>'),e.put("app/modules/docker/info.events/events.html",'<section horizontal-ui-sheet="" class="qor-sheet-half"><header horizontal-ui-sheet-header="" title="Events"></header><div horizontal-ui-sheet-content=""><div class="row"><div class="col-xs-12"><form class="form-inline"><div class="form-group"><label for="since">Since:</label> <input id="since" type="datetime-local" ng-model="vm.model.since" class="form-control" step="any"></div><div class="form-group"><label for="until">Until:</label> <input id="until" type="datetime-local" ng-model="vm.model.until" class="form-control" step="any"></div><button ng-click="vm.updateEvents()" class="btn btn-warning">Update</button></form><br><table class="table containers-table"><tbody><tr><th>Event</th><th>From</th><th>ID</th><th>Time</th></tr><tr ng-repeat="event in vm.dockerEvents"><td ng-bind="event.status"></td><td ng-bind="event.from"></td><td ng-bind="event.id"></td><td ng-bind="event.time * 1000 | date:\'medium\'"></td></tr></tbody></table></div></div></div></section>'),e.put("app/modules/docker/menu/menu.html",'<section horizontal-ui-sheet="" class="qor-sheet-s"><header horizontal-ui-sheet-header="" title="{{vm.dockerId}}"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope"><a class="list-group-item" ui-sref-active="active" ui-sref=".summary">Summary</a></div><div class="list-group text-left ng-scope"><a class="list-group-item" ui-sref-active="active" ui-sref=".containers">Containers</a></div><div class="list-group text-left ng-scope"><a class="list-group-item" ui-sref-active="active" ui-sref=".images">Images</a></div><div class="list-group text-left ng-scope"><a class="list-group-item" ui-sref-active="active" ui-sref=".info">Info</a></div></div></section>'),e.put("app/modules/docker/summary/summary.html",'<section horizontal-ui-sheet="" class="qor-sheet-half"><header horizontal-ui-sheet-header="" title="Summary"></header><div horizontal-ui-sheet-content=""><div class="row"><div class="col-xs-6 centered-text"><h3>Running Containers</h3><ul class="containers-list"><li ng-repeat="container in vm.containers|orderBy:predicate"><a ui-sref="^.containers.container({containerId: container.Id})">{{ container|containername }}</a> <span class="label label-{{ container.Status|statusbadge }}">{{ container.Status }}</span></li></ul></div><div class="col-xs-6 centered-text"><h3>Status</h3><canvas class="chart chart-doughnut" chart-colours="vm.colours" chart-legend="true" chart-data="vm.dataset" chart-labels="vm.labels"></canvas></div></div><div class="row containers-stat"><div class="col-xs-12 centered-text"><h3>Containers created</h3><line-chart data="vm.totalContainers"></line-chart><h3>Images created</h3><line-chart data="vm.totalImages"></line-chart></div></div></div></section>'),e.put("app/modules/domains/domain/domain.html",'<section horizontal-ui-sheet="" class="qor-sheet-s"><header horizontal-ui-sheet-header="" title="{{vm.domain.name}}"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope"><a class="list-group-item" ng-repeat="environment in vm.domain.instances | orderBy:\'\'" ui-sref-active="active" ui-sref="app.domains.domain.env({env : environment})">{{environment}}</a></div></div></section>'),e.put("app/modules/domains/environment/environment.html",'<section horizontal-ui-sheet="" class="qor-sheet-full"><header horizontal-ui-sheet-header="" title="{{vm.domain}} > {{vm.environment.name}}"></header><div horizontal-ui-sheet-content="" class="no-padding"><div ui-layout="{ flow : \'column\' }" class="domains-layout"><div ui-layout-container="" size="80%"><div class="col-lg-12" ql-widget="domain_stat"></div></div><div ui-layout-container=""><div class="row"><div ui-layout="{flow : \'row\'}"><div ui-layout-container="" class="col-lg-9" auto-scroll="" style="width: 100%;"><div ql-widget="Events" ws-url="vm.eventsWsUrl"></div></div><div ui-layout-container="" class="col-lg-9" size="30%" style="overflow-x: hidden; width: 100%;"><button type="button" ui-sref="app.domains.domain.env.network" ui-sref-active="active" class="btn btn-lg env-button" style="top: 10px;">Network</button> <button type="button" ui-sref="app.domains.domain.env.resources" ui-sref-active="active" class="btn btn-lg env-button" style="top: 70px;">Resources</button> <button type="button" class="btn btn-lg env-button" style="top: 130px;">Traffic</button></div></div></div></div></div></div></section>'),e.put("app/modules/domains/network/network.html",'<section horizontal-ui-sheet="" class="qor-sheet-fill"><header horizontal-ui-sheet-header="" title="Network"></header><div horizontal-ui-sheet-content="" class="qor-sheet-content"><div><div ql-network="" show-details="vm.showDetails" network-data="vm.networkData" class="network"></div></div></div></section>'),e.put("app/modules/domains/node/node.html",'<section horizontal-ui-sheet=""><header horizontal-ui-sheet-header="" title="{{vm.node.name}}"></header><div horizontal-ui-sheet-content=""><domain-details node="vm.node"></domain-details></div></section>'),e.put("app/modules/domains/node-logs/log-details.html",'<script type="text/javascript">\n    var domTerminal = $(\'#logs-terminal\');\n\n    setTimeout(function () {\n        var terminal = $(\'#terminal\').terminal();\n        var newData = terminal.get_output();\n        terminal.clear();\n        terminal.terminal().echo(currentData);\n        terminal.echo(newData);\n    }, 1000);\n\n    domTerminal.attr(\'ws-url\', url);\n</script><div id="logs-terminal" class="log-details" ql-widget="Terminal" ws-url="\'wss://ops-dev.blinker.com/v1/events\'"></div>'),e.put("app/modules/domains/node-logs/node-logs.html",'<section horizontal-ui-sheet="" class="qor-sheet-fill"><header horizontal-ui-sheet-header="" title="Logs"></header><div horizontal-ui-sheet-content="" class="logs"><span log-new-window="" class="fa fa-inverse fa-external-link new-window-icon"></span><div id="logs-terminal" ql-terminal="" ws-url="wss://redpill.qoriolabs.com/v1/events"></div></div></section>'),e.put("app/modules/domains/resources/resources.html",'<section horizontal-ui-sheet="" class="qor-sheet-full"><header horizontal-ui-sheet-header="" title="Resources"></header><div horizontal-ui-sheet-content=""><div ql-widget="container"></div></div></section>'),e.put("app/modules/manage/accounts/accounts.html",'<section horizontal-ui-sheet="" class="qor-sheet-xs"><header horizontal-ui-sheet-header="" title="Accounts"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope" ng-show="vm.accounts.length"><div class="align-text-right"><button class="btn btn-warning add-new-account-button" ng-click="vm.newUser()">Create new</button></div><div class="list-group"><a class="list-group-item" ng-repeat="account in vm.accounts" ui-sref-active="active" ui-sref="app.manage.accounts.account({id : account.id})"><i class="fa fa-user accounts-list-user-icon"></i> {{ account.primary.username || account.primary.email || account.primary.oauth2_account_id || \'???\'}}</a></div></div></div></section>'),e.put("app/modules/manage/settings/settings.html",'<section horizontal-ui-sheet="" class="qor-sheet-s"><header horizontal-ui-sheet-header="" title="Settings"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope"><a class="list-group-item" ui-sref-active="active" ui-sref="app.manage.settings.authentication">Authentication Service</a></div></div></section>'),e.put("app/modules/orchestrate/domain/domain.html",'<section horizontal-ui-sheet="" class="qor-sheet-half"><header horizontal-ui-sheet-header="" title="{{vm.domain.name}}"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left"><a class="list-group-item" ng-repeat="environment in vm.domain.instances | orderBy:\'\'" ui-sref-active="active" ui-sref=".instance({inst : environment})">{{environment}}</a></div></div></section>'),e.put("app/modules/orchestrate/history/history.html",'<section horizontal-ui-sheet="" class="qor-sheet-half"><header horizontal-ui-sheet-header="" title="{{title}}"></header><div horizontal-ui-sheet-content=""><button class="btn btn-warning orchestrate-run-new-button" ui-sref="app.orchestrate.domain.instance.history.option({opt_id : \'new\'})">New</button><div class="list-group text-left ng-scope" ng-show="previousCalls.length > 0"><table class="orchestrate-history-table"><thead><tr><th class="p10">Status</th><th class="p20">Started on</th><th class="p15">User name</th><th class="p30">Note</th><th class="p20">Completed on</th></tr></thead><tbody><tr ng-repeat="call in previousCalls" ui-sref="app.orchestrate.domain.instance.history.option({opt_id : call.id})" ui-sref-active="active"><td class="history-table-icon-item"><span class="glyphicon" ng-class="{\'error glyphicon-remove-sign\': call.status == \'error\', \'warning glyphicon-info-sign\': call.status == \'Started\', \'success glyphicon-ok-sign\': call.status == \'completed\'}"></span></td><td>{{call.start_time | date : \'medium\'}}</td><td>{{call.user}}</td><td>{{call.note}}</td><td>{{call.completion_time | date : \'medium\'}}</td></tr></tbody></table></div><div id="env-loader" ng-hide="previousCalls || error"><img src="assets/images/cube.gif"></div><div id="reload" ng-hide="!error"><a ui-sref="app.orchestrate.domain.instance.history" data-ui-sref-opts="{reload: true}"><i class="fa fa-refresh reload-button"></i></a></div></div></section>'),e.put("app/modules/orchestrate/instance/instance.html",'<section horizontal-ui-sheet="" class="qor-sheet-half"><header horizontal-ui-sheet-header="" title="{{title}}"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope"><a class="list-group-item" ng-repeat="workflow in workflows | orderBy:\'label\'" ui-sref-active="active" ui-sref="app.orchestrate.domain.instance.history({opt : workflow.name})">{{workflow.label}}</a></div><div id="env-loader" ng-hide="workflows.length || error"><img src="assets/images/cube.gif"></div><div id="reload" ng-hide="!error"><a ui-sref="app.orchestrate.domain.instance" data-ui-sref-opts="{reload: true}"><i class="fa fa-refresh reload-button"></i></a></div></div></section>'),e.put("app/modules/orchestrate/option/option.html",'<section horizontal-ui-sheet="" class="qor-sheet-half"><header horizontal-ui-sheet-header="" title="{{title}}"></header><div horizontal-ui-sheet-content=""><div id="env-loader" ng-hide="workflow || error"><img src="assets/images/cube.gif"></div><div id="reload" ng-hide="!error"><a ui-sref="app.orchestrate.domain.instance.history.option" data-ui-sref-opts="{reload: true}"><i class="fa fa-refresh reload-button"></i></a></div><form class="form-horizontal orchestration-parameters"><fieldset id="dynamic-form"></fieldset><div class="form-group"><div class="col-md-4"></div><div class="col-md-4 text-align-right"><button type="button" ng-click="sendMessage()" ng-show="workflow" id="sendMessageButton" class="btn btn-warning">Run</button></div></div></form><hr><div id="timelineContainer"></div></div></section>'),e.put("app/modules/configurations/services/state/state.html",'<section horizontal-ui-sheet="" class="qor-sheet-s"><header horizontal-ui-sheet-header="" title="Configurations"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope"><a class="list-group-item" ui-sref-active="active" ui-sref=".files">Configuration Files</a> <a class="list-group-item" ui-sref-active="active" ui-sref=".instances">Environment Variables</a> <a class="list-group-item" ui-sref-active="active" ui-sref=".packages">Packages</a></div></div></section>'),e.put("app/modules/manage/accounts/account/account.html",'<section horizontal-ui-sheet="" class="qor-sheet-full"><header horizontal-ui-sheet-header="" title="{{ vm.account.primary.username }}"></header><div horizontal-ui-sheet-content=""><nested-table data="vm.account" class="table auth-table account-table" config="vm.config" onchange="vm.dataChanged"></nested-table><button class="btn btn-warning save-auth-button" ng-disabled="vm.isSaveLoading" ng-click="vm.save()" ng-show="vm.isDataChanged"><span ng-hide="vm.isSaveLoading">Save</span> <span ng-show="vm.isSaveLoading">Loading...</span></button></div></section>'),e.put("app/modules/manage/accounts/new-user-modal/new-user-modal.html",'<div class="modal-header"><h3>Create new account</h3></div><div class="modal-body text-center"><ul class="nav nav-pills nav-pills-centered"><li role="presentation" class="active"><a data-toggle="tab" href="#google">Google</a></li><li role="presentation"><a data-toggle="tab" href="#github">GitHub</a></li><li role="presentation"><a data-toggle="tab" href="#email">E-mail</a></li></ul><hr><div class="tab-content"><div id="google" class="tab-pane fade in active"><form class="form-horizontal"><div class="form-group"><div class="col-sm-12"><input type="text" class="form-control" ng-model="vm.username" placeholder="Username"></div></div><div class="form-group"><div class="col-sm-12"><input type="email" class="form-control" ng-model="vm.googleEmail" placeholder="Google Email"></div></div></form><hr><button class="btn btn-success" type="button" ng-click="vm.addGoogleUser(vm.username, vm.googleEmail)">Save</button> <button class="btn btn-warning" type="button" ng-click="vm.cancel()">Cancel</button></div><div id="github" class="tab-pane fade"><form class="form-horizontal"><div class="form-group"><div class="col-sm-12"><input type="text" class="form-control" ng-model="vm.username" placeholder="Username"></div></div><div class="form-group"><div class="col-sm-12"><input type="text" class="form-control" ng-model="vm.githubUsername" placeholder="GitHub Username"></div></div></form><hr><button class="btn btn-success" type="button" ng-click="vm.addGitHubUser(vm.username, vm.githubUsername)">Save</button> <button class="btn btn-warning" type="button" ng-click="vm.cancel()">Cancel</button></div><div id="email" class="tab-pane fade"><form class="form-horizontal"><div class="form-group"><div class="col-sm-12"><input type="text" class="form-control" ng-model="vm.username" placeholder="Username"></div></div><div class="form-group"><div class="col-sm-12"><input type="password" class="form-control" ng-model="vm.password" placeholder="Password"></div></div><div class="form-group"><label for="custom_object" class="col-sm-2 control-label">Custom JSON</label><div class="col-sm-10"><textarea id="custom_object" class="form-control" ng-model="vm.custom_object"></textarea></div></div></form><hr><button class="btn btn-success" type="button" ng-click="vm.addUser(vm.username, vm.password, vm.custom_object)">Save</button> <button class="btn btn-warning" type="button" ng-click="vm.cancel()">Cancel</button></div></div></div>'),e.put("app/modules/manage/settings/authentication/authentication.html",'<section horizontal-ui-sheet="" class="qor-sheet-s"><header horizontal-ui-sheet-header="" title="Authentication Service"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope"><a class="list-group-item" ui-sref-active="active" ui-sref=".domain({authDomain: domain.domain})" ng-repeat="domain in vm.domains">{{domain.domain}}</a></div></div></section>'),e.put("app/modules/configurations/services/state/files/files.html",'<section horizontal-ui-sheet="" class="qor-sheet-s"><header horizontal-ui-sheet-header="" title="Files"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope"><a class="list-group-item" ng-repeat="file in instance.objects | orderBy:\'\'" ui-sref-active="active" ui-sref=".files-view({file: file})">{{file}}</a></div><div id="env-loader" ng-hide="instance || error"><img src="assets/images/cube.gif"></div><div id="reload" ng-hide="!error"><a ui-sref="app.configurations.services.state.files" data-ui-sref-opts="{reload: true}"><i class="fa fa-refresh reload-button"></i></a></div><div class="new-file-button"><button class="btn btn-warning" ng-click="openNewFileModal()" type="button">Add new</button></div></div></section>'),e.put("app/modules/configurations/services/state/files/new-file-modal.html",'<div class="modal-header"><button type="button" class="close" ng-click="cancel()" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4>Create new file</h4></div><div class="modal-body text-center"><form class="form-horizontal"><div class="form-group"><div class="col-sm-12"><input type="text" class="form-control" ng-model="fileName" placeholder="File name"></div></div><div class="form-group"><div class="col-lg-12"><textarea id="new_file_content" class="form-control" type="text" ng-model="fileContent"></textarea></div></div></form></div><div class="modal-footer"><button class="btn btn-primary" type="button" ng-click="ok($event)">Create</button> <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button></div>'),e.put("app/modules/configurations/services/state/files/new-version-modal.html",'<div class="modal-header"><button type="button" class="close" ng-click="cancel()" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4>Create new version</h4></div><div class="modal-body text-center"><form class="form-horizontal"><div class="form-group"><div class="col-sm-12"><input type="text" class="form-control" ng-model="versionName" placeholder="New version name"></div></div></form></div><div class="modal-footer"><button class="btn btn-primary" type="button" ng-click="ok($event)">Create</button> <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button></div>'),e.put("app/modules/configurations/services/state/instances/instances.html",'<section horizontal-ui-sheet="" class="qor-sheet-s"><header horizontal-ui-sheet-header="" title="Instances"></header><div horizontal-ui-sheet-content=""><table class="instances-table"><thead><tr><th></th><th></th></tr></thead><tbody><tr ng-repeat="instance in instances | orderBy:\'\'"><td>{{instance}}</td><td><input ng-click="changeState(checked[instance])" class="new-checkbox" id="input-{{instance}}" name="input-{{instance}}" ng-model="checked[instance]" type="checkbox"><label class="pull-right" for="input-{{instance}}"></label></td></tr></tbody></table><button ng-show="saveAvailableHelper > 0" type="button" ng-click="show()" id="sendMessageButton" class="btn btn-warning config-instances-button">Show</button></div></section>'),e.put("app/modules/configurations/services/state/packages/packages.html",'<section horizontal-ui-sheet="" class="qor-sheet-s"><header horizontal-ui-sheet-header="" title="Packages"></header><div horizontal-ui-sheet-content=""><table class="instances-table"><thead><tr><th></th><th></th></tr></thead><tbody><tr ng-repeat="instance in instances | orderBy:\'\'"><td>{{instance}}</td><td><input ng-click="changeState(checked[instance])" class="new-checkbox" id="input-{{instance}}" name="input-{{instance}}" ng-model="checked[instance]" type="checkbox"><label class="pull-right" for="input-{{instance}}"></label></td></tr></tbody></table><button ng-show="saveAvailableHelper > 0" type="button" ng-click="show()" id="sendMessageButton" class="btn btn-warning config-instances-button">Show</button></div></section>'),e.put("app/modules/manage/settings/authentication/domain/domain.html",'<section horizontal-ui-sheet="" class="qor-sheet-full"><header horizontal-ui-sheet-header="" title="{{vm.domain.domain}}"></header><div horizontal-ui-sheet-content=""><nested-table object-name="a" onclone="vm.cloneObject" onchange="vm.dataChanged" config="vm.configObject" class="table auth-table" data="vm.domain"></nested-table><button class="btn btn-warning save-auth-button" ng-disabled="vm.isSaveLoading" ng-click="vm.save()" ng-show="vm.isDataChanged"><span ng-hide="vm.isSaveLoading">Save</span> <span ng-show="vm.isSaveLoading">Loading...</span></button></div></section>'),e.put("app/modules/configurations/services/state/files/files-diff/files-diff.html",'<section horizontal-ui-sheet="" class="qor-sheet-full"><header horizontal-ui-sheet-header="" title="{{fileName}} - {{selectedInstance}} - {{selectedVersion}} vs {{fileName}} - {{selectedSecondInstance}} - {{selectedSecondVersion}}"></header><div horizontal-ui-sheet-content=""><div class="editor-content"><div class="btn-toolbar pull-right mt-0"><div class="btn-group"><div dropdown="" dropdown-append-to-body="" class="dropdown"><button class="btn btn-default config-table-header-button" dropdown-toggle="">{{selectedSecondInstance ? selectedSecondInstance : \'- Choose instance -\'}}<span class="fa fa-angle-down pull-right"></span></button><ul class="dropdown-menu"><li ng-repeat="instance in instance.instances" ng-class="{\'li-active\' : isSecondInstanceActive(instance)}"><a ng-click="selectSecondInstance(instance)">{{instance}}</a></li></ul></div></div><div class="btn-group"><div dropdown="" dropdown-append-to-body="" class="dropdown"><button class="btn btn-default config-table-header-button" dropdown-toggle="">{{selectedSecondVersion ? selectedSecondVersion : \'- Choose version -\'}} <span class="label label-success" ng-show="isSecondVersionLive(selectedSecondVersion)">Live</span><span class="fa fa-angle-down pull-right"></span></button><ul class="dropdown-menu"><li ng-repeat="version in instance.versions" ng-class="{\'li-active\' : isSecondVersionActive(version)}"><a ng-click="selectSecondVersion(version)">{{version}} <span class="label label-success pull-right" ng-show="isSecondVersionLive(version)">Live</span></a></li></ul></div></div></div><div class="btn-toolbar mt-0 mb-0"><div class="btn-group"><div dropdown="" dropdown-append-to-body="" class="dropdown"><button class="btn btn-default config-table-header-button" dropdown-toggle="">{{selectedFirstInstance ? selectedFirstInstance : \'- Choose instance -\'}}<span class="fa fa-angle-down pull-right"></span></button><ul class="dropdown-menu"><li ng-repeat="instance in instance.instances" ng-class="{\'li-active\' : isFirstInstanceActive(instance)}"><a ng-click="selectFirstInstance(instance)">{{instance}}</a></li></ul></div></div><div class="btn-group"><div dropdown="" dropdown-append-to-body="" class="dropdown"><button class="btn btn-default config-table-header-button" dropdown-toggle="">{{selectedFirstVersion ? selectedFirstVersion : \'- Choose version -\'}} <span class="label label-success" ng-show="isFirstVersionLive(selectedFirstVersion)">Live</span><span class="fa fa-angle-down pull-right"></span></button><ul class="dropdown-menu"><li ng-repeat="version in instance.versions" ng-class="{\'li-active\' : isFirstVersionActive(version)}"><a ng-click="selectFirstVersion(version)">{{version}} <span class="label label-success pull-right" ng-show="isFirstVersionLive(version)">Live</span></a></li></ul></div></div></div><div class="filled-content"><pre ng-show="firstFileData && secondFileData" class="textdiff" line-diff="" left-obj="firstFileData" right-obj="secondFileData">\n        </pre></div></div></div></section>'),e.put("app/modules/configurations/services/state/files/files-view/files-clone-modal.html",'<div class="modal-header"><button type="button" class="close" ng-click="cancel()" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">Clone <span class="fw-semi-bold">{{instance}}</span>-<span class="fw-semi-bold">{{version}}</span> to</h4></div><div class="modal-body"><div class="row"><div class="col-md-7"><input type="text" class="form-control" ng-model="newVersionName" placeholder="New version name"></div><div class="col-md-1 config-modal-devider">in</div><div class="col-md-4"><select id="select-type" ng-model="targetInstance" class="form-control"><option value="">---Target instance---</option><option ng-repeat="instance in instances" value="{{instance}}">{{instance}}</option></select></div></div></div><div class="modal-footer"><button class="btn btn-primary" id="config-modal-ok-button" type="button" ng-click="ok()">OK</button> <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button></div>'),e.put("app/modules/configurations/services/state/files/files-view/files-delete-modal.html",'<div class="modal-header"><button type="button" class="close" ng-click="cancel()" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">Delete file</h4></div><div class="modal-body text-center"><p>Are you sure you want to permanently delete this file?<br><span class="fw-semi-bold">{{fileName}}-{{instance}}-{{version}}</span></p></div><div class="modal-footer"><button class="btn btn-primary" id="config-modal-ok-button" type="button" ng-click="ok()">Yes</button> <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button></div>'),e.put("app/modules/configurations/services/state/files/files-view/files-view.html",'<section horizontal-ui-sheet="" class="qor-sheet-full"><header horizontal-ui-sheet-header="" title="{{domain.name}} > {{service}} > Configuraion Files > {{fileName}}"></header><div horizontal-ui-sheet-content=""><div class="btn-toolbar no-margin ml-n-xs"><div class="btn-group"><div dropdown="" dropdown-append-to-body="" class="dropdown"><button class="btn btn-default config-table-header-button" dropdown-toggle="">{{selectedInstance ? selectedInstance : \'- Choose instance -\'}}<span class="fa fa-angle-down pull-right"></span></button><ul class="dropdown-menu"><li ng-repeat="instance in instances track by $index" ng-class="{\'active\' : isInstanceActive(instance)}"><a ng-click="selectInstance(instance)">{{instance}}</a></li></ul></div></div><div class="btn-group"><div dropdown="" dropdown-append-to-body="" class="dropdown"><button class="btn btn-default config-table-header-button" dropdown-toggle="" ng-disabled="!selectedInstance">{{addNewVersionClicked ? \'-Create new version-\' : (selectedVersion ? selectedVersion : \'- Choose version -\')}} <span class="fa fa-angle-down pull-right"></span> <span class="label label-success pull-right mr-xs" ng-show="isVersionLive(selectedVersion)">Live</span></button><ul class="dropdown-menu"><li ng-click="clickAddNewVersion" ng-class="{\'active\' : addNewVersionClicked}"><a ng-click="clickAddNewVersion()">-Create new version-</a></li><li ng-repeat="version in versions[selectedInstance]" ng-class="{\'active\' : isVersionActive(version)}"><a ng-click="selectVersion(version)">{{version}} <span class="label label-success pull-right" ng-show="isVersionLive(version)">Live</span></a></li></ul></div></div></div><form ng-submit="saveFile()" class="file-content" ng-init="contentsChanged = false"><div class="btn-toolbar pull-right"><button class="btn btn-success mr-xs" ng-show="!isVersionLive(selectedVersion) && selectedInstance && selectedVersion && !addNewVersionClicked" mwl-confirm="" title="Are you sure?" message="Make {{selectedVersion}} live for {{selectedInstance}}" confirm-text="Yes" cancel-text="No" placement="bottom" on-confirm="makeLive(selectedInstance, selectedVersion)" type="button">Set live</button> <button class="btn btn-danger mr-xs" ng-disabled="!(fileContents && contentsChanged || addNewVersionClicked)" type="submit">Save</button> <button class="btn btn-default mr-n-xs" ng-disabled="!fileContents" type="button" ng-click="cloneFile()">Clone <i class="fa fa-clone ml-xs"></i></button> <a class="btn btn-default mr-xs" ng-disabled="!fileContents" ui-sref=".diff">Diff <i class="fa fa-exchange ml-xs"></i></a> <button class="btn btn-default" ng-disabled="!fileContents" type="button" ng-click="deleteFile()">Delete <i class="fa fa-trash-o ml-xs"></i></button></div><textarea class="form-control" ng-model="fileContents" ng-show="fileContents" ng-change="contentsChanged = true"></textarea></form></div></section>'),e.put("app/modules/configurations/services/state/instances/editor/editor.html",'<section horizontal-ui-sheet="" class="qor-sheet-full"><header horizontal-ui-sheet-header="" title="{{domain.name}} > {{service.service}}"></header><div horizontal-ui-sheet-content=""><div class="editor-content"><div class="loading" ng-if="!values">Loading...</div><div class="filled-content"><h3 class="config-table-header">Environment Variables</h3><table class="table table-bordered config-table"><thead table-fixed-header=""><tr><th></th><th ng-repeat="instance in editorService.instances | orderBy:\'\'" class="config-table-th"><h4>{{instance}}</h4><span dropdown="" dropdown-append-to-body="" class="dropdown" ng-hide="requestsCounter != 0"><button class="btn config-table-header-button" dropdown-toggle="">{{selectedVersion[instance]}} <span class="label label-success" ng-show="isLive(instance, selectedVersion[instance])">Live</span> <span class="fa fa-chevron-down pull-right"></span></button><ul class="dropdown-menu"><li ng-repeat="version in versions[instance] track by $index"><a ng-click="changeSelectedVersion(instance, version);" ng-class="{\'li-active\': selectedVersion[instance] == version}">{{version}} <span class="label label-success pull-right" ng-show="isLive(instance, version)">Live</span></a></li><li ng-click="clickAddNewVersion" ng-class="{\'li-active\' : addNewVersionClicked[instance]}"><a ng-click="clickAddNewVersion(instance)">-Create new version-</a></li></ul><span class="fa fa-copy copy-version" ng-click="makeCopy(instance, selectedVersion[instance])"></span> <span class="label label-success set-live-button" ng-hide="isLive(instance, selectedVersion[instance])" mwl-confirm="" instance="{{instance}}" title="Are you sure?" message="Make {{selectedVersion[instance]}} live for {{instance}}" confirm-text="Yes" cancel-text="No" placement="bottom" on-confirm="makeLive(instance, selectedVersion[instance], $event)">Set live</span></span></th><th class="rox-40px"></th></tr></thead><tbody><tr ng-repeat="value in values"><th inline-edit="value.name" is-name="true" on-save="updateName(oldName, newName)">{{value.name}}</th><th ng-repeat="instance in editorService.instances | orderBy:\'\'" parent="value[instance]" key="value.name" versions="editorService.versions" ng-class="{\'no-value\': !value[instance][selectedVersion[instance]][\'value\']}" instance="instance" version="selectedVersion[instance]" inline-edit="value[instance][selectedVersion[instance]][\'value\']" change-selected="changeSelectedVersion" on-delete="deleteValue(name, instance, version)" on-save="updateValues(name, newValue, instance, selectedVersion[instance], xDashVersion)" class="config-input-th"></th><th><div class="config-table-actions"><span ng-click="deleteInAllVersions(value.name)" class="fa fa-remove config-table-action-btn"></span></div></th></tr></tbody></table><div id="env-loader" ng-show="requestsCounter != 0"><img src="assets/images/cube.gif"></div></div><button class="btn btn-danger save-config-button" id="env-save-button" ng-click="save()" ng-show="isSavable()">Save</button> <button class="btn btn-warning add-config-button" ng-click="addValue()" ng-hide="requestsCounter != 0">Add new</button></div></div><script type="text/ng-template" id="inlineEdit.html"><span ng-show="isEditAvailable()" ng-click="edit()" class="config-table-action-btn fa fa-edit pull-right"></span> <textarea rows="1" type="text" on-enter="save()" on-esc="cancel()" ng-model="model" ng-show="editMode" class="config-input-edit"></textarea> <span ng-click="save()" ng-show="editMode && isSaveAvailable()" class="config-table-action-btn fa fa-check pull-right"></span> <span class="config-input-span" ng-hide="editMode" ng-click="edit()">{{model}}</span> <span ng-hide="isDeleteUnavailable()" ng-click="delete()" class="config-table-action-btn fa fa-remove pull-right"></span></script><script type="text/ng-template" id="newVersionModal.html"><div class="modal-header"> <button type="button" class="close" ng-click="cancel()" aria-label="Close"><span aria-hidden="true">&times;</span></button> <h4 class="modal-title">Create copy of {{version}} in {{instance}}</h4> </div> <div class="modal-body"> <div class="row"> <div class="col-md-7"> <input type="text" class="form-control" ng-model="newVersionName" placeholder="New version name"> </div> <div class="col-md-1 config-modal-devider">to</div> <div class="col-md-4"> <select id="select-type" ng-model="targetInstance" class="form-control"> <option value="">---Target instance---</option> <option ng-repeat="instance in instances" value="{{instance}}">{{instance}}</option> </select> </div> </div> </div> <div class="modal-footer"> <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button> <button class="btn btn-primary" id="config-modal-ok-button" type="button" ng-click="ok()">OK</button> </div></script></section>'),e.put("app/modules/configurations/services/state/instances/editor/new-version-modal.html",'<div class="modal-header"><button type="button" class="close" ng-click="cancel()" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4>Create new version for {{instance}}</h4></div><div class="modal-body text-center"><form class="form-horizontal"><div class="form-group"><div class="col-sm-12"><input type="text" class="form-control" ng-model="versionName" placeholder="New version name"></div></div></form></div><div class="modal-footer"><button class="btn btn-primary" type="button" ng-click="ok($event)">Create</button> <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button></div>'),e.put("app/modules/configurations/services/state/packages/editor/editor.html",'<section horizontal-ui-sheet="" class="qor-sheet-full"><header horizontal-ui-sheet-header="" title="{{domain.name}} > {{service.service}}"></header><div horizontal-ui-sheet-content=""><div class="editor-content"><div class="loading" ng-if="!values">Loading...</div><div class="filled-content"><h3 class="config-table-header">Packages</h3><table class="table table-bordered config-table"><thead table-fixed-header=""><tr><th></th><th ng-repeat="instance in editorService.instances | orderBy:\'\'" class="config-table-th"><h4>{{instance}}</h4><span dropdown="" dropdown-append-to-body="" class="dropdown"><button class="btn config-table-header-button" dropdown-toggle="" ng-hide="requestsCounter != 0">{{selectedVersion[instance]}} <span class="label label-success" ng-show="isLive(instance, selectedVersion[instance])">Live</span> <span class="fa fa-chevron-down pull-right"></span></button><ul class="dropdown-menu"><li ng-repeat="version in versions[instance] track by $index"><a ng-if="changeSelected(instance, version)" ng-hide="isVersionDeleted(instance, version)" ng-click="changeSelectedVersion(instance, version);" ng-class="{\'li-active\': selectedVersion[instance] == version}">{{version}} <span class="label label-success pull-right" ng-show="isLive(instance, version)">Live</span></a></li></ul><span class="fa fa-copy copy-version" ng-click="makeCopy(instance, selectedVersion[instance])" ng-hide="requestsCounter != 0"></span> <span class="label label-success set-live-button" ng-hide="isLive(instance, selectedVersion[instance]) || requestsCounter != 0" mwl-confirm="" instance="{{instance}}" title="Are you sure?" message="Make {{selectedVersion[instance]}} live for {{instance}}" confirm-text="Yes" cancel-text="No" placement="bottom" on-confirm="makeLive(instance, selectedVersion[instance], $event)">Set live</span></span></th></tr></thead><tbody ng-hide="requestsCounter != 0"><tr ng-repeat="(valueName, allValues) in values"><th>{{valueName}}</th><th ng-repeat="instance in editorService.instances | orderBy:\'\'" parent="value[instance]" key="valueName" versions="editorService.versions" ng-class="{\'no-value\': !values[valueName][instance][selectedVersion[instance]]}" instance="instance" version="selectedVersion[instance]" inline-edit="values[valueName][instance][selectedVersion[instance]]" change-selected="changeSelectedVersion" on-save="updateValues(name, newValue, instance, selectedVersion[instance], xDashVersion)" class="config-input-th"></th></tr></tbody></table><div id="env-loader" ng-show="requestsCounter != 0"><img src="assets/images/cube.gif"></div></div><button class="btn btn-danger save-config-button" id="env-save-button" ng-click="save()" ng-show="isSavable()">Save</button></div></div><script type="text/ng-template" id="inlineEdit.html"><span ng-show="isEditAvailable()" ng-click="edit()" class="config-table-action-btn fa fa-edit pull-right"></span> <textarea rows="1" type="text" on-enter="save()" on-esc="cancel()" ng-model="model" ng-show="editMode" class="config-input-edit"></textarea> <span ng-click="save()" ng-show="editMode && isSaveAvailable()" class="config-table-action-btn fa fa-check pull-right"></span> <span class="config-input-span" ng-hide="editMode" ng-click="edit()">{{model}}</span></script><script type="text/ng-template" id="newVersionModal.html"><div class="modal-header"> <button type="button" class="close" ng-click="cancel()" aria-label="Close"><span aria-hidden="true">&times;</span></button> <h4 class="modal-title">Create copy of {{version}} in {{instance}}</h4> </div> <div class="modal-body"> <div class="row"> <div class="col-md-7"> <input type="text" class="form-control" ng-model="newVersionName" placeholder="New version name"> </div> <div class="col-md-1 config-modal-devider">to</div> <div class="col-md-4"> <select id="select-type" ng-model="targetInstance" class="form-control"> <option value="">---Target instance---</option> <option ng-repeat="instance in instances" value="{{instance}}">{{instance}}</option> </select> </div> </div> </div> <div class="modal-footer"> <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button> <button class="btn btn-primary" id="config-modal-ok-button" type="button" ng-click="ok()">OK</button> </div></script></section>')
}]);