!function(){"use strict";function e(e){e.state("app.docker.domain.dockers.menu.containers.container.stats",{url:"/stats",templateUrl:"app/modules/docker/domain/dockers/menu/containers/container/stats/stats.html",controller:"DockerContainerStatsController"})}var t=angular.module("qorDash.docker.domain.dockers.menu.containers.container.stats",["ui.router"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a,i,r,s){function c(){a.stats(p,function(e){var a=Object.keys(e).map(function(t){return e[t]});return-1!==a.join("").indexOf("no such id")?void n.error("Unable to retrieve stats","Is this container running?"):(t.data=e,l(e),d(e),u(e),void(T=o(c,2e3)))},function(){n.error("Unable to retrieve stats","Is this container running?"),T=o(c,2e3)})}function l(e){console.log("updateCpuChart",e),q.addData([m(e)],new Date(e.read).toLocaleTimeString()),q.removeData()}function d(e){console.log("updateMemoryChart",e),E.addData([e.memory_stats.usage],new Date(e.read).toLocaleTimeString()),E.removeData()}function u(e){var t=0,n=0;(0!==P||0!==V)&&(t=e.network.rx_bytes-P,n=e.network.tx_bytes-V),P=e.network.rx_bytes,V=e.network.tx_bytes,console.log("updateNetworkChart",e),A.addData([t,n],new Date(e.read).toLocaleTimeString()),A.removeData()}function m(e){var t=e.precpu_stats,n=e.cpu_stats,o=0,a=n.cpu_usage.total_usage-t.cpu_usage.total_usage,i=n.system_cpu_usage-t.system_cpu_usage;return i>0&&a>0&&(o=a/i*n.cpu_usage.percpu_usage.length*100),o}for(var p=angular.extend({id:i.containerId},e.urlParams),f=[],h=[],g=[],v=[],b=[],y=[],k=[],w=0;20>w;w++)f.push(""),h.push(0),g.push(""),v.push(0),b.push(""),y.push(0),k.push(0);var C={fillColor:"rgba(151,187,205,0.5)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff",data:h},S={fillColor:"rgba(151,187,205,0.5)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff",data:v},x={label:"Rx Bytes",fillColor:"rgba(151,187,205,0.5)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff",data:k},D={label:"Tx Bytes",fillColor:"rgba(255,180,174,0.5)",strokeColor:"rgba(255,180,174,1)",pointColor:"rgba(255,180,174,1)",pointStrokeColor:"#fff",data:y},I=[{color:"rgba(151,187,205,0.5)",title:"Rx Data",label:"Rx Data"},{color:"rgba(255,180,174,0.5)",title:"Rx Data",label:"Rx Data"}];legend($("#network-legend").get(0),I),Chart.defaults.global.animationSteps=30;var q=new Chart($("#cpu-stats-chart").get(0).getContext("2d")).Line({labels:f,datasets:[C]},{responsive:!0}),E=new Chart($("#memory-stats-chart").get(0).getContext("2d")).Line({labels:g,datasets:[S]},{scaleLabel:function(e){return r(parseInt(e.value,10))},responsive:!0}),A=new Chart($("#network-stats-chart").get(0).getContext("2d")).Line({labels:b,datasets:[x,D]},{scaleLabel:function(e){return r(parseInt(e.value,10))},responsive:!0});t.networkLegend=s.trustAsHtml(A.generateLegend());var T;t.$on("$destroy",function(){o.cancel(T)}),c();var P=0,V=0}angular.module("qorDash.docker.domain.dockers.menu.containers.container.stats").controller("DockerContainerStatsController",e),e.$inject=["Settings","$scope","Messages","$timeout","Container","$stateParams","humansizeFilter","$sce"]}(),function(){"use strict";function e(e){e.state("app.docker.domain.dockers.menu.containers.container.top",{url:"/top",templateUrl:"app/modules/docker/domain/dockers/menu/containers/container/top/top.html",controller:"DockerContainerTopController"})}var t=angular.module("qorDash.docker.domain.dockers.menu.containers.container.top",["ui.router"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n){e.ps_args="",e.getTop=function(){n.get(t.containerId,{ps_args:e.ps_args},function(t){e.containerTop=t})},e.getTop()}angular.module("qorDash.docker.domain.dockers.menu.containers.container.top").controller("DockerContainerTopController",e),e.$inject=["$scope","$stateParams","ContainerTop"]}(),function(){"use strict";function e(e){e.state("app.docker.domain.dockers.menu.containers.container.logs",{url:"/logs",templateUrl:"app/modules/docker/domain/dockers/menu/containers/container/logs/logs.html",controller:"DockerContainerLogsController",authenticate:!0})}var t=angular.module("qorDash.docker.domain.dockers.menu.containers.container.logs",["ui.router"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a,i,r){function s(){a.get(t.containerId,{stdout:1,stderr:0,timestamps:e.showTimestamps,tail:e.tailLines},function(t){t=t.replace(/[\r]/g,"\n"),t=t.substring(8),t=t.replace(/\n(.{8})/g,"\n"),e.stdout=t}),a.get(t.containerId,{stdout:0,stderr:1,timestamps:e.showTimestamps,tail:e.tailLines},function(t){t=t.replace(/[\r]/g,"\n"),t=t.substring(8),t=t.replace(/\n(.{8})/g,"\n"),e.stderr=t})}e.stdout="",e.stderr="",e.showTimestamps=!1,e.tailLines=2e3;var c=angular.extend({id:t.containerId},r.urlParams);i.get(c,function(t){e.container=t},function(e){404===e.status?Messages.error("Not found","Container not found."):Messages.error("Failure",e.data)}),s();var l=window.setInterval(s,5e3);e.$on("$destroy",function(){clearInterval(l)}),e.scrollTo=function(e){n.hash(e),o()},e.toggleTimestamps=function(){s()},e.toggleTail=function(){s()}}angular.module("qorDash.docker.domain.dockers.menu.containers.container.logs").controller("DockerContainerLogsController",e),e.$inject=["$scope","$stateParams","$location","$anchorScroll","ContainerLogs","Container","Settings"]}(),function(){"use strict";function e(e){e.state("app.docker.domain.dockers.menu.info.events",{url:"/events",templateUrl:"app/modules/docker/domain/dockers/menu/info/events/events.html",controller:"DockerInfoEventsController"})}var t=angular.module("qorDash.docker.domain.dockers.menu.info.events",["ui.router","ngOboe"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a){t.updateEvents=function(){t.dockerEvents=[];var i=e.url+"/events?";if(t.model.since){var r=Math.floor(t.model.since.getTime()/1e3);i+="since="+r+"&"}if(t.model.until){var s=Math.floor(t.model.until.getTime()/1e3);i+="until="+s}n({url:i,pattern:"{id status time}"}).then(function(){a(function(){t.$apply()})},function(e){o.error("Failure",e.data)},function(e){t.dockerEvents.push(e)})},t.model={},t.model.since=new Date(Date.now()-864e5),t.model.until=new Date,t.updateEvents()}angular.module("qorDash.docker.domain.dockers.menu.info.events").controller("DockerInfoEventsController",e),e.$inject=["Settings","$scope","Oboe","Messages","$timeout"]}(),function(){"use strict";function e(e){e.state("app.docker.domain.dockers.menu.images.image",{url:"/:imageId/:imageTag",templateUrl:"app/modules/docker/domain/dockers/menu/images/image/image.html",controller:"DockerImageController",authenticate:!0})}var t=angular.module("qorDash.docker.domain.dockers.menu.images.image",["ui.router"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a,i,r,s,c,l,d){function u(e,t,n){var o=e.defer();return t.query(angular.extend({all:1,notruc:1},s.urlParams),function(e){for(var t=[],a=0;a<e.length;a++){var i=e[a];i.Image===n&&t.push(r.container(i))}o.resolve(t)}),o.promise}e.history=[],e.tag1={repo:"",force:!1};var m=angular.extend({id:n.imageId},s.urlParams);e.remove=function(){a.remove(m,function(){c.send("Image Removed",n.imageId)},function(t){e.error=t.data,$("#error-message").show()})},e.getHistory=function(){a.history(m,function(t){e.history=t})},e.updateTag=function(){var t=e.tag1;a.tag(angular.extend({repo:t.repo,force:t.force?1:0},m),function(){c.send("Tag Added",n.imageId)},function(t){e.error=t.data,$("#error-message").show()})},e.openCreateImageModal=function(){d.open({animation:!0,templateUrl:"app/modules/docker/domain/dockers/menu/images/image/create-modal.html",controller:"CreateImageModalController"})},a.get(m,function(o){e.image=o,e.tag=o.id;var a=n.imageTag;if(a&&":"!==a){e.tag=a;var r=u(t,i,a);r.then(function(e){l.build("#containers-started-chart",e,function(e){return new Date(1e3*e.Created).toLocaleDateString()})})}},function(t){404===t.status?($(".detail").hide(),e.error="Image not found.<br />"+n.imageId):e.error=t.data,$("#error-message").show()}),e.getHistory()}function t(e,t,n,o,a,i,r,s){function c(e,t){t.error("Error",s(e))}function l(e){for(var t in e)(null===e[t]||void 0===e[t]||""===e[t]||$.isEmptyObject(e[t])||0===e[t].length)&&delete e[t]}function d(e){return e.map(function(e){return e.name})}var u=o.urlParams;a.query(angular.extend({all:1},u),function(t){e.containerNames=t.map(function(e){return r(e)})}),e.config={Env:[],Volumes:[],SecurityOpts:[],HostConfig:{PortBindings:[],Binds:[],Links:[],Dns:[],DnsSearch:[],VolumesFrom:[],CapAdd:[],CapDrop:[],Devices:[],LxcConf:[],ExtraHosts:[]}},e.menuStatus={containerOpen:!0,hostConfigOpen:!1},e.create=function(){var o=angular.copy(e.config);o.Image=t.imageId,o.Cmd&&"["===o.Cmd[0]?o.Cmd=angular.fromJson(o.Cmd):o.Cmd&&(o.Cmd=o.Cmd.split(" ")),o.Env=o.Env.map(function(e){return e.name+"="+e.value}),o.Volumes=d(o.Volumes),o.SecurityOpts=d(o.SecurityOpts),o.HostConfig.VolumesFrom=d(o.HostConfig.VolumesFrom),o.HostConfig.Binds=d(o.HostConfig.Binds),o.HostConfig.Links=d(o.HostConfig.Links),o.HostConfig.Dns=d(o.HostConfig.Dns),o.HostConfig.DnsSearch=d(o.HostConfig.DnsSearch),o.HostConfig.CapAdd=d(o.HostConfig.CapAdd),o.HostConfig.CapDrop=d(o.HostConfig.CapDrop),o.HostConfig.LxcConf=o.HostConfig.LxcConf.reduce(function(e,t){return e[t.name]=t.value,e},{}),o.HostConfig.ExtraHosts=o.HostConfig.ExtraHosts.map(function(e){return e.host+":"+e.ip});var r={},s={};o.HostConfig.PortBindings.forEach(function(e){var t=e.intPort+"/tcp";"udp"===e.protocol&&(t=e.intPort+"/udp");var n={HostIp:e.ip,HostPort:e.extPort};e.intPort?(r[t]={},t in s?s[t].push(n):s[t]=[n]):i.send("Warning","Internal port must be specified for PortBindings")}),o.ExposedPorts=r,o.HostConfig.PortBindings=s,l(o.HostConfig),l(o);var m=a,p=n;a.create(angular.extend(o,u),function(e){if(e.Id){var t=o.HostConfig||{};t.id=e.Id,m.start(angular.extend(t,u),function(t){t.id?(i.send("Container Started",e.Id),$("#create-modal").modal("hide"),p.path("/containers/"+e.Id+"/")):(c(t,i),m.remove({id:e.Id},function(){i.send("Container Removed",e.Id)}))},function(e){c(e,i)})}else c(e,i)},function(e){c(e,i)})},e.addEntry=function(e,t){e.push(t)},e.rmEntry=function(e,t){var n=e.indexOf(t);e.splice(n,1)}}angular.module("qorDash.docker.domain.dockers.menu.images.image").controller("DockerImageController",e).controller("CreateImageModalController",t),e.$inject=["$scope","$q","$stateParams","$location","Image","Container","DockerViewModel","Settings","Messages","LineChart","$modal"],t.$inject=["$scope","$stateParams","$location","Settings","Container","Messages","containernameFilter","errorMsgFilter"]}(),function(){"use strict";function e(e){e.state("app.docker.domain.dockers.menu.containers.container",{url:"/:containerId",templateUrl:"app/modules/docker/domain/dockers/menu/containers/container/container.html",controller:"ContainerController",authenticate:!0})}var t=angular.module("qorDash.docker.domain.dockers.menu.containers.container",["ui.router","qorDash.docker.domain.dockers.menu.containers.container.logs","qorDash.docker.domain.dockers.menu.containers.container.stats","qorDash.docker.domain.dockers.menu.containers.container.top"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a,i,r){e.changes=[],e.edit=!1;var s=angular.extend({id:t.containerId},r.urlParams),c=function(t){t=t===!1?!1:!0,o.get(s,function(n){e.container=n,e.container.edit=!1,e.container.newContainerName=n.Name,t&&e.$emit("updateContainersList")},function(e){404===e.status?($(".detail").hide(),i.error("Not found","Container not found.")):i.error("Failure",e.data)})};e.start=function(){o.start(angular.extend({HostConfig:e.container.HostConfig},s),function(){c(),i.send("Container started",t.containerId)},function(e){c(),i.error("Failure","Container failed to start."+e.data)})},e.stop=function(){o.stop(s,function(){c(),i.send("Container stopped",t.containerId)},function(e){c(),i.error("Failure","Container failed to stop."+e.data)})},e.kill=function(){o.kill(s,function(){c(),i.send("Container killed",t.containerId)},function(e){c(),i.error("Failure","Container failed to die."+e.data)})},e.commit=function(){a.commit(angular.extend({repo:e.container.Config.Image},s),function(){c(),i.send("Container commited",t.containerId)},function(e){c(),i.error("Failure","Container failed to commit."+e.data)})},e.pause=function(){o.pause(s,function(){c(),i.send("Container paused",t.containerId)},function(e){c(),i.error("Failure","Container failed to pause."+e.data)})},e.unpause=function(){o.unpause(s,function(){c(),i.send("Container unpaused",t.containerId)},function(e){c(),i.error("Failure","Container failed to unpause."+e.data)})},e.remove=function(){o.remove(s,function(){c(),i.send("Container removed",t.containerId)},function(e){c(),i.error("Failure","Container failed to remove."+e.data)})},e.restart=function(){o.restart(s,function(){c(),i.send("Container restarted",t.containerId)},function(e){c(),i.error("Failure","Container failed to restart."+e.data)})},e.hasContent=function(e){return null!==e&&void 0!==e},e.getChanges=function(){o.changes(s,function(t){e.changes=t})},e.renameContainer=function(){o.rename(angular.extend({name:e.container.newContainerName},s),function(n){n.name?(e.container.Name=n.name,i.send("Container renamed",t.containerId)):(e.container.newContainerName=e.container.Name,i.error("Failure","Container failed to rename."))}),e.container.edit=!1},c(!1),e.getChanges()}angular.module("qorDash.docker.domain.dockers.menu.containers.container").controller("ContainerController",e),e.$inject=["$scope","$stateParams","$location","Container","ContainerCommit","Messages","Settings"]}(),function(){"use strict";function e(e){e.state("app.docker.domain.dockers.menu.summary",{url:"/summary",templateUrl:"app/modules/docker/domain/dockers/menu/summary/summary.html",controller:"DockerSummaryController",authenticate:!0})}var t=angular.module("qorDash.docker.domain.dockers.menu.summary",["ui.router"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a,i,r){e.predicate="-Created",e.containers=[];var s=angular.extend({id:t.containerId},i.urlParams),c=function(t){e.totalContainers=t.length,r.build("#containers-started-chart",t,function(e){return new Date(1e3*e.Created).toLocaleDateString()});var n=e;a.query(s,function(e){n.totalImages=e.length,r.build("#images-created-chart",e,function(e){return new Date(1e3*e.Created).toLocaleDateString()})})},l={animation:!1};i.firstLoad&&(l.animation=!0,i.firstLoad=!1,$("#masthead").show(),setTimeout(function(){$("#masthead").slideUp("slow")},5e3)),n.query(angular.extend({all:1},s),function(t){for(var n=0,a=0,i=0,r=0;r<t.length;r++){var s=t[r];"Ghost"===s.Status?a+=1:-1!==s.Status.indexOf("Exit")?i+=1:(n+=1,e.containers.push(o.container(s)))}c(t);var d=new Chart($("#containers-chart").get(0).getContext("2d")),u=[{value:n,color:"#5bb75b",title:"Running",label:"Running"},{value:i,color:"#C7604C",title:"Stopped",label:"Stopped"},{value:a,color:"#E2EAE9",title:"Ghost",label:"Ghost"}];d.Doughnut(u,l);var m=$("#chart-legend").get(0);legend(m,u)})}angular.module("qorDash.docker.domain.dockers.menu.summary").controller("DockerSummaryController",e),e.$inject=["$scope","$stateParams","Container","DockerViewModel","Image","Settings","LineChart"]}(),function(){"use strict";function e(e){e.state("app.docker.domain.dockers.menu.info",{url:"/info",templateUrl:"app/modules/docker/domain/dockers/menu/info/info.html",controller:"DockerInfoController",authenticate:!0})}var t=angular.module("qorDash.docker.domain.dockers.menu.info",["ui.router","qorDash.docker.domain.dockers.menu.info.events"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o){e.info={},e.docker={},e.endpoint=o.endpoint,e.apiVersion=o.version;var a=o.urlParams;n.get(a,function(t){e.docker=t}),t.get(a,function(t){e.info=t})}angular.module("qorDash.docker.domain.dockers.menu.info").controller("DockerInfoController",e),e.$inject=["$scope","System","Docker","Settings"]}(),function(){"use strict";function e(e){e.state("app.docker.domain.dockers.menu.images",{url:"/images",templateUrl:"app/modules/docker/domain/dockers/menu/images/images.html",controller:"DockerImagesController",authenticate:!0})}var t=angular.module("qorDash.docker.domain.dockers.menu.images",["ui.router","qorDash.docker.domain.dockers.menu.images.image"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a,i){e.toggle=!1,e.predicate="-Created";var r=n.urlParams;e.showBuilder=function(){$("#build-modal").modal("show")},e.pullImage=function(){i.open({animation:!0,templateUrl:"app/modules/docker/domain/dockers/menu/images/pull-image.html",controller:"DockerPullImageController"})},e.removeAction=function(){var n=0,a=function(){n-=1};angular.forEach(e.images,function(i){i.Checked&&(n+=1,t.remove(angular.extend({id:i.Id},r),function(t){angular.forEach(t,function(e){o.send("Image deleted",e.Deleted)});var n=e.images.indexOf(i);e.images.splice(n,1),a()},function(e){o.error("Failure",e.data),a()}))})},e.toggleSelectAll=function(){angular.forEach(e.images,function(t){t.Checked=e.toggle})},t.query(r,function(t){e.images=t.map(function(e){return a.image(e)})},function(e){o.error("Failure",e.data)})}function t(e,t,n,o){e.template="app/components/pullImage/pullImage.html";var a=Settings.urlParams;e.init=function(){e.config={registry:"",repo:"",fromImage:"",tag:"latest"}},e.init(),e.close=function(){o.close()},e.pull=function(){$("#error-message").hide();var i=angular.copy(e.config),r=(i.registry?i.registry+"/":"")+(i.repo?i.repo+"/":"")+i.fromImage+(i.tag?":"+i.tag:"");$("#pull-modal").modal("hide"),o.close(),n.create(angular.extend(i,a),function(n){if(n.constructor===Array){var o=n.length>0&&n[n.length-1].hasOwnProperty("error");if(o){var a=n[n.length-1];e.error="Cannot pull image "+r+" Reason: "+a.error,$("#pull-modal").modal("show"),$("#error-message").show()}else t.send("Image Added",r),e.init()}else t.send("Image Added",r),e.init()},function(t){e.error="Cannot pull image "+r+" Reason: "+t.data,$("#pull-modal").modal("show"),$("#error-message").show()})}}angular.module("qorDash.docker.domain.dockers.menu.images").controller("DockerImagesController",e).controller("DockerPullImageController",t),e.$inject=["$scope","Image","Settings","Messages","DockerViewModel","$modal"],t.$inject=["$scope","Messages","Image","$modalInstance"]}(),function(){"use strict";function e(e){e.state("app.docker.domain.dockers.menu.containers",{url:"/containers",templateUrl:"app/modules/docker/domain/dockers/menu/containers/containers.html",controller:"ContainersController",authenticate:!0})}var t=angular.module("qorDash.docker.domain.dockers.menu.containers",["ui.router","qorDash.docker.domain.dockers.menu.containers.container"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a){e.predicate="-Created",e.toggle=!1,e.displayAll=n.displayAll,e.$on("updateContainersList",function(){r({all:n.displayAll?1:0})});var i=n.urlParams,r=function(n){t.query(angular.extend(n,i),function(t){e.containers=t.map(function(e){return a.container(e)})})},s=function(a,s,c){var l=0,d=function(){l-=1,0===l&&r({all:n.displayAll?1:0})};angular.forEach(a,function(n){n.Checked&&(s===t.start?t.get(angular.extend({id:n.Id},i),function(t){n=t,l+=1,s(angular.extend({id:n.Id,HostConfig:n.HostConfig||{}},i),function(){o.send("Container "+c,n.Id);e.containers.indexOf(n);d()},function(e){o.error("Failure",e.data),d()})},function(e){404===e.status?($(".detail").hide(),o.error("Not found","Container not found.")):o.error("Failure",e.data),d()}):(l+=1,s(angular.extend({id:n.Id},i),function(){o.send("Container "+c,n.Id);e.containers.indexOf(n);d()},function(e){o.error("Failure",e.data),d()})))})};e.toggleSelectAll=function(){angular.forEach(e.containers,function(t){t.Checked=e.toggle})},e.toggleGetAll=function(){n.displayAll=e.displayAll,r({all:n.displayAll?1:0})},e.startAction=function(){s(e.containers,t.start,"Started")},e.stopAction=function(){s(e.containers,t.stop,"Stopped")},e.restartAction=function(){s(e.containers,t.restart,"Restarted")},e.killAction=function(){s(e.containers,t.kill,"Killed")},e.pauseAction=function(){s(e.containers,t.pause,"Paused")},e.unpauseAction=function(){s(e.containers,t.unpause,"Unpaused")},e.removeAction=function(){s(e.containers,t.remove,"Removed")},r({all:n.displayAll?1:0})}angular.module("qorDash.docker.domain.dockers.menu.containers").controller("ContainersController",e),e.$inject=["$scope","Container","Settings","Messages","DockerViewModel"]}(),function(){"use strict";function e(e){e.state("app.configurations.services.state.packages.editor",{url:"/:instances",templateUrl:"app/modules/configurations/services/state/packages/editor/editor.html",controller:"PackagesEditorController"})}var t=angular.module("qorDash.configurations.services.state.packages.editor",["ui.router","ui-notification","ui.bootstrap","mwl.confirm"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a,i){function r(e){if(null==e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;for(var t in e)if(s.call(e,t))return!1;return!0}e.selectedVersion={},e.itemsForSave={},e.newItemsCount=0,e.values={},e.requestsCounter=0,e.versions={},e.liveVersion={},e.$watch("domains",function(){e.domains&&(e.domain=e.domains.filter(function(e){return e.id==t.domain})[0])}),Object.filter=function(e,t){var n;for(n in e)if(e.hasOwnProperty(n)&&t(n))return e[n]},e.$watch("service",function(){e.service&&(e.editorService=e.service,e.editorService.instances=t.instances.split(","),e.editorService.instances.forEach(function(t){e.selectedVersion[t]=e.editorService.versions[0]}),e.deletedVersions={},e.isVersionDeleted=function(t,n){if(!e.deletedVersions[t])return!1;for(var o in e.deletedVersions[t])if(e.deletedVersions[t][o]==n)return!0;return!1},e.changeSelected=function(t){if(e.isVersionDeleted(t,e.selectedVersion[t]))for(var n in e.editorService.versions)e.isVersionDeleted(t,e.editorService.versions[n])||(e.selectedVersion[t]=e.editorService.versions[n]);return!0},e.loadData=function(){e.values={},e.val1={},e.versions={},e.liveVersion={};var a=function(a){for(var i in e.versions[a]){var r=e.versions[a][i],s={method:"GET",url:n+"/v1/pkg/"+t.domain+"/"+a+"/"+e.editorService.service+"/"+r,headers:{"Content-Type":"application/json"}};e.requestsCounter++,o(s).then(function(t){e.requestsCounter--,e.loaded=!0;var n=t.config.url.split("/"),o=n[n.length-1],a=n[n.length-3];e.selectedVersion[a]=o;for(var i in t.data)e.values[i]||(e.values[i]={}),e.values[i][a]||(e.values[i][a]={}),e.values[i][a][o]=t.data[i]},function(){e.requestsCounter--,e.loaded=!0})}};e.editorService.instances.forEach(function(i){var r={method:"GET",url:n+"/v1/pkg/"+t.domain+"/"+i+"/"+e.editorService.service+"/",headers:{"Content-Type":"application/json"}};e.requestsCounter++,o(r).then(function(t){e.requestsCounter--;for(var n in t.data)e.versions[i]||(e.versions[i]=[]),e.versions[i].push(n),t[n]&&(e.liveVersion[i]=n,e.selectedVersion[i]=n);a(i)},function(){})})},e.loadData())});e.changeSelectedVersion=function(t,n){e.selectedVersion[t]=n},e.isLive=function(t,n){return e.liveVersion[t]==n},e.makeLive=function(a,r){$("span[instance="+a+"].set-live-button").addClass("loading").text("Loading...");var s={method:"POST",url:n+"/v1/pkg/"+t.domain+"/"+a+"/"+e.editorService.service+"/"+r+"/live",headers:{"Content-Type":"application/json"}};o(s).then(function(){i.success("Live version for "+a+" has been changed."),$("span[instance="+a+"].set-live-button").removeClass("loading").text("Set live"),e.editorService.live[a]=r},function(){$("span[instance="+a+"].set-live-button").removeClass("loading").text("Set live")})};var s=Object.prototype.hasOwnProperty;e.isSavable=function(){return!r(e.itemsForSave)||!r(e.itemsForDelete)},e.makeCopy=function(r,s){var c=(a.open({animation:!0,templateUrl:"newVersionModal.html",controller:["$scope","$modalInstance","version","instance","instances",function(e,t,n,o,a){e.newVersionName="",e.version=n,e.instance=o,e.instances=a,e.targetInstance="",e.ok=function(){e.newVersionName&&e.targetInstance&&c(e.newVersionName,e.targetInstance,t)},e.cancel=function(){t.dismiss("cancel")}}],resolve:{version:function(){return s},instance:function(){return r},instances:function(){return e.service.instances}}}),function(a,c,l){if(a&&c){var d={};for(var u in e.values)e.values[u][r]&&e.values[u][r][s]&&(d[u]=e.values[u][r][s]);$("#config-modal-ok-button").button("loading");var m={method:"POST",url:n+"/v1/pkg/"+t.domain+"/"+c+"/"+e.editorService.service+"/"+a,headers:{"Content-Type":"application/json"},data:d};o(m).then(function(){e.editorService.versions.push(a);for(var t in e.deletedVersions)t!=c&&e.deletedVersions[t].push(a);for(t in d)e.values[t][c][a]=e.values[t][r][s];e.changeSelectedVersion(c,a),i.success("Copy created"),l.close()},function(){$("#config-modal-ok-button").button("reset")})}})},e.save=function(){$("#env-save-button").button("loading");for(var t in e.itemsForSave){var a=e.itemsForSave[t];for(var r in a){var s=e.itemsForSave[t][r],c={method:"PUT",url:n+"/v1/pkg/"+e.domain.id+"/"+t+"/"+e.editorService.service+"/"+r,headers:{"Content-Type":"application/json"},data:s};o(c).then(function(){i.success("Saved successfully"),$("#env-save-button").button("reset")},function(){i.error("Saving error: "+error.error),$("#env-save-button").button("reset")})}}e.itemsForSave={}},e.updateValues=function(t,n,o,a){e.itemsForSave[o]||(e.itemsForSave[o]=[]),e.itemsForSave[o][a]||(e.itemsForSave[o][a]={}),e.itemsForSave[o][a][t]=n}}angular.module("qorDash.configurations.services.state.packages.editor").config(["NotificationProvider",function(e){e.setOptions({delay:5e3,positionX:"right",positionY:"bottom"})}]),e.$inject=["$scope","$stateParams","API_URL","$http","$modal","Notification"],angular.module("qorDash.configurations.services.state.packages.editor").controller("PackagesEditorController",e)}(),function(){"use strict";function e(e){e.state("app.configurations.services.state.instances.editor",{url:"/:instances",templateUrl:"app/modules/configurations/services/state/instances/editor/editor.html",controller:"EditorController",authenticate:!0})}var t=angular.module("qorDash.configurations.services.state.instances.editor",["ui.router","ui-notification","ui.bootstrap","mwl.confirm"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a,i,r,s){function c(e){if(null==e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;for(var t in e)if(u.call(e,t))return!1;return!0}function l(){for(var t in e.val1)e.val1[t].name=t,e.values.push(e.val1[t])}e.selectedVersion={},e.itemsForSave={},e.newItemsCount=0,e.dashVersions={},e.values=[],e.val1={},e.requestsCounter=0,e.versions={},e.liveVersion={},e.createVersion=function(a,r){var c={method:"POST",url:n+"/v1/env/"+t.domain+"/"+a+"/"+e.service.service+"/"+r};return o(c).then(function(){i.success("Successfully created")},function(e){s.showError(e.data,e.status)})},e.clickAddNewVersion=function(t){a.open({animation:!0,templateUrl:"app/modules/configurations/services/state/instances/editor/new-version-modal.html",controller:"EditorNewVersionController",size:"sm",resolve:{createVersion:function(){return e.createVersion},instance:function(){return t}}})},e.$watch("domains",function(){e.domains&&(e.domain=e.domains.filter(function(e){return e.id==t.domain})[0])}),Object.filter=function(e,t){var n;for(n in e)if(e.hasOwnProperty(n)&&t(n))return e[n]},e.$watch("service",function(){e.service&&(e.editorService=e.service,e.editorService.instances=t.instances.split(","),e.loadData=function(){e.values=[],e.val1={},e.deledVersions={},e.versions={},e.liveVersion={};var a=function(a){for(var i in e.versions[a]){var r=e.versions[a][i],s={method:"GET",url:n+"/v1/env/"+t.domain+"/"+a+"/"+e.editorService.service+"/"+r,headers:{"Content-Type":"application/json"},version:r};e.requestsCounter++,o(s).then(function(t){e.requestsCounter--,e.loaded=!0;var n=t.config.version;for(var o in t.data)e.val1[o]||(e.val1[o]={}),e.val1[o][a]||(e.val1[o][a]={}),e.val1[o][a][n]||(e.val1[o][a][n]={}),e.val1[o][a][n].value=t.data[o]?t.data[o]:"-",e.dashVersions[a]||(e.dashVersions[a]={}),e.dashVersions[a][n]=t.headers("X-Dash-Version");e.requestsCounter<=0&&l()},function(){e.requestsCounter--,e.loaded=!0,e.requestsCounter<=0&&l()})}};e.editorService.instances.forEach(function(i){var r={method:"GET",url:n+"/v1/env/"+t.domain+"/"+i+"/"+e.editorService.service+"/",headers:{"Content-Type":"application/json"}};e.requestsCounter++,o(r).then(function(t){e.requestsCounter--;for(var n in t.data)e.versions[i]||(e.versions[i]=[]),e.versions[i].push(n),t.data[n]&&(e.liveVersion[i]=n,e.selectedVersion[i]=n);a(i)},function(){})})},e.loadData())});var d=function(t){for(var n in e.editorService.instances)if(e.editorService.instances[n]==t)return!0;return!1};e.changeSelectedVersion=function(t,n){e.selectedVersion[t]=n},e.isLive=function(t,n){return e.editorService.live[t]==n},e.makeLive=function(a,r){$("span[instance="+a+"].set-live-button").addClass("loading").text("Loading...");var s={method:"POST",url:n+"/v1/env/"+t.domain+"/"+a+"/"+e.editorService.service+"/"+r+"/live",headers:{"Content-Type":"application/json"}};o(s).then(function(){i.success("Live version for "+a+" has been changed."),$("span[instance="+a+"].set-live-button").removeClass("loading").text("Set live"),e.editorService.live[a]=r},function(){$("span[instance="+a+"].set-live-button").removeClass("loading").text("Set live")})};var u=Object.prototype.hasOwnProperty;e.isSavable=function(){return!c(e.itemsForSave)||!c(e.itemsForDelete)},e.makeCopy=function(r,s){var c=(a.open({animation:!0,templateUrl:"newVersionModal.html",controller:["$scope","$modalInstance","version","instance","instances",function(e,t,n,o,a){e.newVersionName="",e.version=n,e.instance=o,e.instances=a,e.targetInstance="",e.ok=function(){e.newVersionName&&e.targetInstance&&c(e.newVersionName,e.targetInstance,t)},e.cancel=function(){t.dismiss("cancel")}}],resolve:{version:function(){return s},instance:function(){return r},instances:function(){return e.service.instances}}}),function(a,c,l){if($("#config-modal-ok-button").button("loading"),a&&c){var d={method:"GET",url:n+"/v1/env/"+t.domain+"/"+r+"/"+e.editorService.service+"/"+s,headers:{"Content-Type":"application/json"},version:s},u={};o(d).then(function(r){u=r.data;var s={method:"POST",url:n+"/v1/env/"+t.domain+"/"+c+"/"+e.editorService.service+"/"+a,headers:{"Content-Type":"application/json"},data:data};o(s).then(function(){e.versions[c].push(a);for(var t in e.values)e.values[t][c]&&(e.values[t][c][a]={value:u[e.values[t].name]});i.success("Copy created"),l.close()},function(){$("#config-modal-ok-button").button("reset")})},function(){$("#config-modal-ok-button").button("reset")})}})},e.save=function(){if($("#env-save-button").button("loading"),0!=e.newItemsCount)for(var t=e.values.length-1;e.newItemsCount;e.newItemsCount--){var a=e.values[t];for(var r in a)if(d(r)){var s=a[r];for(var c in s)e.itemsForSave[r]||(e.itemsForSave[r]={}),e.itemsForSave[r][c]||(e.itemsForSave[r][c]={}),e.itemsForSave[r][c].update||(e.itemsForSave[r][c].update={}),e.itemsForSave[r][c].update[a.name]=s[c].value}}for(var l in e.itemsForSave){var u=e.itemsForSave[l];for(var m in u){var p=e.itemsForSave[l][m],f={method:"PATCH",url:n+"/v1/env/"+e.domain.id+"/"+l+"/"+e.editorService.service+"/"+m,headers:{"Content-Type":"application/json","X-Dash-Version":e.dashVersions[l]?e.dashVersions[l][m]||"":""},data:p};f.data["delete"]&&o(f).then(function(){i.success("Saved successfully"),$("#env-save-button").button("reset"),e.loadData()},function(){$("#env-save-button").button("reset")})}}e.itemsForSave={},e.itemsForDelete=[]},e.addValue=function(){$(".editor-content").parent().scrollTop($(".editor-content").height()+80);
var t={};t.name="",e.editorService.instances.forEach(function(n){t[n]={},e.versions[n].forEach(function(e){t[n][e]=""})}),e.values.push(t),e.newItemsCount++},e.updateValues=function(t,n,o,a){e.itemsForSave[o]||(e.itemsForSave[o]=[]),e.itemsForSave[o][a]||(e.itemsForSave[o][a]={update:{},"delete":[]}),e.itemsForSave[o][a].update[t]=n;for(var i in e.values)if(e.values[i].name==t)return void(e.values[i].value=n)},e.deleteValue=function(t,n,o){return e.itemsForSave[n]||(e.itemsForSave[n]=[]),e.itemsForSave[n][o]?void e.itemsForSave[n][o]["delete"].push(t):void(e.itemsForSave[n][o]={update:{},"delete":[t]})},e.deleteInAllVersions=function(t){for(var n in e.values)e.values[n].name==t&&e.values.splice(n,1);if(t)for(var n in e.editorService.instances)e.values[n][e.editorService.instances[n]][e.selectedVersion[e.editorService.instances[n]]]&&0!=e.values[n][e.editorService.instances[n]][e.selectedVersion[e.editorService.instances[n]]].value.length&&e.deleteValue(t,e.editorService.instances[n],e.selectedVersion[e.editorService.instances[n]])}}function t(){return function(e,t,n){t.bind("keypress",function(t){13===t.keyCode&&e.$apply(n.onEnter)})}}function n(){return function(e,t,n){t.bind("keydown",function(t){27===t.keyCode&&e.$apply(n.onEsc)})}}function o(e){return{scope:{model:"=inlineEdit",key:"=key",handleSave:"&onSave",handleCancel:"&onCancel",handleDelete:"&onDelete",isName:"=isName",parent:"=",version:"=",instance:"=",changeSelected:"=",versions:"="},link:function(t,n){var o;t.edit=function(){t.showEdit=!1,t.oldValue=t.model,t.isName&&t.model||(t.editMode=!0,t.previousValue=t.model,e(function(){var e=n.find("textarea")[0];e.style.height=e.scrollHeight+"px",e.focus()},0,!1))},t.save=function(){t.editMode=!1,t.model||(t.showEdit=!0),t.model!=t.oldValue&&t.handleSave({name:t.key,newValue:t.model,instance:t.instance,version:t.version})},t.isSaveAvailable=function(){return!0},t.isDeleteUnavailable=function(){return t.isName||t.editMode||!t.model},t.isLeftVersionAvailable=function(){var e=0;for(var n in t.versions)if(++e,t.versions[n]==t.version&&e>1)return!0;return!1},t.isRightVersionAvailable=function(){var e=0,n=0;for(var o in t.versions)++e,t.versions[o]==t.version&&(n=e);return e-n>0},t.changeVersionToTheRight=function(){if(t.isRightVersionAvailable()){var e=!1;for(var n in t.versions){if(e)return void t.changeSelected(t.instance,t.versions[n]);t.versions[n]==t.version&&e++}}},t.changeVersionToTheLeft=function(){if(t.isLeftVersionAvailable()){var e=null;for(var n in t.versions){if(t.versions[n]==t.version){if(!e)continue;t.changeSelected(t.instance,e)}e=t.versions[n]}}},t["delete"]=function(){console.log(t),t.model="",t.showEdit=!0,t.handleDelete({name:t.key,instance:t.instance,version:t.version})},t.isEditAvailable=function(){return(t.model?!1:!0)&&!t.editMode},t.cancel=function(){t.editMode=!1,t.model=o,t.handleCancel({value:t.model})},t.remove=function(e){t.handleDelete({name:e})},t.model||(t.showEdit=!0)},templateUrl:"inlineEdit.html"}}function a(){return{link:function(){},templateUrl:"addNewValue.html"}}function i(){return{link:function(){[].slice.call(document.querySelectorAll("select.cs-select")).forEach(function(e){new SelectFx(e)})}}}function r(e,t,n,o){e.instance=o,e.ok=function(a){e.versionName&&(e.event=a,$(a.target).button("loading"),t(o,e.versionName).then(function(){n.close()},function(){$(e.event.target).button("reset")}))},e.cancel=function(){n.dismiss("cancel")}}angular.module("qorDash.configurations.services.state.instances.editor").config(["NotificationProvider",function(e){e.setOptions({delay:5e3,positionX:"right",positionY:"bottom"})}]),e.$inject=["$scope","$stateParams","API_URL","$http","$modal","Notification","$timeout","errorHandler"],o.$inject=["$timeout"],r.$inject=["$scope","createVersion","$modalInstance","instance"],angular.module("qorDash.configurations.services.state.instances.editor").controller("EditorController",e).directive("inlineEdit",o).directive("onEnter",t).directive("onEsc",n).directive("addValue",a).directive("customSelect",i).controller("EditorNewVersionController",r)}(),function(){"use strict";function e(e){e.state("app.configurations.services.state.files.files-view.diff",{url:"/diff/:diffToInstance/:diffToVersion",params:{file:{},instance:{},version:{},diffToInstance:{value:null,squash:!0},diffToVersion:{value:null,squash:!0},_preventAnimation:{value:null,squash:!0}},templateUrl:"app/modules/configurations/services/state/files/files-diff/files-diff.html",controller:"FilesEditorController",authenticate:!0})}var t=angular.module("qorDash.configurations.services.state.files.files-view.diff",["ui.router","ui.codemirror","ui-notification","diff-match-patch"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a){e.$watch("domains",function(){e.domains&&(e.domain=e.domains.filter(function(e){return e.id==n.domain})[0])}),e.$watch("service",function(){e.service&&e.showDiff()}),e.options={attrs:{insert:{"data-attr":"insert","class":"insertion"},"delete":{"data-attr":"delete"},equal:{"data-attr":"equal"}}},e.fileName=n.file,e.selectedFirstInstance=n.instance,e.selectedSecondInstance=n.diffToInstance,e.selectedFirstVersion=n.version,e.selectedSecondVersion=n.diffToVersion,e.syncState=function(){t.go(".",{instance:e.selectedFirstInstance,version:e.selectedFirstVersion,diffToInstance:e.selectedSecondInstance,diffToVersion:e.selectedSecondVersion,_preventAnimation:!0})},e.selectFirstInstance=function(t){e.selectedFirstInstance=t,e.syncState(),e.showDiff()},e.selectSecondInstance=function(t){e.selectedSecondInstance=t,e.syncState(),e.showDiff()},e.selectFirstVersion=function(t){e.selectedFirstVersion=t,e.syncState(),e.showDiff()},e.selectSecondVersion=function(t){e.selectedSecondVersion=t,e.syncState(),e.showDiff()},e.isFirstInstanceActive=function(t){return t==e.selectedFirstInstance},e.isSecondInstanceActive=function(t){return t==e.selectedSecondInstance},e.isFirstVersionActive=function(t){return t==e.selectedFirstVersion},e.isSecondVersionActive=function(t){return t==e.selectedSecondVersion},e.isFirstVersionLive=function(t){return e.selectedFirstInstance&&e.instance?t==e.instance.live[e.selectedFirstInstance][e.fileName]:!1},e.isSecondVersionLive=function(t){return e.selectedSecondInstance&&e.instance?t==e.instance.live[e.selectedSecondInstance][e.fileName]:!1},e.showDiff=function(){e.selectedFirstInstance&&e.selectedSecondInstance&&e.selectedFirstVersion&&e.selectedSecondVersion&&(e.loading=!0,o.files.getFileContent(n.domain,e.selectedFirstInstance,e.service,e.selectedFirstVersion,n.file).then(function(t){e.firstFileData=t.data,o.files.getFileContent(n.domain,e.selectedSecondInstance,e.service,e.selectedSecondVersion,n.file).then(function(t){e.secondFileData=t.data},function(t){e.error=a.showError(t)})},function(t){e.error=a.showError(t)}))}}e.$inject=["$scope","$state","$stateParams","configurationService","errorHandler"],angular.module("qorDash.configurations.services.state.files.files-view.diff").controller("FilesEditorController",e)}(),function(){"use strict";function e(e){e.state("app.configurations.services.state.files.files-view",{url:"/:file/:instance/:version",params:{file:{},instance:{value:null,squash:!0},version:{value:null,squash:!0}},templateUrl:"app/modules/configurations/services/state/files/files-view/files-view.html",controller:"FilesViewController",authenticate:!0})}var t=angular.module("qorDash.configurations.services.state.files.files-view",["ui.router","ui.codemirror","ui-notification","diff-match-patch"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a,i,r,s){e.addNewVersionClicked=!1,e.selectInstance=function(n){e.selectedInstance!=n&&(e.selectedVersion=""),e.selectedInstance=n,t.go(".",{instance:e.selectedInstance,version:e.selectedVersion}),e.showFile()},e.$watch("instance",function(){e.instance&&e._loadVersions()}),e.versions={},e.liveVersion={},e.instances=[],e._loadVersions=function(){e.instance.instances.forEach(function(t){o.files.getVersions(n.domain,t,e.service,n.file).then(function(n){n=n.data,e.versions[t]||(e.versions[t]=[]),0!=n.length&&e.instances.push(t);for(var o in n)e.versions[t].push(o),n[o]&&(e.liveVersion[t]=o)},function(t){e.error=r.showError(t)})})},e.selectVersion=function(n){e.selectedVersion=n,e.addNewVersionClicked&&(e.addNewVersionClicked=!1),t.go(".",{instance:e.selectedInstance,version:e.selectedVersion}),e.showFile()},e.clickAddNewVersion=function(){e.addNewVersionClicked=!0,e.showBaseFile()},e.showFile=function(){e.selectedInstance&&e.selectedVersion&&o.files.getFileContent(n.domain,e.selectedInstance,e.service,e.selectedVersion,n.file).then(function(t){e.fileContents=t.data,e.fileVersion=t.headers("X-Dash-Version")},function(t){e.error=r.showError(t)})},e.showBaseFile=function(){e.selectedInstance&&o.files.getBaseFile(n.domain,e.service,n.file).then(function(t){e.fileContents=t.data,e.fileVersion=t.headers("X-Dash-Version")},function(t){e.error=r.showError(t)})},e.createVersion=function(t){return e.contentsChanged&&(request.data=e.fileContents),o.files.createVersion(n.domain,e.selectedInstance,e.service,t,n.file,e.fileVersion).success(function(){e.instance.versions.push(t),e.selectVersion(t),e.contentsChanged=!1,s.success("Successfully created")}).error(function(e){r.showError(e)})},e.saveFile=function(){return e.fileContents?e.addNewVersionClicked?void a.open({animation:!0,templateUrl:"app/modules/configurations/services/state/files/new-version-modal.html",controller:"NewVersionController",size:"sm",resolve:{createVersion:function(){return e.createVersion}}}):void o.files.saveFile(n.domain,e.selectedInstance,e.service,e.selectedVersion,n.file,e.fileVersion,e.fileContents).then(function(t){e.fileVersion=t.headers("X-Dash-Version"),e.contentsChanged=!1,s.success("Saved successfully")},function(){e.loading=!1}):void 0},e.cloneFile=function(){a.open({animation:!0,templateUrl:"app/modules/configurations/services/state/files/files-view/files-clone-modal.html",controller:"FilesCloneController",resolve:{instance:function(){return e.selectedInstance},version:function(){return e.selectedVersion},instances:function(){return e.instance.instances},clone:function(){return e._cloneFile}}})},e._cloneFile=function(a,r){var c=i.defer();return o.files.cloneFile(n.domain,e.selectedInstance,e.service,e.selectedVersion,n.file,e.fileContents).then(function(){c.resolve(),s.success("Cloned successfully"),e.loadInstance().then(function(){t.go(".",{instance:r,version:a})})},function(t){c.reject();var n=t?t.error:"unknown server error";s.error("Can't load data: "+n),e.loading=!1}),c.promise},e.deleteFile=function(){a.open({animation:!0,templateUrl:"app/modules/configurations/services/state/files/files-view/files-delete-modal.html",controller:"FilesDeleteController",resolve:{instance:function(){return e.selectedInstance},version:function(){return e.selectedVersion},fileName:function(){return e.fileName},_delete:function(){return e._deleteFile}}})},e._deleteFile=function(){var a=i.defer();return o.files.deleteFile(n.domain,e.selectedInstance,e.service,e.selectedVersion,n.file,e.fileVersion).then(function(){a.resolve(),s.success("Deleted successfully"),e.loadInstance().then(function(){t.go(".")})},function(t){a.reject();var n=t.data?t.data.error:"unknown server error";s.error("Can't load data: "+n),e.loading=!1}),a.promise},e.isInstanceActive=function(t){return t==e.selectedInstance},e.isVersionActive=function(t){return e.addNewVersionClicked?!1:t==e.selectedVersion},e.isVersionLive=function(t){return t?t==e.liveVersion[e.selectedInstance]:!1},e.isLive=function(t,n){return e.instance&&n&&t&&e.instance.live[t]&&e.instance.live[t][e.fileName]?n!=e.instance.live[t][e.fileName]:!1},e.makeLive=function(t,a){o.files.makeVersionLive(n.domain,t,e.service,a,n.file).then(function(){s.success("Live version for "+t+" has been changed."),e.liveVersion[e.selectedInstance]=a},function(e){var t=e?e.error:"unknown server error";s.error("Can't load data: "+t)})},e.fileName=n.file,e.selectedInstance=n.instance,e.selectedVersion=n.version,e.fileContents="",e.$watch("service",function(t){t&&e.showFile()})}function t(e,t,n,o,a,i){e.newVersionName="",e.version=o,e.instance=n,e.instances=a,e.targetInstance="",e.ok=function(){e.newVersionName&&e.targetInstance&&i(e.newVersionName,e.targetInstance)["finally"](function(){t.close()})},e.cancel=function(){t.dismiss("cancel")}}function n(e,t,n,o,a,i){e.version=o,e.instance=n,e.fileName=a,e.ok=function(){i()["finally"](function(){t.close()})},e.cancel=function(){t.dismiss("cancel")}}function o(e,t,n){e.ok=function(o){e.versionName&&(e.event=o,$(o.target).button("loading"),t(e.versionName).success(function(){n.close()}).error(function(){$(e.event.target).button("reset")}))},e.cancel=function(){n.dismiss("cancel")}}e.$inject=["$scope","$state","$stateParams","configurationService","$modal","$q","errorHandler","Notification"],t.$inject=["$scope","$modalInstance","instance","version","instances","clone"],n.$inject=["$scope","$modalInstance","instance","version","fileName","_delete"],o.$inject=["$scope","createVersion","$modalInstance"],angular.module("qorDash.configurations.services.state.files.files-view").controller("FilesViewController",e).controller("FilesCloneController",t).controller("FilesDeleteController",n).controller("NewVersionController",o)}(),function(){"use strict";function e(e){e.state("app.manage.settings.authentication.domain",{url:"/:authDomain",templateUrl:"app/modules/manage/settings/authentication/domain/domain.html",controller:"AuthenticationDomainController"})}var t=angular.module("qorDash.manage.settings.authentication.domain",["ui.router"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a){function i(){e.$watch("token",function(o){o&&t.getDomainInfo(a.authDomain,o).then(function(t){e.domain=t.data},function(e){n.showError(e)})})}e.loadDomain=i,i(),o.then(function(){e.token=o.$$state.value})}angular.module("qorDash.manage.settings.authentication.domain").controller("AuthenticationDomainController",e),e.$inject=["$scope","authenticationService","errorHandler","currentUser","$stateParams"]}(),function(){"use strict";function e(e){e.state("app.docker.domain.dockers.menu",{url:"/:dockerId",templateUrl:"app/modules/docker/domain/dockers/menu/menu.html",controller:"DockerMenuController",authenticate:!0})}var t=angular.module("qorDash.docker.domain.dockers.menu",["ui.router","qorDash.docker.domain.dockers.menu.containers","qorDash.docker.domain.dockers.menu.summary","qorDash.docker.domain.dockers.menu.images","qorDash.docker.domain.dockers.menu.info"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t){e.$watch("dockers",function(n){n&&(e.docker=n[t.dockerId])}),e.dockerId=t.dockerId}angular.module("qorDash.docker.domain.dockers.menu").controller("DockerMenuController",e);e.$inject=["$scope","$stateParams","$http","API_URL","$rootScope"]}(),function(){"use strict";function e(e){e.state("app.configurations.services.state.packages",{url:"/packages",templateUrl:"app/modules/configurations/services/state/packages/packages.html",controller:"PackagesController"})}var t=angular.module("qorDash.configurations.services.state.packages",["ui.router"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a,i){Object.filter=function(e,t){var n;for(n in e)if(e.hasOwnProperty(n)&&t(n))return e[n]},e.checked={},o.get(a+"/v1/pkg/"+n.domain+"/").then(function(n){if(e.service=n.data[t.params.service],e.instances=e.service.instances,e.instances.forEach(function(t){e.saveAvailableHelper++,e.checked[t]=!0}),t.params.instances){for(var o in e.checked)e.checked[o]=!1;t.params.instances.split(",").forEach(function(t){"undefined"!=e.checked[t]&&(e.checked[t]=!0,e.saveAvailableHelper++)})}},function(t){e.error=i.showError(response.data,t.status)}),e.saveAvailableHelper=0,e.changeState=function(t){t?e.saveAvailableHelper++:e.saveAvailableHelper--},e.show=function(){var n=[];for(var o in e.checked)e.checked[o]&&n.push(o);n.length>0&&t.go("app.configurations.services.state.packages.editor",{instances:n})}}e.$inject=["$scope","$state","$stateParams","$http","API_URL","errorHandler"],angular.module("qorDash.configurations.services.state.packages").controller("PackagesController",e)}(),function(){"use strict";function e(e){e.state("app.configurations.services.state.instances",{url:"/instances",templateUrl:"app/modules/configurations/services/state/instances/instances.html",controller:"InstancesController",authenticate:!0})}var t=angular.module("qorDash.configurations.services.state.instances",["ui.router"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a){Object.filter=function(e,t){var n;for(n in e)if(e.hasOwnProperty(n)&&t(n))return e[n]},e.checked={},o.loadEnv(n.domain).then(function(n){if(e.service=n.data[t.params.service],e.instances=e.service.instances,e.instances.forEach(function(t){e.saveAvailableHelper++,e.checked[t]=!0}),t.params.instances){for(var o in e.checked)e.checked[o]=!1;t.params.instances.split(",").forEach(function(t){"undefined"!=e.checked[t]&&(e.checked[t]=!0,e.saveAvailableHelper++)})}},function(t){e.error=a.showError(t)}),e.saveAvailableHelper=0,e.changeState=function(t){t?e.saveAvailableHelper++:e.saveAvailableHelper--},e.show=function(){var n=[];for(var o in e.checked)e.checked[o]&&n.push(o);n.length>0&&t.go("app.configurations.services.state.instances.editor",{instances:n})}}e.$inject=["$scope","$state","$stateParams","configurationService","errorHandler"],angular.module("qorDash.configurations.services.state.instances").controller("InstancesController",e)}(),function(){"use strict";function e(e){e.state("app.configurations.services.state.files",{url:"/files",templateUrl:"app/modules/configurations/services/state/files/files.html",controller:"FilesController",authenticate:!0})}var t=angular.module("qorDash.configurations.services.state.files",["ui.router"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a,i){e.$watch("domains",function(){e.domains&&(e.domain=e.domains.filter(function(e){return e.id==n.domain})[0])}),e.openNewFileModal=function(){a.open({animation:!0,templateUrl:"app/modules/configurations/services/state/files/new-file-modal.html",controller:"NewFileController",size:"lg",resolve:{createFile:function(){return e.createFile}}})},e.createFile=function(a,r){return t.files.createFile(n.domain,n.service,a,r).success(function(){e.instance.objects.push(a),i.success("Successfully created")}).error(function(e,t){o.showError(e,t)})},e.loadInstance=function(){t.loadInstance(n.domain).success(function(t){e.instance=t[n.service],e.service=n.service},function(t){e.error=o.showError(t.data,t.status)})},e.loadInstance()}function t(e,t,n){e.ok=function(o){e.fileName&&e.fileContent&&(e.event=o,$(o.target).button("loading"),t(e.fileName,e.fileContent).success(function(){n.close()}).error(function(){$(e.event.target).button("reset")}))},e.cancel=function(){n.dismiss("cancel")}}e.$inject=["$scope","configurationService","$stateParams","errorHandler","$modal","Notification"],t.$inject=["$scope","createFile","$modalInstance"],angular.module("qorDash.configurations.services.state.files").controller("FilesController",e).controller("NewFileController",t)}(),function(){"use strict";function e(e){e.state("app.manage.settings.authentication",{url:"/authentication",templateUrl:"app/modules/manage/settings/authentication/authentication.html",controller:"AuthenticationSettingsController"})}var t=angular.module("qorDash.manage.settings.authentication",["ui.router","qorDash.manage.settings.authentication.domain"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o){function a(){e.$watch("token",function(o){o&&t.getDomains(o).then(function(t){return!t||t.data.error?void(e.error=n.showError(t)):void(e.domains=t.data)},function(t){e.error=n.showError(t)})})}e.loadDomains=a,a(),o.then(function(){e.token=o.$$state.value})}angular.module("qorDash.manage.settings.authentication").controller("AuthenticationSettingsController",e),e.$inject=["$scope","authenticationService","errorHandler","currentUser"]}(),function(){"use strict";function e(e){e.state("app.manage.accounts.account",{url:"/:id",templateUrl:"app/modules/manage/accounts/account/account.html",controller:"AccountController",authenticate:!0})}var t=angular.module("qorDash.manage.accounts.account",["ui.router"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e){e.state("app.manage.accounts",{url:"/accounts",templateUrl:"app/modules/manage/accounts/accounts.html",controller:"AccountsController",controllerAs:"vm",authenticate:!0})}var t=angular.module("qorDash.manage.accounts",["ui.router"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a){a.then(function(){e.token=a.$$state.value});var i=n.id;e.$watch("token",function(n){n&&t.getAccountById(i,n).then(function(t){e.account=t.data},function(t){e.error=o.showError(t)})})}angular.module("qorDash.manage.accounts").controller("AccountController",e),e.$inject=["$scope","accountsService","$stateParams","errorHandler","currentUser"]}(),function(){"use strict";function e(e){e.state("app.docker.domain.dockers",{url:"/:instance",templateUrl:"app/modules/docker/domain/dockers/dockers.html",controller:"DockersController",authenticate:!0})}var t=angular.module("qorDash.docker.domain.dockers",["ui.router","qorDash.docker.domain.dockers.menu"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t){e.state("app.docker",{url:"/docker",views:{"main@":{templateUrl:"app/modules/docker/docker.html",controller:"DockerController"}},authenticate:!0}),t.config("docker",{title:"Docker",nav:3,content:'<span ui-sref="app.docker" qor-sidebar-group-heading="Docker" data-icon-class="fa fa-docker"></span>'})}function t(e,t,n,o){n.endpoint=o,e.$on("$stateChangeSuccess",function(e,o){if("docker"===o.name.split(".")[1]){var a=t.path().match(/docker((\/[a-z0-9.]+){1,3})/);a&&a[1]&&n.buildUrl(a[1])}})}angular.module("qorDash.docker",["ui.router","qorDash.docker.domain","dockerui"]).config(e).run(t),e.$inject=["$stateProvider","$qorSidebarProvider"],t.$inject=["$rootScope","$location","Settings","DOCKER_ENDPOINT"]}(),function(){"use strict";function e(e,t,n,o,a){var i=t.domain,r=t.instance;e.instance=r;var s=o+"/v1/dockerapi/"+i+"/"+r+"/";console.log(s),n.get(s).then(function(t){e.dockers=t.data},function(t){e.error=a.showError(t)})}angular.module("qorDash.docker").controller("DockersController",e);e.$inject=["$scope","$stateParams","$http","API_URL","errorHandler"]}(),function(){"use strict";function e(e){e.state("app.configurations.services.state",{url:"/:service",templateUrl:"app/modules/configurations/services/state/state.html"})}var t=angular.module("qorDash.configurations.services.state",["ui.router"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e){e.state("app.orchestrate.domain.instance.history.option",{url:"/:opt_id",templateUrl:"app/modules/orchestrate/option/option.html",controller:"OrchestrateOptionController",authenticate:!0})}var t=angular.module("qorDash.orchestrate.domain.instance.history.option",["ui.router"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t){e.state("app.orchestrate",{url:"/orchestrate",views:{"main@":{templateUrl:"app/modules/orchestrate/orchestrate.html",controller:"OrchestrateController"}},authenticate:!0}),t.config("orchestrate",{title:"Config",nav:6,content:'<span ui-sref="app.orchestrate" qor-sidebar-group-heading="Orchestrate" data-icon-class="fa fa-building"></span>'})}var t=angular.module("qorDash.orchestrate",["ui.router","qorDash.orchestrate.domain","qorDash.orchestrate.domain.instance","qorDash.orchestrate.domain.instance.history","qorDash.orchestrate.domain.instance.history.option"]);t.config(e),e.$inject=["$stateProvider","$qorSidebarProvider"]}(),function(){"use strict";function e(e,t,n,o,a,i){e.title=t.opt;var r=function(e){return{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()},s=t.id,c=t.inst,l=t.opt,d=t.opt_id,u=function(e,t){switch(r(e)){case"string":return'<div class="form-group" > <label class="col-md-4 control-label" for="input-'+t+'">'+t+'</label><div class="col-md-4"><input required="required" id="input-'+t+'" name="input-'+t+'" type="text" value="'+e+'" class="form-control input-md"></div></div>';case"number":return'<div class="form-group" > <label class="col-md-4 control-label" for="input-'+t+'">'+t+'</label><div class="col-md-4"><input required="required" id="input-'+t+'" name="input-'+t+'" type="text" value="'+e+'" class="form-control input-md"></div></div>';case"boolean":var n=e?"checked":"";return'<div class="form-group" > <label class="col-md-4 control-label" for="input-'+t+'">'+t+'</label><div class="col-md-4"><input class="new-checkbox" id="input-'+t+'" name="input-'+t+'" type="checkbox" '+n+'><label for="input-'+t+'"></label></div></div>'}};"new"==d?e.$watch("workflows",function(){if(e.$parent.$parent.workflows&&(e.workflow=e.$parent.$parent.workflows.filter(function(e){return e.name==t.opt})[0],e.workflow))for(var n in e.workflow.default_input){var o=e.workflow.default_input[n];$("#dynamic-form").append(u(o,n))}}):n.loadOption(s,c,l,d).then(function(t){e.workflow=t.data;for(var n in e.workflow.context){var o=e.workflow.context[n];$("#dynamic-form").append(u(o,n))}},function(t){e.error=i.showError(t)}),e.sendMessage=function(){if($("#sendMessageButton").button("loading"),e.workflow.model){var t=a+"/v1/ws/orchestrate/"+s+"/"+c+"/"+l+"/"+d;$("#timelineContainer").html(o('<div ql-widget="Timeline" ws-url="\''+t+"'\"></div>")(e)),$("#sendMessageButton").button("reset")}else{var i={};for(var r in e.workflow.default_input)i[r]=$("#input-"+r).val();n.loadLogUrl(e.workflow.activate_url,i).then(function(t){$("#timelineContainer").html(o('<div ql-widget="Timeline" ws-url="\''+a+t.data.log_ws_url+"'\"></div>")(e)),$("#sendMessageButton").button("reset")})}}}angular.module("qorDash.orchestrate"),e.$inject=["$scope","$stateParams","orchestrateService","$compile","WS_URL","errorHandler"],angular.module("qorDash.orchestrate").controller("OrchestrateOptionController",e)}(),function(){"use strict";function e(e){e.state("app.orchestrate.domain.instance",{url:"/:inst",templateUrl:"app/modules/orchestrate/instance/instance.html",controller:"OrchestrateInstanceController",authenticate:!0})}var t=angular.module("qorDash.orchestrate.domain.instance",["ui.router"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a){e.title=t.inst,e.workflows=[],o.loadInstances(t.id,t.inst).then(function(t){e.workflows=t.data},function(t){e.error=a.showError(t)})}angular.module("qorDash.orchestrate"),e.$inject=["$scope","$stateParams","$http","orchestrateService","errorHandler"],angular.module("qorDash.orchestrate").controller("OrchestrateInstanceController",e)}(),function(){"use strict";function e(e){e.state("app.orchestrate.domain.instance.history",{url:"/:opt",templateUrl:"app/modules/orchestrate/history/history.html",controller:"OrchestrateHistoryController",authenticate:!0})}var t=angular.module("qorDash.orchestrate.domain.instance.history",["ui.router"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o){n.loadHistory(t.id,t.inst,t.opt).then(function(t){e.previousCalls=t.data},function(t){e.error=o.showError(t)})}angular.module("qorDash.orchestrate"),e.$inject=["$scope","$stateParams","orchestrateService","errorHandler"],angular.module("qorDash.orchestrate").controller("OrchestrateHistoryController",e)}(),function(){"use strict";function e(e){e.state("app.orchestrate.domain",{url:"/:id",templateUrl:"app/modules/orchestrate/domain/domain.html",controller:"OrchestrateDomainController",authenticate:!0})}var t=angular.module("qorDash.orchestrate.domain",["ui.router"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a,i){i.load(t.id).then(function(t){e.domain=t.data},function(t){e.error=a.showError(t)})}angular.module("qorDash.orchestrate"),e.$inject=["$scope","$stateParams","$http","API_URL","errorHandler","domainLoader"],angular.module("qorDash.orchestrate").controller("OrchestrateDomainController",e)}(),function(){"use strict";function e(e){e.state("app.manage.settings",{url:"/settings",templateUrl:"app/modules/manage/settings/settings.html",controller:"SettingsController",authenticate:!0})}var t=angular.module("qorDash.manage.settings",["ui.router","qorDash.manage.settings.authentication"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(){}angular.module("qorDash.manage.settings").controller("SettingsController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(e,t,n,o,a,i){function r(e,a,i,r){return a?t.createGoogleAccount(e,a,d.token).then(function(e){d.accounts.push({id:e.data.id,primary:e.data}),o.success("Successfully created")},function(e){d.error=n.showError(e)}):t.createAccount(e,i,r,d.token).then(function(e){d.accounts.push({id:e.data.id,primary:e.data}),o.success("Successfully created")},function(e){d.error=n.showError(e)})}function s(){a.open({animation:!0,templateUrl:"app/modules/manage/accounts/new-user-modal.html",controller:"NewUserController",controllerAs:"vm",resolve:{accounts:function(){return d.accounts},addUser:function(){return d.addUser}}})}function c(){t.getAccounts(d.token).then(function(e){d.accounts=e.data},function(e){d.error=n.showError(e)})}function l(){i.then(function(e){d.token=e})}var d=this;d.newUser=s,d.addUser=r,d.accounts=[],l(),e.$watch("vm.token",function(){d.token&&c()})}function t(e,t,n){function o(){(i.username&&i.email||i.username&&i.password&&i.custom_object)&&t(i.username,i.email,i.password,i.custom_object).then(function(){n.close()})}function a(){n.dismiss("cancel")}var i=this;i.accounts=e,i.ok=o,i.cancel=a}angular.module("qorDash.manage.accounts").controller("AccountsController",e).controller("NewUserController",t),e.$inject=["$scope","accountsService","errorHandler","Notification","$modal","currentUser"],t.$inject=["accounts","addUser","$modalInstance"]}(),function(){"use strict";function e(e){e.state("app.domains.domain.env.resources",{url:"/resources",templateUrl:"app/modules/domains/resources/resources.html",authenticate:!0})}var t=angular.module("qorDash.domains.env.resources",["ui.router","ui.layout"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e){e.state("app.domains.domain.env.network.node.logs",{url:"/logs",templateUrl:"app/modules/domains/node-logs/node-logs.html",authenticate:!0})}var t=angular.module("qorDash.domains.env.network.note.logs",["ui.router","ui.layout"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t){e.state("app.domains",{url:"/domains",views:{"main@":{templateUrl:"app/modules/domains/domains.html",controller:"DomainsController"}},authenticate:!0}),t.config("domains",{title:"Environments",nav:2,content:'<span ui-sref="app.domains" qor-sidebar-group-heading="Domains" data-icon-class="fa fa-cloud"></span>',controller:"DomainsSidebarController"})}var t=angular.module("qorDash.domains",["ui.router","ui.layout","qorDash.widget","qorDash.widget.domain_stat","qorDash.widget.network","qorDash.widget.domain_details","qorDash.widget.container","qorDash.domains.domain","qorDash.domains.env","qorDash.domains.env.network","qorDash.domains.env.network.node","qorDash.domains.env.network.note.logs","qorDash.domains.env.resources","log_details"]);t.config(e),e.$inject=["$stateProvider","$qorSidebarProvider"]}(),function(){"use strict";function e(e,t){return{link:function(n,o){$(o).bind("click",function(){var n=$("#terminal"),o=n.terminal(),a=o.get_output(),i=e.open("/#log-details","mywin","width=100");i.height=600,i.currentData=a,i.url=n.parent().attr("ws-url"),t.go("^")
})}}}e.$inject=["$window","$state","$compile"],angular.module("qorDash.domains").directive("logNewWindow",e)}(),function(){"use strict";function e(e){e.state("log_details",{url:"/log-details",templateUrl:"app/modules/domains/node-logs/log-details.html",authenticate:!1})}var t=angular.module("log_details",["ui.router","ui.layout"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e){e.state("app.domains.domain.env.network.node",{url:"/:depth/:node",templateUrl:"app/modules/domains/node/node.html",controller:"DomainNodeController",authenticate:!0})}var t=angular.module("qorDash.domains.env.network.node",["ui.router","ui.layout"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t){function n(e,t,n){function o(e,t,n){var i,r,s;if(a++,t==e.name&&n==a)return e;if(!e._children)return void 0;for(i=0;i<e._children.length;i++)if(r=e._children[i],s=o(r,t,n),a--,s)return s}var a=-1;return o(e,t,n)}e.$watch("networkData",function(o){o&&(e.node=n(o,t.node,parseInt(t.depth)))})}e.$inject=["$scope","$stateParams"],angular.module("qorDash.domains").controller("DomainNodeController",e)}(),function(){"use strict";function e(e){e.state("app.domains.domain.env.network",{url:"/network",templateUrl:"app/modules/domains/network/network.html",authenticate:!0})}var t=angular.module("qorDash.domains.env.network",["ui.router","ui.layout"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e){e.state("app.domains.domain.env",{url:"/:env",templateUrl:"app/modules/domains/environment/environment.html",controller:"DomainEnvironmentController",authenticate:!0})}var t=angular.module("qorDash.domains.env",["ui.router","ui.layout"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n){e.environment={},e.environment.name=t.env,e.setNetworkData=function(t){e.networkData=t},e.eventsWsUrl=n+"/v1/events"}function t(){return{link:function(e,t){e.$watch(function(){return t.children().height()},function(e,n){e!==n&&$(t).scrollTop(t.children().height())})}}}e.$inject=["$scope","$stateParams","WS_URL"],angular.module("qorDash.domains").controller("DomainEnvironmentController",e).directive("autoScroll",t)}(),function(){"use strict";function e(e){e.state("app.domains.domain",{url:"/:id",templateUrl:"app/modules/domains/domain/domain.html",controller:"DomainController",authenticate:!0})}var t=angular.module("qorDash.domains.domain",["ui.router","ui.layout"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o){o.load(t.id).then(function(t){e.domain=t.data},function(t){e.error=n.showError(t)})}angular.module("qorDash.domains").controller("DomainController",e),e.$inject=["$scope","$stateParams","errorHandler","domainLoader"]}(),function(){"use strict";function e(e){e.state("app.docker.domain",{url:"/:domain",templateUrl:"app/modules/docker/domain/domain.html",controller:"DockerDomainController",authenticate:!0})}var t=angular.module("qorDash.docker.domain",["ui.router","qorDash.docker.domain.dockers"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o){o.load(t.domain).then(function(t){e.domain=t.data},function(t){e.error=n.showError(t)})}angular.module("qorDash.docker").controller("DockerDomainController",e),e.$inject=["$scope","$stateParams","errorHandler","domainLoader"]}(),function(){"use strict";angular.module("dockerui.viewmodel",[]).factory("DockerViewModel",function(){function e(e){this.Id=e.Id,this.Tag=e.Tag,this.Repository=e.Repository,this.Created=e.Created,this.Checked=!1,this.RepoTags=e.RepoTags,this.VirtualSize=e.VirtualSize}function t(e){this.Id=e.Id,this.Image=e.Image,this.Command=e.Command,this.Created=e.Created,this.SizeRw=e.SizeRw,this.Status=e.Status,this.Checked=!1,this.Names=e.Names}return{image:function(t){return new e(t)},container:function(e){return new t(e)}}})}(),function(){"use strict";angular.module("dockerui.services",["ngResource"]).factory("Container",["$resource","Settings",function(e,t){return e(t.endpoint+"/:domain/:instance/:dockerId/containers/:id/:action",{name:"@name",domain:"@domain",instance:"@instance",dockerId:"@dockerId"},{query:{method:"GET",params:{all:0,action:"json"},isArray:!0},get:{method:"GET",params:{action:"json"}},start:{method:"POST",params:{id:"@id",action:"start"}},stop:{method:"POST",params:{id:"@id",t:5,action:"stop"}},restart:{method:"POST",params:{id:"@id",t:5,action:"restart"}},kill:{method:"POST",params:{id:"@id",action:"kill"}},pause:{method:"POST",params:{id:"@id",action:"pause"}},unpause:{method:"POST",params:{id:"@id",action:"unpause"}},changes:{method:"GET",params:{action:"changes"},isArray:!0},create:{method:"POST",params:{action:"create"}},remove:{method:"DELETE",params:{id:"@id",v:0}},rename:{method:"POST",params:{id:"@id",action:"rename"},isArray:!1},stats:{method:"GET",params:{id:"@id",stream:!1,action:"stats"},timeout:2e3}})}]).factory("Image",["$resource","Settings",function(e,t){return e(t.endpoint+"/:domain/:instance/:dockerId/images/:id/:action",{domain:"@domain",instance:"@instance",dockerId:"@dockerId"},{query:{method:"GET",params:{all:0,action:"json"},isArray:!0},get:{method:"GET",params:{action:"json"}},search:{method:"GET",params:{action:"search"}},history:{method:"GET",params:{action:"history"},isArray:!0},create:{method:"POST",isArray:!0,transformResponse:[function(e){var t=e.replace(/\n/g," ").replace(/\}\W*\{/g,"}, {");return angular.fromJson("["+t+"]")}],params:{action:"create",fromImage:"@fromImage",repo:"@repo",tag:"@tag",registry:"@registry"}},insert:{method:"POST",params:{id:"@id",action:"insert"}},push:{method:"POST",params:{id:"@id",action:"push"}},tag:{method:"POST",params:{id:"@id",action:"tag",force:0,repo:"@repo"}},remove:{method:"DELETE",params:{id:"@id"},isArray:!0}})}]).factory("Docker",["$resource","Settings",function(e,t){return e(t.endpoint+"/:domain/:instance/:dockerId/version",{domain:"@domain",instance:"@instance",dockerId:"@dockerId"},{get:{method:"GET"}})}]).factory("Auth",["$resource","Settings",function(e,t){return e(t.endpoint+"/:domain/:instance/:dockerId/auth",{domain:"@domain",instance:"@instance",dockerId:"@dockerId"},{get:{method:"GET"},update:{method:"POST"}})}]).factory("System",["$resource","Settings",function(e,t){return e(t.endpoint+"/:domain/:instance/:dockerId/info",{domain:"@domain",instance:"@instance",dockerId:"@dockerId"},{get:{method:"GET"}})}]).factory("ContainerCommit",["$http","Settings",function(e,t){return{commit:function(n,o){e({method:"POST",url:t.url+"/commit",params:{container:n.id,repo:n.repo}}).success(o).error(function(e){console.log(error,e)})}}}]).factory("ContainerLogs",["$http","Settings",function(e,t){return{get:function(n,o,a){e({method:"GET",url:t.url+"/containers/"+n+"/logs",params:{stdout:o.stdout||0,stderr:o.stderr||0,timestamps:o.timestamps||0,tail:o.tail||"all"}}).success(a).error(function(e,t){console.log(e,t)})}}}]).factory("ContainerTop",["$http","Settings",function(e,t){return{get:function(n,o,a){e({method:"GET",url:t.url+"/containers/"+n+"/top",params:{ps_args:o.ps_args}}).success(a)}}}]).provider("Settings",[function(){function e(e){var t=e?e.substr(1).split("/"):null;return t?{domain:t[0],instance:t[1],dockerId:t[2]}:{}}this.displayAll=!1,this.firstLoad=!0,this.port="",this.endpoint="",this.url=this.endpoint,this.urlParams={},this.buildUrl=function(t){t=t||"",this.url=this.endpoint+t,this.urlParams=e(t)},this.$get=["$injector","$location",function(){return{rawUrl:this.endpoint+this.port+"/"+this.version,endpoint:this.endpoint,uiVersion:this.uiVersion,version:this.version,url:this.url,urlParams:this.urlParams,displayAll:this.displayAll,firstLoad:this.firstLoad,buildUrl:this.buildUrl}}]}]).factory("ViewSpinner",function(){var e=new Spinner,t=document.getElementById("view");return{spin:function(){e.spin(t)},stop:function(){e.stop()}}}).factory("Messages",["$rootScope",function(){return{send:function(){},error:function(){}}}]).factory("Dockerfile",["Settings",function(e){var t=e.rawUrl+"/build";return{build:function(e,n){var o=new FormData,a=new Blob([e],{type:"text/text"});o.append("Dockerfile",a);var i=new XMLHttpRequest;i.onload=n,i.open("POST",t),i.send(o)}}}]).factory("LineChart",["Settings",function(){return{build:function(e,t,n){for(var o=new Chart($(e).get(0).getContext("2d")),a={},i=0;i<t.length;i++){var r=t[i],s=n(r),c=a[s];void 0===c&&(c=0),c+=1,a[s]=c}var l=[];t=[];var d=Object.keys(a);for(i=d.length-1;i>-1;i--){var u=d[i];l.push(u),t.push(a[u])}var m={fillColor:"rgba(151,187,205,0.5)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff",data:t};o.Line({labels:l,datasets:[m]},{scaleStepWidth:1,pointDotRadius:1,scaleOverride:!0,scaleSteps:l.length})}}}])}(),function(){"use strict";angular.module("dockerui",["dockerui.services","dockerui.filters","dockerui.viewmodel"])}(),function(){"use strict";angular.module("dockerui.filters",[]).filter("truncate",function(){return function(e,t,n){return isNaN(t)&&(t=10),void 0===n&&(n="..."),e.length<=t||e.length-n.length<=t?e:String(e).substring(0,t-n.length)+n}}).filter("statusbadge",function(){return function(e){return"Ghost"===e?"important":-1!==e.indexOf("Exit")&&"Exit 0"!==e?"warning":"success"}}).filter("getstatetext",function(){return function(e){return void 0===e?"":e.Ghost&&e.Running?"Ghost":e.Running&&e.Paused?"Running (Paused)":e.Running?"Running":"Stopped"}}).filter("getstatelabel",function(){return function(e){return void 0===e?"":e.Ghost&&e.Running?"label-important":e.Running?"label-success":""}}).filter("humansize",function(){return function(e){var t=["Bytes","KB","MB","GB","TB"];if(0===e)return"n/a";var n=parseInt(Math.floor(Math.log(e)/Math.log(1024)),10),o=e/Math.pow(1024,n),a=1>n?0:n-1;return o.toFixed(a)+" "+t[[n]]}}).filter("containername",function(){return function(e){var t=e.Names[0];return t.substring(1,t.length)}}).filter("repotag",function(){return function(e){if(e.RepoTags&&e.RepoTags.length>0){var t=e.RepoTags[0];return"<none>:<none>"===t&&(t=""),t}return""}}).filter("getdate",function(){return function(e){var t=new Date(1e3*e);return t.toDateString()}}).filter("errorMsg",function(){return function(e){for(var t=0,n="";e[t]&&"string"==typeof e[t];)n+=e[t],t++;return n}})}(),function(){"use strict";angular.module("qorDash.widget",[])}(),function(){"use strict";function e(e,t,n){return{replace:!0,link:function(o,a,i){o.attributes=i,o.$watch(i.wsUrl,function(e){o.wsUrl=e});var r=function(e,a){t("app/widgets/"+e.toLowerCase()+"/"+e.toLowerCase()+".html",!0).then(function(e){a.append(n(e)(o))},function(){})},s=i.qlWidget;s&&(e.hasAccessTo(s)?r(s,a):(a.remove(),a=null))}}}angular.module("qorDash.widget").directive("qlWidget",e),e.$inject=["user","$templateRequest","$compile"]}(),function(){"use strict";angular.module("qorDash.loaders",["qorDash.core","qorDash.auth"])}(),function(){function e(e,t){function n(n,o,a){return e.get(t+"/v1/orchestrate/"+n+"/"+o+"/"+a+"/")}function o(n,o){return e.get(t+"/v1/orchestrate/"+n+"/"+o+"/")}function a(n,o,a,i){return e.get(t+"/v1/orchestrate/"+n+"/"+o+"/"+a+"/"+i)}function i(n,o){var a={method:"POST",url:t+n,headers:{"Content-Type":"application/json"},data:o};return e(a)}return{loadHistory:n,loadInstances:o,loadOption:a,loadLogUrl:i}}angular.module("qorDash.loaders").factory("orchestrateService",e),e.$inject=["$http","API_URL"]}(),function(){function e(e,t,n,o,a){function i(){var i=e.defer();return t({method:"POST",url:n+"/auth",headers:{"Content-Type":"application/json"},data:{username:o,password:a}}).then(function(e){i.resolve(e.data.token)},function(){i.reject()}),i.promise}return{load:i}}angular.module("qorDash.loaders").factory("manageLoader",e),e.$inject=["$q","$http","AUTH_API_URL","AUTH_API_USER","AUTH_API_SECRET"]}(),function(){function e(e,t){function n(){return e.get(t+"/v1/domain/")}return{load:n}}angular.module("qorDash.loaders").factory("domainsLoader",e),e.$inject=["$http","API_URL"]}(),function(){function e(e,t){function n(n){return e.get(t+"/v1/domain/"+n)}return{load:n}}angular.module("qorDash.loaders").factory("domainLoader",e),e.$inject=["$http","API_URL"]}(),function(){function e(e,t){function n(n){var o={method:"GET",url:t+"/v1/conf/"+n+"/",headers:{"Content-Type":"application/json"}};return e(o)}function o(n){return e.get(t+"/v1/env/"+n+"/")}function a(n,o,a,i){var r={method:"POST",url:t+"/v1/conf/"+n+"/"+o+"/"+a,headers:{"Content-Type":"text/plain"},data:i};return e(r)}function i(n,o,a,i,r){var s={method:"GET",url:t+"/v1/conf/"+n+"/"+o+"/"+a+"/"+i+"/"+r,headers:{"Content-Type":"application/json"}};return e(s)}function r(n,o,a,i){var r={method:"GET",url:t+"/v1/conf/"+n+"/"+o+"/"+a+"/"+i+"/",headers:{"Content-Type":"application/json"}};return e(r)}function s(n,o,a){var i={method:"GET",url:t+"/v1/conf/"+n+"/"+o+"/"+a,headers:{"Content-Type":"application/json"}};return e(i)}function c(n,o,a,i,r,s){var c={method:"POST",url:t+"/v1/conf/"+n+"/"+o+"/"+a+"/"+i+"/"+r,headers:{"X-Dash-Version":s}};return e(c)}function l(n,o,a,i,r,s,c){var l={method:"PUT",url:t+"/v1/conf/"+n+"/"+o+"/"+a+"/"+i+"/"+r,headers:{"X-Dash-Version":s},data:c};return e(l)}function d(n,o,a,i,r,s){var c={method:"POST",url:t+"/v1/conf/"+n+"/"+o+"/"+a+"/"+i+"/"+r,headers:{"Content-Type":"text/plain"},data:s};return e(c)}function u(n,o,a,i,r,s){var c={method:"DELETE",url:t+"/v1/conf/"+n+"/"+o+"/"+a+"/"+i+"/"+r,headers:{"X-Dash-Version":s}};return e(c)}function m(n,o,a,i,r){var s={method:"POST",url:t+"/v1/conf/"+n+"/"+o+"/"+a+"/"+i+"/"+r+"/live",headers:{"Content-Type":"application/json"}};return e(s)}return{loadInstance:n,loadEnv:o,files:{createFile:a,getFileContent:i,getVersions:r,getBaseFile:s,createVersion:c,saveFile:l,cloneFile:d,deleteFile:u,makeVersionLive:m}}}angular.module("qorDash.loaders").factory("configurationService",e),e.$inject=["$http","API_URL"]}(),function(){function e(e,t){function n(n){var o={method:"GET",url:t+"/admin/domain/",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}};return e(o)}function o(n,o){var a={method:"GET",url:t+"/admin/domain/"+n,headers:{"Content-Type":"application/json",Authorization:"Bearer "+o}};return e(a)}return{getDomains:n,getDomainInfo:o}}angular.module("qorDash.loaders").factory("authenticationService",e),e.$inject=["$http","AUTH_API_URL"]}(),function(){function e(e,t){function n(n){var o={method:"GET",url:t+"/account/",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}};return e(o)}function o(n,o){var a={method:"GET",url:t+"/account/"+n,headers:{"Content-Type":"application/json",Authorization:"Bearer "+o}};return e(a)}function a(n,o,a){var i={method:"POST",url:t+"/register",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a},data:{identity:{username:n,oauth2_provider:"google.com",oauth2_account_id:o}}};return e(i)}function i(n,o,a,i){var r={method:"POST",url:t+"/register",headers:{"Content-Type":"application/json",Authorization:"Bearer "+i},data:{identity:{username:n,password:o},custom_object:a}};return e(r)}return{getAccounts:n,getAccountById:o,createAccount:i,createGoogleAccount:a}}angular.module("qorDash.loaders").factory("accountsService",e),e.$inject=["$http","AUTH_API_URL"]}(),function(){"use strict";function e(e,t){e.state("app",{url:"/app","abstract":!0,templateUrl:"app/modules/core/app.html"}),t.otherwise(function(e){var t=e.get("$state");t.go("app.dashboard")})}var t=angular.module("qorDash.core",["ui.router","ngAnimate","ngSanitize"]);t.config(e),e.$inject=["$stateProvider","$urlRouterProvider"],angular.createAuthorizedController=function(e,t){var n=t[t.length-1];t[t.length-1]="dataLoader",t.push("user"),t.push(function(){var t=arguments[arguments.length-2],o=arguments[arguments.length-1];if(!o.hasAccessTo(e)&&!o.hasAccessTo(e.replace("Controller","")))throw"Access exception in "+arguments[0];var a=this,i=arguments;t.init(e).then(function(){n.apply(a,i)})});var o={};return o[e]=t,o}}(),function(){"use strict";function e(e,o,a,i,r,s,c){var l={restrict:"ECA",terminal:!0,priority:400,compile:function(){return function(o,a,l){function d(t){return t&&e.$current&&e.$current.locals[t]}function u(e,t){return t.indexOf("@")>=0?t:t+"@"+(e?e.state.name:"")}function m(){return u(null,i(l.horizontalUiView||l.name||"")(o))}function p(e){return""===e.name?m():u(e,"")}function f(e){this._viewName=e,this._locals=d(e)}function h(e,t){e||v.invalidateStates(t)}var g=l.onload||"";a.addClass("qor-container"),o.$on("$stateChangeSuccess",function(e,t,n){h(!1,n._preventAnimation)}),o.$on("$viewContentLoading",function(){h(!1)}),o.$on("$stateChangeSuccess",function(t,o,a,i){e.includes(i)||n(c)}),f.prototype.renderView=function(e,n){var o=this._locals;if(o){var i=this._scope=e.$new(),l=this._element=angular.element(o.$template||"");a.append(l[0]),l.data("$uiView",{name:this._viewName,state:o.$$state});var d=s(l[0]);if(o.$$controller){o.$scope=i;var u=r(o.$$controller,o);o.$$controllerAs&&(i[o.$$controllerAs]=u),l.data("$ngControllerController",u),l.children().data("$ngControllerController",u)}d(i),t(c,n)}this._scope.$emit("$viewContentLoaded"),this._scope.$eval(g)},f.prototype.matchState=function(e){return this._locals===d(e)},f.prototype.tryCreateChildViews=function(e){var t=p({name:this._viewName,state:this._locals.$$state});if(t&&d(t)){var n=this._childStateView=new f(t);n.renderView(this._scope,e),n.tryCreateChildViews(e)}},f.prototype.destroy=function(){this._childStateView&&this._childStateView.destroy(),this._element.remove(),this._scope.$destroy()},f.prototype.invalidateStates=function(e){var t=p({name:this._viewName,state:this._locals.$$state});t?this._childStateView?this._childStateView.matchState(t)?this._childStateView.invalidateStates(e):(this._childStateView.destroy(),this._childStateView=null,this.tryCreateChildViews(e)):this.tryCreateChildViews(e):(this._childStateView&&this._childStateView.destroy(),this._childStateView=null)};var v=new f("");v._scope=o,h(!0)}}};return l}function t(e,t){var n=e(".qor-container"),o=n.find("> .qor-sheet").map(function(){return e(this).width()}).splice(0).reduce(function(e,t){return e+t},0),a=n.width(),i=o-a,r=a-(o-n[0].scrollLeft);0>r&&n.animate({scrollLeft:i},t?0:400)}function n(e){var t=e(".qor-container"),n=t[0].scrollLeft,o=t.find("> .qor-sheet:last-child");if(o.length){var a=o.offset().left,i=e(window).width()<768?0:80;n>0&&0>a-i&&t.animate({scrollLeft:t[0].scrollLeft+(a-i)})}}function o(){function e(e,t){t.addClass("qor-sheet")}function t(e,t){var n=t.$current;e.sheet={close:function(){t.go(n.parent)}}}return t.$inject=["$scope","$state"],{controller:t,link:e}}function a(){return{link:function(e,t){t.addClass("qor-sheet-content")}}}function i(){return{require:"^horizontalUiSheet",transclude:!0,replace:!0,template:'<header class="qor-sheet-header">  <div class="qor-sheet-statusbar">    <div class="qor-sheet-actions">      <button class="qor-sheet-close" ui-sref="^">&times;</button>    </div>    <h5 class="qor-sheet-title">{{title}}</h5>  </div>  <div class="qor-sheet-header-content" ng-transclude></div></header>',scope:{title:"@"}}}angular.module("qorDash.core").directive("horizontalUiView",e).directive("horizontalUiSheet",o).directive("horizontalUiSheetContent",a).directive("horizontalUiSheetHeader",i),e.$inject=["$state","$injector","$uiViewScroll","$interpolate","$controller","$compile","jQuery"],i.$inject=["$compile"]}(),function(){"use strict";function e(e){function t(t){t.find("th").each(function(t,n){e(n).css({width:o[t],height:a[t],padding:"8px",margin:"80px"})})}function n(e){o=[],e.find("th").each(function(e,t){o.push(t.offsetWidth),a.push(t.offsetHeight)})}var o=[],a=[];return{restrict:"A",link:function(o,a){var i,r,s,c,l=!0;r=a.parents("[qor-sidebar-container]").find(".qor-header"),i=a.parents("[horizontal-ui-sheet]").find(".qor-sheet-header"),s=a.parents("[horizontal-ui-sheet]").find("[horizontal-ui-sheet-content]"),s.on("scroll",function(){a.offset().top<i.height()&&l&&(n(a),c=a.clone(),c.addClass("table-fixed-header"),t(c),c.appendTo(i),l=!1),a.offset().top>i.height()&&!l&&(i.find("[table-fixed-header]").remove(),l=!0)}),e(window).on("resize",function(){i.find("[table-fixed-header]").is("thead")&&(n(a),t(i.find("[table-fixed-header]")))})}}}angular.module("qorDash.core").directive("tableFixedHeader",e),e.$inject=["jQuery","$document"]}(),function(){"use strict";function e(e,t,n){function o(e){r.forEach(function(t){t.active&&t!==e&&(t.active=!1)}),e.active=!0}function a(e){e.active?e.active=!1:o(e)}function i(){r.forEach(function(e){e.active=!1})}var r=this.groups=e.groups=n.sortedGroups();e.selectGroup=o,e.toggleGroup=a,e.resetStates=i,e.appTitle=n.getTitle(),e.hasActiveGroup=function(){return r.reduce(function(e,t){return e||t.active},!1)},e.activeGroup=function(){var e;return r.forEach(function(t){t.active&&(e=t)}),e},t.$on("$stateChangeSuccess",i)}function t(e,t){return{restrict:"EA",replace:!0,scope:!0,controller:"QorSidebarController",template:'<nav class="qor-sidebar" ng-class="{ opened: hasActiveGroup() }"><header class="qor-sidebar-groups"><div class="qor-logo"><a href="/"><img src="'+t+'" height="50" width="50"></a></div><ul class="qor-sidebar-nav"><li ng-repeat="group in groups" ng-class="{\'user-label\' : group.title==\'User\'}" ui-sref-active="active" bind-html-compile="group.content" ng-class="{ active: group.active }" ng-click="group.templateUrl && toggleGroup(group)"></li></ul><div class="user-actions" user-actions><div class="user-action" ><div><i class="fa fa-cog"></i></div><span class="group-nav-heading ">Settings</span></div><br><div class="user-action" ui-sref="logout"><div><i class="fa fa-sign-out"></i></div><span class="group-nav-heading ">Logout</span></div></div></header></nav>'}}function n(){return{restrict:"EA",template:'<i class="group-icon" ng-if="iconClass" ng-class="iconClass"></i><span class="group-nav-heading">{{qorSidebarGroupHeading}}</span>',scope:{qorSidebarGroupHeading:"@",iconClass:"@"},link:function(e,t){t.addClass("group-nav")}}}function o(e){return{restrict:"A",link:function(t,n,o){t.$watch(function(){return t.$eval(o.bindHtmlCompile)},function(o){n.html(o),e(n.contents())(t)})}}}function a(){function e(){return Object.keys(n).map(function(e){var t=angular.extend({id:e},n[e]);return t.controller||(t.controller="SidebarStubController"),t})}function t(t){var n=!0;return{sortedGroups:function(){return e().sort(function(e,t){return(e.nav||0)-(t.nav||0)})},isExpanded:function(){return n},showSidebar:function(){n=!0,t.$broadcast("qorSidebarStateChange",n)},hideSidebar:function(){n=!1,t.$broadcast("qorSidebarStateChange",n)},toggleSidebar:function(){n=!n,t.$broadcast("qorSidebarStateChange",n)},getTitle:function(){return o}}}var n={},o="qorio";this.config=function(e,t){if(n.id)throw Error("Group with id="+e+" already exist.");n[e]=t},this.setTitle=function(e){o=e},t.$inject=["$rootScope"],this.$get=t}function i(){return{restrict:"EA",link:function(e,t){if(!t.find("[qor-sidebar]").length)throw Error("qor-sidebar should be defined inside");if(!t.find("[qor-content]").length)throw Error("qor-content should be defined inside");t.find("[qor-content]").addClass("qor-content"),e.$on("qorSidebarStateChange",function(e){t.toggleClass("qor-sidebar-expanded",e)})}}}function r(e){return{restrict:"A",scope:!0,priority:500,compile:function(){return function(t,n,o){var a=e(t.$eval(o.propertyController),{$scope:t});n.data("$ngControllerController",a),n.children().data("$ngControllerController",a)}}}}angular.module("qorDash.core").controller("QorSidebarController",e).controller("SidebarStubController",function(){}).directive("qorSidebarContainer",i).directive("qorSidebar",t).provider("$qorSidebar",a).directive("qorSidebarGroupHeading",n).directive("propertyController",r).directive("bindHtmlCompile",o),e.$inject=["$scope","$rootScope","$qorSidebar","$controller"],t.$inject=["$rootScope","ICON_URL"],o.$inject=["$compile"],r.$inject=["$controller"]}(),function(){"use strict";function e(e){return{restrict:"ECA",terminal:!0,priority:400,link:function(t,n){var o,a=function(e){return e.length&&e.get(0).scrollHeight>e.get(0).clientHeight},i=function(e,t){return e!=t&&t.has(e).length?a(e)?!0:i(e.parent(),t):!1},r=function(e){return!a(e.closest(".qor-sheet-content"))},s=!1,c=!1;n[0].addEventListener("mousewheel",function(t){var a,l=e(t.target);if(!i(l,l.closest(".qor-sheet-content")))return r(l)||s&&c?(e(window).width()>=768&&(n[0].doScroll?n[0].doScroll(t.wheelDelta>0?"left":"right"):(t.wheelDelta||t.detail)>0?n[0].scrollLeft-=20:n[0].scrollLeft+=20,a=!1,c=!0),t.preventDefault()):c=!1,s=!0,clearTimeout(o),o=setTimeout(function(){s=!1,c=!1},400),a})}}}angular.module("qorDash.core").directive("horizontalScroll",e),e.$inject=["jQuery"]}(),function(){"use strict";function e(e){e.state("app.configurations.services",{url:"/:domain",templateUrl:"app/modules/configurations/services/services.html",controller:"ServicesController",authenticate:!0})}var t=angular.module("qorDash.configurations.services",["ui.router"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";function e(e,t,n,o,a){e.$watch("domains",function(){e.domains&&(e.domain=e.domains.filter(function(e){return e.id==n.domain})[0])}),a.load(n.domain).then(function(n){e.services=n.data.services,1==Object.size(e.services)&&"app.configurations.services"==t.current.name&&t.go(".state",{service:e.services[0]})},function(t){e.error=o.showError(t)})}Object.size=function(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n},e.$inject=["$scope","$state","$stateParams","errorHandler","domainLoader"],angular.module("qorDash.configurations.services").controller("ServicesController",e)}(),function(){"use strict";angular.module("qorDash.widget.traffic",[])}(),function(){"use strict";function e(e,t){return{restrict:"EA",scope:{},link:function(n,o,a){e.d3().then(function(e){parseInt(a.margin)||20,parseInt(a.barHeight)||20,parseInt(a.barPadding)||5;n.$watch(function(){return angular.element(t)[0].innerWidth},function(){n.render(n.data)}),n.render=function(){function t(){function o(t){t.x=Math.max(0,Math.min(S-t.width,e.event.x)),t.y=Math.max(0,Math.min($-t.height,e.event.y)),e.select(this).attr("transform","translate("+t.x+","+t.y+")"),i.relayout(),n.selectAll(".node").selectAll("rect").attr("height",function(e){return e.height}),P.attr("d",r)}function s(e){e.children.forEach(function(e){e.state="contained",e.parent=this,e._parent=null,s(e)},e)}function m(e){e.state="expanded",e.children.forEach(function(e){e.state="collapsed",e._parent=this,e.parent=null,s(e)},e)}function p(e){e.state="collapsed",s(e)}function f(){P.style("stroke",h).style("marker-end",function(){return"url(#arrowHead)"}).transition().duration(C).style("opacity",u.LINK_DEFAULT),M.selectAll("rect").style("fill",function(e){return e.color=c(e.type.replace(/ .*/,"")),e.color}).style("stroke",function(t){return e.rgb(c(t.type.replace(/ .*/,""))).darker(.1)}).style("fill-opacity",u.NODE_DEFAULT),M.filter(function(e){return"collapsed"===e.state}).transition().duration(C).style("opacity",u.NODE_DEFAULT)}function b(e){q(2*C),E(),"collapsed"===e.state?m(e):p(e),i.relayout(),t(),P.attr("d",r),f()}function x(e){P.filter(function(t){return t.source===e}).style("marker-end",function(){return"url(#arrowHeadInflow)"}).style("stroke",v).style("opacity",u.LINK_DEFAULT),P.filter(function(t){return t.target===e}).style("marker-end",function(){return"url(#arrowHeadOutlow)"}).style("stroke",g).style("opacity",u.LINK_DEFAULT)}function T(e){P.filter(function(t){return t.source!==e&&t.target!==e}).style("marker-end",function(){return"url(#arrowHead)"}).transition().duration(C).style("opacity",u.LINK_FADED),M.filter(function(t){return t.name===e.name?!1:!i.connected(t,e)}).transition().duration(C).style("opacity",u.NODE_FADED)}var P,V,M,L,_,z;P=n.select("#links").selectAll("path.link").data(i.visibleLinks(),function(e){return e.id}),P.transition().duration(C).style("stroke-WIDTH",function(e){return Math.max(1,e.thickness)}).attr("d",r).style("opacity",u.LINK_DEFAULT),P.exit().remove(),V=P.enter().append("path").attr("class","link").style("fill","none"),V.on("mouseenter",function(t){d||(A().select(".value").text(function(){return t.direction>0?t.source.name+" → "+t.target.name+"\n"+D(t.value):t.target.name+" ← "+t.source.name+"\n"+D(t.value)}),e.select(this).style("stroke",h).transition().duration(C/2).style("opacity",u.LINK_HIGHLIGHT))}),V.on("mouseleave",function(){d||(E(),e.select(this).style("stroke",h).transition().duration(C/2).style("opacity",u.LINK_DEFAULT))}),V.sort(function(e,t){return t.thickness-e.thickness}).classed("leftToRight",function(e){return e.direction>0}).classed("rightToLeft",function(e){return e.direction<0}).style("marker-end",function(){return"url(#arrowHead)"}).style("stroke",h).style("opacity",0).transition().delay(C).duration(C).attr("d",r).style("stroke-WIDTH",function(e){return Math.max(1,e.thickness)}).style("opacity",u.LINK_DEFAULT),M=n.select("#nodes").selectAll(".node").data(i.collapsedNodes(),function(e){return e.id}),M.transition().duration(C).attr("transform",function(e){return"translate("+e.x+","+e.y+")"}).style("opacity",u.NODE_DEFAULT).select("rect").style("fill",function(e){return e.color=c(e.type.replace(/ .*/,"")),e.color}).style("stroke",function(t){return e.rgb(c(t.type.replace(/ .*/,""))).darker(.1)}).style("stroke-WIDTH","1px").attr("height",function(e){return e.height}).attr("width",i.nodeWidth()),M.exit().transition().duration(C).attr("transform",function(e){var t,n,o;return t=e.ancestors.filter(function(e){return"collapsed"===e.state})[0],n=t?t.x:e.x,o=t?t.y:e.y,"translate("+n+","+o+")"}).remove(),L=M.enter().append("g").attr("class","node"),L.attr("transform",function(e){var t=e._parent?e._parent.x:e.x,n=e._parent?e._parent.y:e.y;return"translate("+t+","+n+")"}).style("opacity",1e-6).transition().duration(C).style("opacity",u.NODE_DEFAULT).attr("transform",function(e){return"translate("+e.x+","+e.y+")"}),L.append("text"),L.append("rect").style("fill",function(e){return e.color=c(e.type.replace(/ .*/,"")),e.color}).style("stroke",function(t){return e.rgb(c(t.type.replace(/ .*/,""))).darker(.1)}).style("stroke-WIDTH","1px").attr("height",function(e){return e.height}).attr("width",i.nodeWidth()),M.on("mouseenter",function(t){d||(f(),x(t),T(t),e.select(this).select("rect").style("fill",function(e){return e.color=e.netFlow>0?g:v,e.color}).style("stroke",function(t){return e.rgb(t.color).darker(.1)}).style("fill-opacity",u.LINK_DEFAULT),a.style("left",t.x+w.LEFT+"px").style("top",t.y+t.height+w.TOP+15+"px").transition().duration(C).style("opacity",1).select(".value").text(function(){var e=t.children.length?"\n(Double click to expand)":"";return t.name+"\nNet flow: "+I(t.netFlow)+e}))}),M.on("mouseleave",function(){d||(E(),f())}),M.filter(function(e){return e.children.length}).on("dblclick",b),M.call(e.behavior.drag().origin(function(e){return e}).on("dragstart",function(){this.parentNode.appendChild(this)}).on("drag",o)),M.filter(function(e){return 0!==e.value}).select("text").attr("x",-6).attr("y",function(e){return e.height/2}).attr("dy",".35em").attr("text-anchor","end").attr("transform",null).text(function(e){return e.name}).filter(function(e){return e.x<S/2}).attr("x",6+i.nodeWidth()).attr("text-anchor","start"),_=n.select("#collapsers").selectAll(".collapser").data(i.expandedNodes(),function(e){return e.id}),z=_.enter().append("g").attr("class","collapser"),z.append("circle").attr("r",y.RADIUS).style("fill",function(e){return e.color=c(e.type.replace(/ .*/,"")),e.color}),z.style("opacity",u.NODE_DEFAULT).attr("transform",function(e){return"translate("+(e.x+e.width/2)+","+(e.y+y.RADIUS)+")"}),z.on("dblclick",b),_.select("circle").attr("r",y.RADIUS),_.transition().delay(C).duration(C).attr("transform",function(e,t){return"translate("+(y.RADIUS+2*t*(y.RADIUS+y.SPACING))+","+(-y.RADIUS-k)+")"}),_.on("mouseenter",function(t){if(!d){A().select(".value").text(function(){return t.name+"\n(Double click to collapse)"});var n=l(t.type.replace(/ .*/,""));
e.select(this).style("opacity",u.NODE_HIGHLIGHT).select("circle").style("fill",n),M.filter(function(e){return e.ancestors.indexOf(t)>=0}).style("opacity",u.NODE_HIGHLIGHT).select("rect").style("fill",n)}}),_.on("mouseleave",function(t){d||(E(),e.select(this).style("opacity",u.NODE_DEFAULT).select("circle").style("fill",function(e){return e.color}),M.filter(function(e){return e.ancestors.indexOf(t)>=0}).style("opacity",u.NODE_DEFAULT).select("rect").style("fill",function(e){return e.color}))}),_.exit().remove()}var n,a,i,r,s,c,l,d,u={NODE_DEFAULT:.9,NODE_FADED:.1,NODE_HIGHLIGHT:.8,LINK_DEFAULT:.6,LINK_FADED:.05,LINK_HIGHLIGHT:.9},m=["Asset","Expense","Revenue","Equity","Liability"],p=["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],f=["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],h="#b3b3b3",g="#2E86D1",v="#D63028",b=36,y={RADIUS:b/2,SPACING:2},k=10,w={TOP:2*(y.RADIUS+k),RIGHT:k,BOTTOM:k,LEFT:k},C=400,$=500-w.TOP-w.BOTTOM,S=960-w.LEFT-w.RIGHT,x=32,D=function(t){var n=e.format(",.0f");return"£"+n(t)},I=function(t){var n=e.format(",.0f");return"£"+n(Math.abs(t))+(0>t?" CR":" DR")},q=function(e){d=!0,setTimeout(function(){d=!1},e)},E=function(){return a.transition().duration(C).style("opacity",0)},A=function(){return a.style("left",e.event.pageX+"px").style("top",e.event.pageY+15+"px").transition().duration(C).style("opacity",1)};c=e.scale.ordinal().domain(m).range(p),l=e.scale.ordinal().domain(m).range(f),n=e.select(o[0]).append("svg").attr("width",S+w.LEFT+w.RIGHT).attr("height",$+w.TOP+w.BOTTOM).append("g").attr("transform","translate("+w.LEFT+","+w.TOP+")"),n.append("g").attr("id","links"),n.append("g").attr("id","nodes"),n.append("g").attr("id","collapsers"),a=e.select(o[0]).append("div").attr("id","tooltip"),a.style("opacity",0).append("p").attr("class","value"),i=e.biHiSankey(),i.nodeWidth(b).nodeSpacing(10).linkSpacing(4).arrowheadScaleFactor(.5).size([S,$]),r=i.link().curvature(.45),s=n.append("defs"),s.append("marker").style("fill",h).attr("id","arrowHead").attr("viewBox","0 0 6 10").attr("refX","1").attr("refY","5").attr("markerUnits","strokeWidth").attr("markerWidth","1").attr("markerHeight","1").attr("orient","auto").append("path").attr("d","M 0 0 L 1 0 L 6 5 L 1 10 L 0 10 z"),s.append("marker").style("fill",v).attr("id","arrowHeadInflow").attr("viewBox","0 0 6 10").attr("refX","1").attr("refY","5").attr("markerUnits","strokeWidth").attr("markerWidth","1").attr("markerHeight","1").attr("orient","auto").append("path").attr("d","M 0 0 L 1 0 L 6 5 L 1 10 L 0 10 z"),s.append("marker").style("fill",g).attr("id","arrowHeadOutlow").attr("viewBox","0 0 6 10").attr("refX","1").attr("refY","5").attr("markerUnits","strokeWidth").attr("markerWidth","1").attr("markerHeight","1").attr("orient","auto").append("path").attr("d","M 0 0 L 1 0 L 6 5 L 1 10 L 0 10 z");var T=[{type:"Asset",id:"a",parent:null,name:"Assets"},{type:"Asset",id:1,parent:"a",number:"101",name:"Cash"},{type:"Asset",id:2,parent:"a",number:"120",name:"Accounts Receivable"},{type:"Asset",id:3,parent:"a",number:"140",name:"Merchandise Inventory"},{type:"Asset",id:4,parent:"a",number:"150",name:"Supplies"},{type:"Asset",id:5,parent:"a",number:"160",name:"Prepaid Insurance"},{type:"Asset",id:6,parent:"a",number:"170",name:"Land"},{type:"Asset",id:7,parent:"a",number:"175",name:"Buildings"},{type:"Asset",id:8,parent:"a",number:"178",name:"Acc. Depreciation Buildings"},{type:"Asset",id:9,parent:"a",number:"180",name:"Equipment"},{type:"Asset",id:10,parent:"a",number:"188",name:"Acc. Depreciation Equipment"},{type:"Liability",id:"l",parent:null,number:"l",name:"Liabilities"},{type:"Liability",id:11,parent:"l",number:"210",name:"Notes Payable"},{type:"Liability",id:12,parent:"l",number:"215",name:"Accounts Payable"},{type:"Liability",id:13,parent:"l",number:"220",name:"Wages Payable"},{type:"Liability",id:14,parent:"l",number:"230",name:"Interest Payable"},{type:"Liability",id:15,parent:"l",number:"240",name:"Unearned Revenues"},{type:"Liability",id:16,parent:"l",number:"250",name:"Mortage Loan Payable"},{type:"Equity",id:"eq",parent:null,number:"eq",name:"Equity"},{type:"Revenue",id:"r",parent:null,number:"r",name:"Revenues"},{type:"Revenue",id:"or",parent:"r",number:"",name:"Operating Revenue"},{type:"Revenue",id:17,parent:"or",number:"310",name:"Service Revenues"},{type:"Revenue",id:"nor",parent:"r",number:"",name:"Non-Operating Revenue"},{type:"Revenue",id:18,parent:"nor",number:"810",name:"Interest Revenues"},{type:"Revenue",id:19,parent:"nor",number:"910",name:"Asset Sale Gain"},{type:"Revenue",id:20,parent:"nor",number:"960",name:"Asset Sale Loss"},{type:"Expense",id:"ex",parent:null,number:"ex",name:"Expenses"},{type:"Expense",id:21,parent:"ex",number:"500",name:"Salaries Expense"},{type:"Expense",id:22,parent:"ex",number:"510",name:"Wages Expense"},{type:"Expense",id:23,parent:"ex",number:"540",name:"Supplies Expense"},{type:"Expense",id:24,parent:"ex",number:"560",name:"Rent Expense"},{type:"Expense",id:25,parent:"ex",number:"570",name:"Utilities Expense"},{type:"Expense",id:26,parent:"ex",number:"576",name:"Telephone Expense"},{type:"Expense",id:27,parent:"ex",number:"610",name:"Advertising Expense"},{type:"Expense",id:28,parent:"ex",number:"750",name:"Depreciation Expense"}],P=[{source:8,target:28,value:Math.floor(100*Math.random())},{source:17,target:18,value:Math.floor(100*Math.random())},{source:22,target:24,value:Math.floor(100*Math.random())},{source:3,target:13,value:Math.floor(100*Math.random())},{source:24,target:24,value:Math.floor(100*Math.random())},{source:5,target:4,value:Math.floor(100*Math.random())},{source:15,target:5,value:Math.floor(100*Math.random())},{source:18,target:8,value:Math.floor(100*Math.random())},{source:3,target:20,value:Math.floor(100*Math.random())},{source:17,target:18,value:Math.floor(100*Math.random())},{source:22,target:5,value:Math.floor(100*Math.random())},{source:4,target:24,value:Math.floor(100*Math.random())},{source:26,target:16,value:Math.floor(100*Math.random())},{source:27,target:6,value:Math.floor(100*Math.random())},{source:23,target:4,value:Math.floor(100*Math.random())},{source:10,target:24,value:Math.floor(100*Math.random())},{source:17,target:16,value:Math.floor(100*Math.random())},{source:5,target:12,value:Math.floor(100*Math.random())},{source:12,target:16,value:Math.floor(100*Math.random())},{source:19,target:5,value:Math.floor(100*Math.random())},{source:15,target:24,value:Math.floor(100*Math.random())},{source:27,target:2,value:Math.floor(100*Math.random())},{source:26,target:28,value:Math.floor(100*Math.random())},{source:22,target:24,value:Math.floor(100*Math.random())},{source:3,target:18,value:Math.floor(100*Math.random())},{source:18,target:5,value:Math.floor(100*Math.random())},{source:25,target:28,value:Math.floor(100*Math.random())},{source:12,target:1,value:Math.floor(100*Math.random())},{source:28,target:21,value:Math.floor(100*Math.random())},{source:9,target:16,value:Math.floor(100*Math.random())},{source:14,target:23,value:Math.floor(100*Math.random())},{source:6,target:1,value:Math.floor(100*Math.random())},{source:9,target:15,value:Math.floor(100*Math.random())},{source:16,target:24,value:Math.floor(100*Math.random())},{source:22,target:28,value:Math.floor(100*Math.random())},{source:8,target:21,value:Math.floor(100*Math.random())},{source:22,target:7,value:Math.floor(100*Math.random())},{source:18,target:10,value:Math.floor(100*Math.random())},{source:"eq",target:1,value:Math.floor(100*Math.random())},{source:1,target:21,value:Math.floor(100*Math.random())},{source:1,target:24,value:Math.floor(100*Math.random())},{source:17,target:1,value:Math.floor(100*Math.random())},{source:Math.ceil(28*Math.random()),target:Math.ceil(28*Math.random()),value:Math.floor(100*Math.random())},{source:Math.ceil(28*Math.random()),target:Math.ceil(28*Math.random()),value:Math.floor(100*Math.random())},{source:Math.ceil(28*Math.random()),target:Math.ceil(28*Math.random()),value:Math.floor(100*Math.random())},{source:Math.ceil(28*Math.random()),target:Math.ceil(28*Math.random()),value:Math.floor(100*Math.random())},{source:Math.ceil(28*Math.random()),target:Math.ceil(28*Math.random()),value:Math.floor(100*Math.random())},{source:Math.ceil(28*Math.random()),target:Math.ceil(28*Math.random()),value:Math.floor(100*Math.random())},{source:Math.ceil(28*Math.random()),target:Math.ceil(28*Math.random()),value:Math.floor(100*Math.random())},{source:Math.ceil(28*Math.random()),target:Math.ceil(28*Math.random()),value:Math.floor(100*Math.random())},{source:Math.ceil(28*Math.random()),target:Math.ceil(28*Math.random()),value:Math.floor(100*Math.random())},{source:Math.ceil(28*Math.random()),target:Math.ceil(28*Math.random()),value:Math.floor(100*Math.random())}];i.nodes(T).links(P).initializeNodes(function(e){e.state=e.parent?"contained":"collapsed"}).layout(x),q(2*C),t()}})}}}angular.module("qorDash.widget.traffic").directive("qlTraffic",e);e.$inject=["d3","$window","$interval","$compile","$rootScope"]}(),function(){"use strict";angular.module("qorDash.widget.timeline",["relativeDate","ui.bootstrap"])}(),function(){"use strict";function e(e,t){var n=function(e){e.height(e.parent().parent().parent().height())};return{link:function(o,a){e(function(){n(a),o.onresize=function(){n(a)},angular.element(t).bind("resize",function(){o.onresize()})})}}}var t=angular.module("qorDash.widget.timeline").directive("qlTimeline",e);e.$inject=["$timeout","$window"];var n=angular.createAuthorizedController("TimelineController",["$scope","$rootScope","$timeout","terminal",function(e,t,n,o){function a(t){var n=t.split(",");switch(n[0]){case"****":"["==n[1]?(l=n[3],e.$apply(function(){e.events.push(s(n,"event-icon-primary"))})):"]"==n[1]&&(c(n[3],"event-icon-primary",n[2]),l="");break;case"????":"["==n[1]?(l=n[3],e.$apply(function(){e.events.push(s(n,"event-icon-warning"))})):c(n[3],"event-icon-warning",n[2]);break;case"!!!!":"["==n[1]?(l=n[3],e.$apply(function(){e.events.push(s(n,"event-icon-danger"))})):c(n[3],"event-icon-danger",n[2]);break;default:t&&(e.allMessages[l]||(e.allMessages[l]=""),e.allMessages[l]+=t+"\n",e.openedTerminals[l]&&e.openedTerminals[l].echo(t))}}e.events=[],e.openedTerminals={};var i=function(e){a(e.data);var t=angular.element("body")[0];t.scrollTop=t.scrollHeight},r=new WebSocket(e.wsUrl);r.onmessage=i,e.$on("$destroy",function(){r.close()}),t.$on("timeline:newWsUrl",function(t,o){r.close(),n(function(){e.$apply(function(){e.events=[],e.allMessages={}})});try{r=new WebSocket(o),r.onmessage=i}catch(a){alert("Wrong WebSocket url"+a)}});var s=function(e,t){return{title:e[3],timestamp:e[2],text:e[4],event_icon_class:t,id:btoa(e[3]),isInfoCollapsed:!0}},c=function(e,t,n){var o=$("#"+btoa(e).substr(0,7));o.children("span").removeClass("event-icon-primary").addClass(t);var a=o.children("section").children("footer").children("ul").children("li").children("a");a.text(n-a.attr("data-original")+" seconds")};e.allMessages={};var l="";e.showDetails=function(t){var a=$("#"+btoa(t.title).substr(0,7)),i=a.children("section").children("footer").children("div"),r=o.initTerminalByObject(i.children("div").children("div"),{greetings:!1,enabled:!1}),s=a.children("section").children("footer").children("ul").children("a");r.disable(),t.isInfoCollapsed?(r.clear(),r.echo(e.allMessages[t.title]),n(function(){s.css("visibility","visible")},300),e.openedTerminals[t.title]=r):(s.css("visibility","hidden"),delete e.openedTerminals[t.title]),n(function(){t.isInfoCollapsed=!t.isInfoCollapsed})}}]);t.controller(n)}(),function(){"use strict";angular.module("qorDash.widget.terminal",[])}(),function(){"use strict";function e(e,t){var n=function(e){var t=e.parent().parent().parent().height()-20;e.parent().parent().hasClass("logs")&&(t=e.parent().parent().height()),e.height(t>0?t:500)};return{link:function(o,a){e(function(){n(a),o.onresize=function(){n(a)},angular.element(t).bind("resize",function(){o.onresize()})})}}}function t(){var e=this;e.initTerminalById=function(e,t,n){return $("#"+e).terminal(n,t)},e.initTerminalByObject=function(e,t,n){return t||(t={greetings:!1}),e.terminal(n,t)}}var n=angular.module("qorDash.widget.terminal").directive("qlTerminal",e).service("terminal",t);e.$inject=["$timeout","$window"],t.$inject=[];var o=angular.createAuthorizedController("TerminalController",["$scope","$rootScope","$timeout","terminal",function(e,t,n,o){function a(e){var t=e.split(",");switch(t[0]){case"****":return t[3];case"????":return"[[;#7f7f00;]"+t[3]+"]";case"!!!!":return"[[;#7f0000;]"+t[3]+"]";default:return e}}var o=o.initTerminalById("terminal",{greetings:!1});e.clearTerminal=function(){o.clear()};var i=new WebSocket(e.wsUrl),r=function(e){var t=a(e.data);t&&o.echo(t)};i.onmessage=r,e.$on("$destroy",function(){i.close()}),t.$on("terminal:newWsUrl",function(t,o){i.close(),n(function(){e.$apply(function(){e.clearTerminal()})});try{i=new WebSocket(o),i.onmessage=r}catch(a){alert("Wrong WebSocket url"+a)}})}]);n.controller(o)}(),function(){"use strict";angular.module("qorDash.widget.network",[])}(),function(){"use strict";function e(){$(".network").on({mousewheel:function(e){"el"!=e.target.id&&(e.preventDefault(),e.stopPropagation())}})}function t(t,n,o,a,i,r){return{restrict:"EA",replace:!0,link:function(o,a){t.d3().then(function(t){function s(){return i.get("data/network-data.json").then(function(e){o.sourceJson=e.data,r(function(){o.$apply(function(){o.setNetworkData(o.sourceJson)})})})}o.render=function(o){function i(e){for(var t in e.children)e.children[t].parent=e,e.children[t].depth=e.depth+1,S.push(e.children[t]);if("parent"in e){if((!h||h!==e.parent)&&(g=1,v=0,b=1,h=e.parent,0!==S.length))for(;S[b-1].parent===h;)b++;c(),k=e.parent.width/20,w=e.parent.height/20,e.width=e.parent.width/y-1.5*k,e.height=e.parent.height/y-1.5*w,e.x=e.parent.x+k*g+e.width*(g-1),e.y=e.parent.headerheight+e.parent.y+w*v+e.height*(v-1),e.height=9*e.height/10,e.headerheight=1*e.height/10}r(e),0!==S.length&&i(S.shift())}function r(e){P.append("rect").style("fill","#dae0ed").style("stroke","none").style("stroke-width","1.4").classed("network-title",!0).attr("rx","3px").attr("x",e.x).attr("y",e.y).attr("width",e.width).attr("height",e.headerheight).append("title").text(e.name);var t=P.append("rect").style("fill","none").style("stroke","#949da5").style("stroke-width","1.4").classed("network-body",!0).attr("rx","3px").attr("x",e.x).attr("y",e.y).attr("width",e.width).attr("height",e.height+e.headerheight);P.append("text").attr("x",e.x+e.width/20).attr("y",e.y+e.headerheight/2).attr("dy",".35em").attr("font-size",e.height/14+"px").text(e.name),s(t,e)}function s(e,t){e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,e.headerheight=t.headerheight,e.depth=t.depth,$[t.depth]||($[t.depth]=[]),$[t.depth].push(e)}function c(){y=Math.round(Math.sqrt(b)),b>y*y&&y++,y>v?v++:(v=1,g++)}function l(){e(),d(),P.attr("transform","translate("+t.event.translate+")scale("+t.event.scale+")")}function d(){var e=Math.round(A.scale());p!==e&&(p=e,t.selectAll(".network-body").style("fill","none").style("stroke-width",1.4/e).attr("rx",3/e+"px"),t.selectAll(".network-title").style("stroke-width",1.4/e).attr("rx",3/e+"px"),u(),$[e+2]&&$[e+2].forEach(function(t){var n=P.append("rect").style("fill","#fff").style("stroke","#949da5").style("stroke-width",1.4/e).attr("rx",3/e+"px").attr("x",t.x).attr("y",t.y).attr("width",t.width).attr("height",t.height+t.headerheight);x.push(n)}))}function u(){x.forEach(function(e){e.remove()}),x=[]}var m,p,f,h,g,v,b,y,k,w,C=o,$=[],S=[],x=[],D={top:20,right:0,bottom:0,left:0},I=a.width(),q=n.innerHeight-D.top-D.bottom-120-45,E=(t.format(",d"),t.scale.linear().domain([0,I]).range([0,I]),t.scale.linear().domain([0,q]).range([0,q]),t.select(a[0])),A=t.behavior.zoom(),T=E.append("svg").attr("width",I+D.left+D.right).attr("height",q+D.bottom+D.top).style("margin-left",-D.left+"px").style("margin-right",-D.right+"px").classed("network-svg",!0).attr("transform","translate("+D.left+","+D.top+")").style("shape-rendering","crispEdges").call(A),P=T.append("g");t.select(self.frameElement).style("height",q+"px"),S.push(C),f=S.shift(),f.width=1200,f.height=720,f.headerheight=80,f.depth=1,f.x=40,f.y=40,i(f),m=Math.pow(2,$.length-1),A.scaleExtent([1,m]).on("zoom",l),d()},o.sourceJson?o.render(o.sourceJson):s().then(function(){o.render(o.sourceJson)})})}}}angular.module("qorDash.widget.network").directive("qlNetwork",t);t.$inject=["d3","$window","$stateParams","$state","$http","$timeout"]}(),function(){"use strict";angular.module("qorDash.widget.events",["relativeDate","ui.bootstrap"])}(),function(){"use strict";function e(e,t){var n=function(e){e.height(e.parent().parent().parent().height())};return{link:function(o,a){e(function(){n(a),o.onresize=function(){n(a)},angular.element(t).bind("resize",function(){o.onresize()})})}}}e.$inject=["$timeout","$window"];var t=angular.createAuthorizedController("EventsController",["$scope","$rootScope","$timeout",function(e,t,n){e.events=[];var o=function(e){a(e.data);var t=angular.element("#events").parents(".qor-sheet-content")[0];t.scrollTop=t.scrollHeight},a=function(t){e.$apply(function(){e.events.push(JSON.parse(t))})},i=function(e){var t=document.createElement("a");return t.href=e,"ws:"==t.protocol||"wss:"==t.protocol},r=function(e){var t;try{i(e)?(t=new WebSocket(e),t.onmessage=o):(t=new EventSource(e),t.addEventListener("Event",o))}catch(n){return null}return t};e._socketObject=r(e.wsUrl),t.$on("events:newWsUrl",function(t,o){e._socketObject&&e._socketObject.close(),n(function(){e.$apply(function(){e.events=[],e.allMessages={}})}),e._socketObject=r(o)}),e.$on("$destroy",function(){e._socketObject&&e._socketObject.close()})}]);angular.module("qorDash.widget.events").directive("qlEvents",e).controller(t)}(),function(){"use strict";angular.module("qorDash.widget.domain_stat",["ui.bootstrap"])}(),function(){"use strict";var e=angular.module("qorDash.widget.domain_stat"),t=angular.createAuthorizedController("DomainStatController",["$scope","$rootScope","$filter",function(e,t,n){var o={services:{nginx:{containers:1,cpu:4,memory:"4gb",disk:"10gb",image:"blinker/nginx:95",config:"production/v1.1",git_commit:"023dfe82a",last_update:1435565762},blinker:{containers:40,cpu:160,memory:"400gb",disk:"1000gb",image:"blinker/blinker:prod",config:"production/v1.0",git_commit:"23dfe878a",last_update:1435565762},sidekiq:{containers:20,cpu:80,memory:"200gb",disk:"500gb",image:"blinker/blinker:prod",config:"production/v1.0",git_commit:"23dfe878a",last_update:1435565762},clockwork:{containers:10,cpu:40,memory:"100gb",disk:"250gb",image:"blinker/blinker:prod",config:"production/v1.0",git_commit:"23dfe878a",last_update:1435565762},postgres:{containers:5,host:1,cpu:16,memory:"32gb",disk:"1000gb",version:"postgres 9.4",config:"",git_commit:"",last_update:1435565762},redis:{containers:1,cpu:8,memory:"100gb",disk:"250gb",image:"blinker/redis-2.8",config:"production/v1.0",git_commit:"",last_update:1435565762},memcached:{containers:4,cpu:16,memory:"400gb",disk:"250gb",image:"blinker/memcached",config:"production/v1.0",git_commit:"",last_update:1435565762}},infrastructure:{network:{vpc:1,availability_zones:3,subnets:6,security_groups:5},resources:{hosts:25,volumes:20,ip_addresses:10,load_balancers:2},containers:{all_time:7897,running:578,stopped:20,failed:4},process:{deployments:45,rollbacks:3,warnings:23,errors:4}}},a=function(t){var n=t;e.network=n.infrastructure.network,e.resources=n.infrastructure.resources,e.containers=n.infrastructure.containers,e.process=n.infrastructure.process,e.services=[];for(var o in t.services)t.services[o].name=o,e.services.push(t.services[o])};a(o),e.getRandomCardColor=function(){var e=["purple","yellow","green","blue"];return e[Math.floor(4*Math.random())]},e.putVarOrSpace=function(e){return e?e:"<br>"},e.applyFilter=function(e,t,o){return n(t)(e,o)}}]);e.controller(t)}(),function(){"use strict";angular.module("qorDash.widget.domain_details",["ui.bootstrap"])}(),function(){"use strict";var e=angular.module("qorDash.widget.domain_details"),t=angular.createAuthorizedController("DomainDetailsController",["$scope","$rootScope","$compile","$state",function(){}]);e.controller(t)}(),function(){"use strict";angular.module("qorDash.widget.container",[])}(),function(){"use strict";function e(e,t,n,o,a){return{restrict:"EA",link:function(o,i){function r(e){switch(e){case"hosts":return"data/container-h.json";case"services":return"data/container-s.json";default:return"data/container-az.json"}}function s(){return a.get(o.sourceJsonLink).then(function(e){o.sourceJson=e.data,$("#select-prop").text("");for(var t in e.data.selectors)$("#select-prop").append('<option value="'+e.data.selectors[t]+'">By '+e.data.selectors[t]+"</option>")})}o.$on("$destroy",function(){o.sourceJson=""}),e.d3().then(function(e){o.sourceJsonLink=r($("#select-type option:selected").val()),s(),o.heightMargin=65,o.widthMargin=10,o.$watch(function(){return angular.element(t)[0].innerWidth},function(){o.render(o.data)}),o.colors=[7964363,7964363,8421504,16498733,16777215,11776947],o.render=function(){function t(){u=d=o.sourceJson;var t=v.nodes(d).filter(function(e){return!e.children}),s=b.selectAll("g").data(t).enter().append("svg:g").attr("class","cell").attr("transform",function(e){return"translate("+e.x+","+e.y+")"}).on("click",function(e){return l(u==e.parent?d:e.parent)});s.append("svg:rect").attr("width",function(e){return e.dx-1<0?0:e.dx-1}).attr("height",function(e){return e.dy-1<0?0:e.dy-1}).style("fill",function(e){return g(e.parent.name)}),s.append("svg:text").attr("x",function(e){return e.dx/2}).attr("y",function(e){return e.dy/2}).attr("dy",".35em").attr("text-anchor","middle").style("fill","white").text(function(e){return e.name}).style("opacity",function(e){return e.w=this.getComputedTextLength(),e.dx>e.w?1:0}),e.select(window).on("click",function(){l(d)}),e.select("#select-type").on("change",function(){var t=e.select(this).property("value");o.sourceJsonLink=r(t),o.sourceJson=null,i.text(""),o.render(),l(u)}),e.select("#select-prop").on("change",function(){var t=e.select(this).property("value");switch(t){case"cpu":v.value(n).nodes(d);break;case"memory":v.value(a).nodes(d);break;case"disk":v.value(c).nodes(d)}l(u)})}function n(e){return e.cpu}function a(e){return e.memory}function c(e){return e.disk?e.disk:void 0}function l(t){var n=m/t.dx,o=p/t.dy;f.domain([t.x,t.x+t.dx]),h.domain([t.y,t.y+t.dy]);var a=b.selectAll("g.cell").transition().duration(e.event.altKey?7500:750).attr("transform",function(e){return"translate("+f(e.x)+","+h(e.y)+")"});a.select("rect").attr("width",function(e){return n*e.dx-1<0?0:n*e.dx-1}).attr("height",function(e){return o*e.dy-1<0?0:o*e.dy-1}),a.select("text").attr("x",function(e){return n*e.dx/2}).attr("y",function(e){return o*e.dy/2}).style("opacity",function(e){return n*e.dx>e.w?1:0}),u=t,e.event.stopPropagation()}console.log("call");var d,u,m=i.parent().width()-o.widthMargin,p=i.parent().parent().height()-o.heightMargin,f=e.scale.linear().range([0,m]),h=e.scale.linear().range([0,p]),g=e.scale.ordinal().range(["#7986CB","#808080","#FBC02D","#3F497F","#B3B3B3","#FFFFFF"]);0>m&&(m=0),0>p&&(p=0),o.width=i.parent().width(),o.height=p;var v=e.layout.treemap().round(!1).size([m,p]).sticky(!0).value(function(e){return e.cpu}),b=e.select(i[0]).append("div").attr("class","chart").style("width",m+"px").style("height",p+"px").append("svg:svg").attr("width",m).attr("height",p).append("svg:g").attr("transform","translate(.5,.5)");o.sourceJson?t():s().then(function(){t()})}}).then(function(){var e=function(){jQuery(i).animate({opacity:0,duration:30},function(){i.text(""),o.render(),jQuery(i).animate({opacity:1,duration:30})})};n(function(){i.parent().parent().height()-o.heightMargin!=o.height&&0!=i.height()&&0!=i.width&&e()},600)})}}}angular.module("qorDash.widget.container").directive("qlContainer",e);e.$inject=["d3","$window","$interval","$state","$http"]}(),function(){"use strict";var e=angular.createAuthorizedController("OrchestrateController",["$scope","$state","$stateParams","errorHandler","domainsLoader",function(e,t,n,o,a){a.load().then(function(o){e.domains=o.data,1===e.domains.length&&"app.orchestrate"==t.current.name&&t.go("app.orchestrate.domain",{id:e.domains[0].id}),e.domain=e.domains.filter(function(e){return e.id==n.id})[0]},function(t){e.error=o.showError(t)})}]);angular.module("qorDash.orchestrate").controller(e)}(),function(){"use strict";function e(e,t){e.state("app.manage",{url:"/manage",views:{"main@":{templateUrl:"app/modules/manage/manage.html",controller:"ManageController"}},authenticate:!0}),t.config("manage",{title:"Manage",nav:7,content:'<span ui-sref="app.manage" qor-sidebar-group-heading="Manage" data-icon-class="fa fa-edit"></span>'})}var t=angular.module("qorDash.manage",["ui.router","qorDash.manage.accounts","qorDash.manage.settings","qorDash.manage.accounts.account"]);t.config(e),e.$inject=["$stateProvider","$qorSidebarProvider"]}(),function(){"use strict";function e(e){return e.load()}var t=angular.createAuthorizedController("ManageController",["$scope",function(){}]);e.$inject=["manageLoader"],angular.module("qorDash.manage").controller(t).factory("currentUser",e)}(),function(){"use strict";var e=angular.createAuthorizedController("DomainsController",["$scope","$state","$stateParams","errorHandler","domainsLoader",function(e,t,n,o,a){a.load().then(function(n){e.domains=n.data,1===e.domains.length&&"app.domains"==t.current.name&&t.go("app.domains.domain",{id:e.domains[0].id})},function(t){e.error=o.showError(t)})}]);angular.module("qorDash.domains").controller(e)}(),function(){"use strict";var e=angular.createAuthorizedController("DockerController",["$scope","$state","$stateParams","errorHandler","domainsLoader",function(e,t,n,o,a){a.load().then(function(n){e.domains=n.data,1===e.domains.length&&"app.docker"==t.current.name&&t.go("app.docker.domain",{domain:e.domains[0].id})},function(t){e.error=o.showError(t)})}]);angular.module("qorDash.domains").controller(e)}(),function(){"use strict";function e(e){e.state("app.deployment",{url:"/deployment",templateUrl:"app/modules/deployment/deployment.html",controller:"DeploymentController",authenticate:!0})}var t=angular.module("qorDash.deployment",["ui.router","ui.layout","qorDash.widget","qorDash.widget.terminal","qorDash.widget.timeline"]);t.config(e),e.$inject=["$stateProvider"]}(),function(){"use strict";var e=angular.createAuthorizedController("DeploymentController",["$scope","$rootScope","$location","WS_URL",function(e,t,n,o){e.wsTimelineUrl=o+"/v1/ws/run/timeline1"}]);angular.module("qorDash.deployment").controller(e)}(),function(){"use strict";function e(e,t){e.state("app.dashboard",{url:"/dashboard",views:{"main@":{templateUrl:"app/modules/dashboard/dashboard.html",controller:"DashboardController"}},authenticate:!0}),t.config("dashboard",{title:"Dashboard",nav:1,content:'<span ui-sref="app.dashboard" qor-sidebar-group-heading="Events" data-icon-class="fa fa-newspaper-o"></span>'})}var t=angular.module("qorDash.dashboard",["ui.router","ui.layout","qorDash.widget","qorDash.widget.terminal","qorDash.widget.timeline","qorDash.widget.events"]);t.config(e),e.$inject=["$stateProvider","$qorSidebarProvider"]}(),function(){"use strict";var e=angular.createAuthorizedController("DashboardController",["$scope","$rootScope","$location","API_URL",function(e,t,n,o){e.eventsWsUrl=o+"/v1/test/events"}]);angular.module("qorDash.dashboard").controller(e)}(),function(){"use strict";function e(e,t,n){function o(){n.toggleSidebar()}var a=this;a.title=e.appTitle,a.toggleSidebar=o,t.app=e}function t(e){e.loadGlobalPermissions()}function n(){var e=this;e.messages={};var t=e.messages.hasOwnProperty;return{subscribe:function(n,o){t.call(e.messages,n)||(e.messages[n]=[]);var a=e.messages[n].push(o)-1;return{remove:function(){delete e.messages[n][a]}}},publish:function(n,o){t.call(e.messages,n)&&e.messages[n].forEach(function(e){e(o?info:{})})}}}function o(e,t,n){var o=this;o.permissionsJsonKey="permissions_json",o.loadGlobalPermissions=function(){return t.get("data/permissions.json").then(function(t){return e.localStorage[o.permissionsJsonKey]=JSON.stringify(t.data),t.data})},o.loadPageSections=function(n){var o=[];return t.get("data/sections-"+n+".json").then(function(t){return e.localStorage["sections_"+n]=JSON.stringify(t.data),t.data},function(){return e.localStorage["sections_"+n]=JSON.stringify(o),o})},o.getGlobalPermissions=function(){if(!e.localStorage[o.permissionsJsonKey])throw new Error("No global permissions loaded. Ensure that dataLoader.loadGlobalPermission has been called first");return JSON.parse(e.localStorage[o.permissionsJsonKey])},o.getPageSections=function(t){return e.localStorage["sections_"+t]?n(function(n){n(JSON.parse(e.localStorage["sections_"+t]))}):o.loadPageSections(t)},o.init=function(){return o.loadGlobalPermissions().then(function(){})}}function a(e,t,n){function o(){function t(){n.$apply(function(){a.resolve(window.d3)})}var o=e[0].createElement("script");o.type="text/javascript",o.async=!0,o.src="https://cdn.rawgit.com/Neilos/bihisankey/master/bihisankey.js",o.onreadystatechange=function(){"complete"==this.readyState&&t()},o.onload=t;var i=e[0].getElementsByTagName("body")[0];i.appendChild(o)}var a=t.defer(),i=e[0].createElement("script");i.type="text/javascript",i.async=!0,i.src="http://d3js.org/d3.v3.min.js",i.onreadystatechange=function(){"complete"==this.readyState&&o()},i.onload=o;var r=e[0].getElementsByTagName("body")[0];return r.appendChild(i),{d3:function(){return a.promise}}}function i(e){return e.jQuery}function r(e){return{showError:function(t){var n=t?t.data?t.data.error:"unknown server error":"unknown error";return e.error("Can't load data: "+n),n}}}angular.module("qorDash.core").controller("App",e).service("dataLoader",o).run(t).factory("d3",a).factory("jQuery",i).factory("pubSub",n).factory("errorHandler",r),e.$inject=["config","$scope","$qorSidebar"],t.$inject=["dataLoader"],o.$inject=["$window","$http","$q"],a.$inject=["$document","$q","$rootScope"],i.$inject=["$window"],r.$inject=["Notification"]}(),function(){"use strict";var e=angular.module("qorDash.core"),t={name:"Infradash",title:"Infradash",version:"1.0.0",debug:!0,settings:{colors:{white:"#fff",black:"#000","gray-light":"#999","gray-lighter":"#eee",gray:"#666","gray-dark":"#343434","gray-darker":"#222","gray-semi-light":"#777","gray-semi-lighter":"#ddd","brand-primary":"#5d8fc2","brand-success":"#64bd63","brand-warning":"#f0b518","brand-danger":"#dd5826","brand-info":"#5dc4bf"},screens:{"xs-max":767,"sm-min":768,"sm-max":991,"md-min":992,"md-max":1199,"lg-min":1200},navCollapseTimeout:2500},state:{"nav-static":!1}},n=function(){this._initResizeEvent(),this._initOnScreenSizeCallbacks()};n.prototype={_resizeCallbacks:[],_screenSizeCallbacks:{xs:{enter:[],exit:[]},sm:{enter:[],exit:[]},md:{enter:[],exit:[]},lg:{enter:[],exit:[]}},isScreen:function(e){var n=window.innerWidth;return(n>=t.settings.screens[e+"-min"]||"xs"==e)&&(n<=t.settings.screens[e+"-max"]||"lg"==e)},getScreenSize:function(){var e=window.innerWidth;return e<=t.settings.screens["xs-max"]?"xs":e>=t.settings.screens["sm-min"]&&e<=t.settings.screens["sm-max"]?"sm":e>=t.settings.screens["md-min"]&&e<=t.settings.screens["md-max"]?"md":e>=t.settings.screens["lg-min"]?"lg":void 0},onScreenSize:function(e,t,n){n="undefined"!=typeof n?n:!0,this._screenSizeCallbacks[e][n?"enter":"exit"].push(t)},changeColor:function(e,t,n){var o=function(e,t){var n="0";for(e+="";e.length<t;)e=n+e;return e};e=e.replace(/^\s*|\s*$/,""),e=e.replace(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i,"#$1$1$2$2$3$3");var a=Math.round(256*t)*(n?-1:1),i=e.match(new RegExp("^rgba?\\(\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])(?:\\s*,\\s*(0|1|0?\\.\\d+))?\\s*\\)$","i")),r=i&&null!=i[4]?i[4]:null,s=i?[i[1],i[2],i[3]]:e.replace(/^#?([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])/i,function(){return parseInt(arguments[1],16)+","+parseInt(arguments[2],16)+","+parseInt(arguments[3],16)
}).split(/,/);return i?"rgb"+(null!==r?"a":"")+"("+Math[n?"max":"min"](parseInt(s[0],10)+a,n?0:255)+", "+Math[n?"max":"min"](parseInt(s[1],10)+a,n?0:255)+", "+Math[n?"max":"min"](parseInt(s[2],10)+a,n?0:255)+(null!==r?", "+r:"")+")":["#",o(Math[n?"max":"min"](parseInt(s[0],10)+a,n?0:255).toString(16),2),o(Math[n?"max":"min"](parseInt(s[1],10)+a,n?0:255).toString(16),2),o(Math[n?"max":"min"](parseInt(s[2],10)+a,n?0:255).toString(16),2)].join("")},lightenColor:function(e,t){return this.changeColor(e,t,!1)},darkenColor:function(e,t){return this.changeColor(e,t,!0)},max:function(e){return Math.max.apply(null,e)},min:function(e){return Math.min.apply(null,e)},_initResizeEvent:function(){var e;$(window).on("resize",function(){clearTimeout(e),e=setTimeout(function(){$(window).trigger("sn:resize")},100)})},_initOnScreenSizeCallbacks:function(){var e,t=this,n=this.getScreenSize();$(window).resize(function(){clearTimeout(e),e=setTimeout(function(){var e=t.getScreenSize();e!=n&&(t._screenSizeCallbacks[n].exit.forEach(function(t){t(e,n)}),t._screenSizeCallbacks[e].enter.forEach(function(t){t(e,n)}),console.log("screen changed. new: "+e+", old: "+n)),n=e},100)})}},t.helpers=new n,e.value("config",t)}(),function(){"use strict";function e(e,t){e.state("app.configurations",{url:"/configurations",views:{"main@":{templateUrl:"app/modules/configurations/configurations.html",controller:"ConfigurationsController"}},authenticate:!0}),t.config("configurations",{title:"Config",nav:5,content:'<span ui-sref="app.configurations" qor-sidebar-group-heading="Config" data-icon-class="fa fa-cogs"></span>'})}var t=angular.module("qorDash.configurations",["ui.router","qorDash.configurations.services","qorDash.configurations.services.state","qorDash.configurations.services.state.files","qorDash.configurations.services.state.files.files-view","qorDash.configurations.services.state.files.files-view.diff","qorDash.configurations.services.state.instances","qorDash.configurations.services.state.instances.editor","qorDash.configurations.services.state.packages","qorDash.configurations.services.state.packages.editor"]);t.config(e),e.$inject=["$stateProvider","$qorSidebarProvider"]}(),function(){"use strict";var e=angular.createAuthorizedController("ConfigurationsController",["$scope","$state","$stateParams","$timeout","errorHandler","domainsLoader",function(e,t,n,o,a,i){e.domainsPromise=i.load().then(function(o){e.domains=o.data,1===e.domains.length&&"app.configurations"==t.current.name&&t.go("app.configurations.services",{domain:e.domains[0].id}),e.domain=e.domains.filter(function(e){return e.id==n.id})[0]},function(t){e.error=a.showError(t)})}]);angular.module("qorDash.configurations").controller(e)}(),function(){"use strict";function e(e,t){e.state("app.compose",{url:"/compose",views:{"main@":{templateUrl:"app/modules/compose/compose.html",controller:"ComposeController"}},authenticate:!0}).state("app.compose.sub",{url:"/sub",templateUrl:"app/modules/compose/compose-sub.html"}).state("app.compose.sub.sub",{url:"/sub",templateUrl:"app/modules/compose/compose-sub-sub.html"}).state("app.compose.sub.sub.sub",{url:"/sub",templateUrl:"app/modules/compose/compose-sub-sub-sub.html"}).state("app.compose.sub.sub.sub.sub",{url:"/sub",templateUrl:"app/modules/compose/compose-sub-sub-sub-sub.html"}),t.config("compose",{title:"Compose",nav:4,content:'<span ui-sref="app.compose" qor-sidebar-group-heading="compose" data-icon-class="fa fa-envelope"></span>'})}var t=angular.module("qorDash.compose",["ui.router"]);t.config(e),e.$inject=["$stateProvider","$qorSidebarProvider"]}(),function(){"use strict";var e=angular.createAuthorizedController("ComposeController",["$scope","$rootScope","$location",function(e){e.number=1,e.plus=function(){e.number++}}]);angular.module("qorDash.compose").controller(e)}(),function(){"use strict";function e(e,t,n){t.interceptors.push("authInterceptor"),e.state("login",{url:"/login",templateUrl:"app/modules/auth/login.html",controller:"LoginController",controllerAs:"vm"}).state("logout",{url:"/logout",controller:["$location","user",function(e,t){t.logout(),e.path("/login")}]}),n.config("User",{title:"User",nav:20,content:'<span id="user-actions" user-section  qor-sidebar-group-heading="Admin" data-icon-class="fa fa-user"></span>'})}var t=angular.module("qorDash.auth",["qorDash.core","ui.router"]);t.config(e),e.$inject=["$stateProvider","$httpProvider","$qorSidebarProvider"]}(),function(){"use strict";function e(e,t,n,o){function a(){var e=".has-feedback",t="has-error";$(e).hasClass(t)&&($(e).removeClass(t),l.errorMessage="")}function i(){$("#loginButton").button("loading")}function r(){$("#loginButton").button("reset")}function s(e){l.errorMessage=e,$(".has-feedback").addClass("has-error")}function c(){l.startLoginAnimation(),n.login(l.userCredentials.login,l.userCredentials.password).then(function(){t.go("app.dashboard")},function(e){var t;switch(t=e&&e.data?e.data:{},t||(t={error:"unknown"}),t.error){case"error-account-not-found":l.showErrorMessage("Account not found");break;case"error-bad-credentials":l.showErrorMessage("Bad credentials");break;default:l.showErrorMessage("Unknown server error")}l.stopLoginAnimation()})}var l=this;return l.startLoginAnimation=i,l.stopLoginAnimation=r,l.showErrorMessage=s,l.login=c,l.ICON_URL=o,l.userCredentials={login:"",password:""},n.isAuthed()?void t.go("app.dashboard"):(e.$watch("vm.userCredentials.login",a),void e.$watch("vm.userCredentials.password",a))}angular.module("qorDash.auth").controller("LoginController",e),e.$inject=["$scope","$state","user","LOGIN_PAGE_ICON_URL"]}(),function(){"use strict";function e(){function e(){var e;gapi.load("auth2",function(){e=gapi.auth2.init({client_id:"138766960114-ikj7ignimooj54qabses3cc857l1a8h4.apps.googleusercontent.com",cookiepolicy:"single_host_origin"}),e.attachClickHandler(document.getElementById("google-signin"),{},t,n)})}function t(){}function n(){}return{restrict:"A",link:e}}angular.module("qorDash.auth").directive("gSignin",e)}(),function(){"use strict";function e(){return{link:function(e,t){t.bind("mouseleave",function(){$(t).css({opacity:0,visibility:"hidden"}).animate({opacity:0},100),$("#user-actions").parent().css({opacity:1,visibility:"visible"}).animate({opacity:1},100)})}}}function t(){return{link:function(e,t){t.parent().bind("mouseenter",function(){$(t.parent()).css({opacity:0,visibility:"hidden"}).animate({opacity:0},100),$(".user-actions").css({opacity:1,visibility:"visible"}).animate({opacity:1},100)})}}}function n(e,t,n){e.$on("$stateChangeStart",function(e,o){return o.authenticate&&!n.isAuthed()?(t.transitionTo("login"),void e.preventDefault()):void(o.authenticate&&o.controller&&!n.hasAccessTo(o.controller)&&(t.transitionTo("error"),e.preventDefault()))})}function o(e){var t=this;t.tokenKey="authToken",t.saveToken=function(n){e.localStorage[t.tokenKey]=n},t.getToken=function(){return e.localStorage[t.tokenKey]},t.removeToken=function(){e.localStorage.removeItem(t.tokenKey)},t.getParsedToken=function(){var n=t.getToken();if(!n)return!1;var o=n.split(".")[1],a=o.replace("-","+").replace("_","/"),i=JSON.parse(e.atob(a));return i}}function a(e,t,n,o){var a=this;a.isAuthed=function(){var e=n.getParsedToken();return e?Math.round((new Date).getTime()/1e3)<=e.exp:!1},a.getPermissions=function(){var e=n.getParsedToken();return e?e["passport/@scopes"].split(","):[]},a.login=function(o,a){var i={method:"POST",url:t.get("AUTH_API_URL")+"/auth",headers:{"Content-Type":"application/json"},data:{username:o,password:a}};return e(i).success(function(e){return e.token&&n.saveToken(e.token),e}).error(function(e){return e})},a.hasAccessTo=function(e){var t=a.getPermissions(),n=o.getGlobalPermissions(),i=n[e];return i?-1!=t.indexOf(i):!1},a.logout=function(){n.removeToken()}}function i(e){return{request:function(t){var n=e.getToken();return n&&!t.headers.Authorization&&(t.headers.Authorization="Bearer "+n),t.headers.Accept="application/json",t},response:function(e){return e}}}angular.module("qorDash.auth").service("auth",o).service("user",a).factory("authInterceptor",i).run(n).directive("userSection",t).directive("userActions",e),n.$inject=["$rootScope","$state","user"],o.$inject=["$window"],a.$inject=["$http","$injector","auth","dataLoader"],i.$inject=["auth"]}(),function(){"use strict";function e(){var e=angular.injector(["ng"]),t=e.get("$http");return t.get("data/global-config.json").then(function(e){var t=e.data["auth-url"],o=e.data["api-url"],a=e.data["ws-url"],i=e.data["icon-url"],r=e.data["login-page-icon-url"],s=e.data.auth_api_user,c=e.data.auth_api_secret;n.constant("AUTH_API_URL",t),n.constant("API_URL",o),n.constant("WS_URL",a),n.constant("ICON_URL",i),n.constant("LOGIN_PAGE_ICON_URL",r),n.constant("AUTH_API_USER",s),n.constant("DOCKER_ENDPOINT",o+"/v1/dockerapi"),n.constant("AUTH_API_SECRET",c)},function(){})}function t(){angular.element(document).ready(function(){angular.bootstrap(document,["qorDash"])})}var n=angular.module("qorDash",["qorDash.loaders","qorDash.core","qorDash.auth","qorDash.dashboard","qorDash.domains","qorDash.deployment","qorDash.compose","qorDash.configurations","qorDash.orchestrate","qorDash.manage","qorDash.docker"]);e().then(t)}(),angular.module("qorDash").run(["$templateCache",function(e){e.put("app/modules/compose/compose-sub-sub-sub-sub.html",'<section horizontal-ui-sheet=""><header horizontal-ui-sheet-header="" title="Compose sub test"></header><div horizontal-ui-sheet-content=""><p>Compose sub page to test nested navigation</p></div></section>'),e.put("app/modules/compose/compose-sub-sub-sub.html",'<section horizontal-ui-sheet=""><header horizontal-ui-sheet-header="" title="Compose sub test"></header><div horizontal-ui-sheet-content=""><p>Compose sub page to test nested navigation</p><a ui-sref="app.compose.sub.sub.sub.sub">Test nested navigation</a></div></section>'),e.put("app/modules/compose/compose-sub-sub.html",'<section horizontal-ui-sheet=""><header horizontal-ui-sheet-header="" title="Compose sub test"></header><div horizontal-ui-sheet-content=""><p>Compose sub page to test nested navigation</p><a ui-sref="app.compose.sub.sub.sub">Test nested navigation</a></div></section>'),e.put("app/modules/compose/compose-sub.html",'<section horizontal-ui-sheet=""><header horizontal-ui-sheet-header="" title="Compose sub test"></header><div horizontal-ui-sheet-content=""><p>Compose sub page to test nested navigation</p><a ui-sref="app.compose.sub.sub">Test nested navigation</a></div></section>'),e.put("app/modules/compose/compose.html",'<section horizontal-ui-sheet="" class="qor-sheet-full"><div horizontal-ui-sheet-content=""><h1 class="page-title">Compose</h1><a ui-sref="app.compose.sub">Test nested navigation</a></div></section>'),e.put("app/modules/auth/login.html",'<div class="container"><main id="content" class="widget-login-container" role="main"><div class="row"><div class="col-lg-4 col-sm-6 col-xs-10 col-lg-offset-4 col-sm-offset-3 col-xs-offset-1"><section class="widget widget-login animated fadeInUp"><header><img src="{{vm.ICON_URL}}" class="login-logo" width="250"></header><div class="widget-body"><form class="login-form mt-lg" ng-submit="vm.login()"><p class="error-message" ng-show="vm.errorMessage">{{vm.errorMessage}}</p><div class="form-group has-feedback"><input type="text" class="form-control" id="inputUserNme" ng-model="vm.userCredentials.login" placeholder="Username" required="required"> <span class="glyphicon glyphicon-user form-control-feedback"></span></div><div class="form-group has-feedback small-margin"><input class="form-control" id="inputPassword" type="password" placeholder="Password" ng-model="vm.userCredentials.password" required="required"> <span class="glyphicon glyphicon-lock form-control-feedback"></span></div><div class="clearfix"><div class="btn-toolbar login-toolbar pull-right"><button class="btn btn-inverse btn-sm btn-login" id="loginButton" data-loading-text="Loading..." type="submit">Log In</button> <a id="google-signin" g-signin="" class="btn btn-block btn-social btn-google btn-default btn-sm btn-signup g-signin2"><i class="fa fa-google"></i>Sign in with Google</a></div></div><div class="row widget-login-footer"><div class="col-sm-6 col-sm-push-6"><div class="clearfix"><div class="checkbox widget-login-info pull-right ml-n-lg"><input type="checkbox" id="checkbox1" value="1"> <label for="checkbox1">Keep me signed in</label></div></div></div><div class="col-sm-6 col-sm-pull-6"><a class="mr-n-lg login-trouble" href="#">Trouble with account?</a></div></div></form></div><div class="login-page-footer text-center">2015 &copy; {{app.title}}</div></section></div></div></main></div>'),e.put("app/modules/configurations/configurations.html",'<section horizontal-ui-sheet="" class="qor-sheet-s"><header horizontal-ui-sheet-header="" title="Domain Class"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope"><a class="list-group-item" ng-repeat="domain in domains | orderBy:\'\'" ui-sref-active="active" ui-sref=".services({domain : domain.id})">{{domain.name}}</a></div><div id="env-loader" ng-hide="domains || error"><img src="assets/images/cube.gif"></div><div id="reload" ng-hide="!error"><a ui-sref="app.configurations" data-ui-sref-opts="{reload: true}"><i class="fa fa-refresh reload-button"></i></a></div></div></section>'),e.put("app/modules/core/app.html",'<div class="qor-app" qor-sidebar-container=""><header class="qor-header"><a class="qor-sidebar-toggle" ng-click="vm.toggleSidebar()"><i class="fa fa-bars"></i></a> <span class="qor-header-userinfo pull-right">{{vm.title}}</span></header><nav qor-sidebar=""></nav><main horizontal-ui-view="main" horizontal-scroll="" class="shuffle-animation" qor-content=""></main></div>'),e.put("app/modules/dashboard/dashboard.html",'<section horizontal-ui-sheet="" class="qor-sheet-full"><div horizontal-ui-sheet-content=""><div class="widget-container"><div ql-widget="Events" ws-url="eventsWsUrl"></div></div></div></section>'),e.put("app/modules/deployment/deployment.html",'<div class="widget-container"><div ql-widget="Timeline" ws-url="wsTimelineUrl"></div></div>'),e.put("app/modules/docker/docker.html",'<section horizontal-ui-sheet="" class="qor-sheet-s"><header horizontal-ui-sheet-header="" title="Docker"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope"><a class="list-group-item" ng-repeat="domain in domains | orderBy:\'\'" ui-sref-active="active" ui-sref="app.docker.domain({id : domain.id})">{{domain.name}}</a></div><div id="env-loader" ng-hide="domains || error"><img src="assets/images/cube.gif"></div><div id="reload" ng-hide="!error"><a ui-sref="app.docker" data-ui-sref-opts="{reload: true}"><i class="fa fa-refresh reload-button"></i></a></div></div></section>'),e.put("app/modules/domains/domains-sidebar.html",'<div class="group-block"><a class="group-list-item" ui-sref-active="active" ng-repeat="domain in domains" ui-sref="app.domains({id: domain.id})"><i class="group-icon fa fa-mobile"></i> <span class="group-nav-heading">{{domain.name}}</span></a></div>'),e.put("app/modules/domains/domains.html",'<section horizontal-ui-sheet="" class="qor-sheet-s"><header horizontal-ui-sheet-header="" title="Domains"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope"><a class="list-group-item" ng-repeat="domain in domains | orderBy:\'\'" ui-sref-active="active" ui-sref="app.domains.domain({id : domain.id})">{{domain.name}}</a></div><div id="env-loader" ng-hide="domains || error"><img src="assets/images/cube.gif"></div><div id="reload" ng-hide="!error"><a ui-sref="app.domains" data-ui-sref-opts="{reload: true}"><i class="fa fa-refresh reload-button"></i></a></div></div></section>'),e.put("app/modules/manage/manage.html",'<section horizontal-ui-sheet="" class="qor-sheet-s"><header horizontal-ui-sheet-header="" title="Manage"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope"><a class="list-group-item" ui-sref-active="active" ui-sref="app.manage.accounts">Accounts</a> <a class="list-group-item" ui-sref-active="active" ui-sref="app.manage.settings">Settings</a></div></div></section>'),e.put("app/modules/orchestrate/orchestrate.html",'<section horizontal-ui-sheet="" class="qor-sheet-half"><header horizontal-ui-sheet-header="" title="Domains"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope"><a class="list-group-item" ng-repeat="domain in domains | orderBy:\'\'" ui-sref-active="active" ui-sref="app.orchestrate.domain({id : domain.id})">{{domain.name}}</a></div><div id="env-loader" ng-hide="domains || error"><img src="assets/images/cube.gif"></div><div id="reload" ng-hide="!error"><a ui-sref="app.orchestrate" data-ui-sref-opts="{reload: true}"><i class="fa fa-refresh reload-button"></i></a></div></div></section>'),e.put("app/widgets/domain_details/domain_details.html",'<div class="well" ng-if="node.logs"><div class="btn-group" dropdown="" dropdown-append-to-body=""><button type="button" class="btn btn-primary dropdown-toggle" dropdown-toggle="">Logs <span class="caret"></span></button><ul class="dropdown-menu" role="menu"><li ng-repeat="log in node.logs"><a ui-sref="app.domains.domain.env.network.node.logs">{{log}}</a></li></ul></div></div>'),e.put("app/widgets/container/container.html",'<div class="container-select"><select id="select-type"><option value="hosts">By Hosts</option><option value="services">By Services</option><option value="az">By AZ</option></select></div><div class="container-select"><select id="select-prop"></select></div><ql-container class="container-view"></ql-container>'),e.put("app/widgets/domain_stat/domain_stat.html",'<div ng-controller="DomainStatController"><div class="row domain-stat domain-stat-details"><div class="col-md-4 col-sm-6" ng-repeat="service in services"><section class="widget widget-stat-details purple"><div class="widget-caption purple">{{service.name}}</div><div class="row"><div class="col-md-3 widget-stat-little-block no-left-border"><h3>{{service.containers}}</h3><p class="text-muted">container</p></div><div class="col-md-3 widget-stat-little-block"><h3>{{service.cpu}}</h3><p class="text-muted">cpu</p></div><div class="col-md-3 widget-stat-little-block"><h3>{{service.memory}}</h3><p class="text-muted">memory</p></div><div class="col-md-3 widget-stat-little-block"><h3>{{service.disk}}</h3><p class="text-muted">disk</p></div></div><div class="row widget-stat-other-details"><div class="col-md-3 right-text"><p class="text-muted">image</p><p class="text-muted">config</p><p class="text-muted">git_commit</p><p class="text-muted">last_update</p></div><div class="col-md-9"><p class="b" ng-bind-html="putVarOrSpace(service.image)"></p><p class="b" ng-bind-html="putVarOrSpace(service.config)"></p><p class="b" ng-bind-html="putVarOrSpace(service.git_commit)"></p><p class="b" ng-bind-html="putVarOrSpace(applyFilter(service.last_update * 1000, \'date\', \'yyyy-MM-dd HH:mm:ss\'))"></p></div></div></section></div></div></div>'),e.put("app/widgets/events/events.html",'<div id="events"><ul class="timeline" style="padding: 10px 0 0 0; margin-bottom: 0px;" ng-controller="EventsController"><li class="on-left" ng-repeat="event in events" id="{{::event.id | limitTo:7}}"><time class="event-time" datetime="{{::event.timestamp}}"><span class="date">{{::event.timestamp * 1000 | date: \'EEE\'}}</span> <span class="time">{{::event.timestamp * 1000 | date: \'shortTime\'}}</span></time><section class="event event-padding" ng-class="{\'fatal\' : event.status == \'fatal\', \'warning\' : event.status == \'warning\'}"><h4 class="event-heading"><a ng-click="showDetails(event)">{{event.title}}</a></h4><p class="fs-sm text-muted">{{::event.timestamp * 1000 | date:\'EEEE, MMMM d, y HH:mm:ss\'}}</p><p class="fs-mini">{{::event.description}}</p></section></li></ul></div>'),e.put("app/widgets/network/network.html",'<div ql-network="" class="network"></div>'),e.put("app/widgets/terminal/terminal.html",'<div id="terminal" ql-terminal="" ng-controller="TerminalController"></div>'),e.put("app/widgets/traffic/traffic.html",'<ql-traffic class="network" bar-height="20" bar-padding="5"></ql-traffic>'),e.put("app/widgets/timeline/timeline.html",'<div id="timeline" ql-time-line=""><ul class="timeline" style="padding: 10px; margin-bottom: 0px;" ng-controller="TimelineController"><li class="on-left" ng-repeat="event in events" id="{{::event.id | limitTo:7}}"><time class="event-time" datetime="{{::event.timestamp}}"><span class="date">{{::event.timestamp * 1000 | date: \'EEE\'}}</span> <span class="time">{{::event.timestamp * 1000 | date: \'shortTime\'}}</span></time><section class="event"><h4 class="event-heading"><a ng-click="showDetails(event)">{{event.title}}</a></h4><p class="fs-sm text-muted">{{::event.timestamp * 1000 | date:\'EEEE, MMMM d, y HH:mm:ss\'}}</p><p class="fs-mini">{{::event.text}}</p><footer><ul class="post-links"><li><a href="#" data-original="{{::event.timestamp}}">{{::event.timestamp * 1000 | relativeDate }}</a></li><a class="details-link" style="visibility: hidden;" ng-click="showDetails(event)"><img src="assets/images/collapse-button.png" height="20px" width="20px"></a></ul><div collapse="event.isInfoCollapsed"><div class="terminal-wrapper mt-sm"><div></div></div></div></footer></section></li></ul></div>'),e.put("app/modules/configurations/services/services.html",'<section horizontal-ui-sheet="" class="qor-sheet-s"><header horizontal-ui-sheet-header="" title="Services"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope"><a class="list-group-item" ng-repeat="service in services | orderBy:\'\'" ui-sref-active="active" ui-sref=".state({service: service})">{{service}}</a></div><div id="env-loader" ng-hide="services || error"><img src="assets/images/cube.gif"></div><div id="reload" ng-hide="!error"><a ui-sref="app.configurations.services" data-ui-sref-opts="{reload: true}"><i class="fa fa-refresh reload-button"></i></a></div></div></section>'),e.put("app/modules/docker/domain/domain.html",'<section horizontal-ui-sheet="" class="qor-sheet-s"><header horizontal-ui-sheet-header="" title="{{domain.name}}"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope"><a class="list-group-item" ng-repeat="instance in domain.instances | orderBy:\'\'" ui-sref-active="active" ui-sref="app.docker.domain.dockers({instance : instance})">{{instance}}</a></div><div id="env-loader" ng-hide="domain || error"><img src="assets/images/cube.gif"></div><div id="reload" ng-hide="!error"><a ui-sref="app.docker.domain" data-ui-sref-opts="{reload: true}"><i class="fa fa-refresh reload-button"></i></a></div></div></section>'),e.put("app/modules/domains/domain/domain.html",'<section horizontal-ui-sheet="" class="qor-sheet-s"><header horizontal-ui-sheet-header="" title="{{domain.name}}"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope"><a class="list-group-item" ng-repeat="environment in domain.instances | orderBy:\'\'" ui-sref-active="active" ui-sref="app.domains.domain.env({env : environment})">{{environment}}</a></div><div id="env-loader" ng-hide="domain || error"><img src="assets/images/cube.gif"></div><div id="reload" ng-hide="!error"><a ui-sref="app.domains.domain" data-ui-sref-opts="{reload: true}"><i class="fa fa-refresh reload-button"></i></a></div></div></section>'),e.put("app/modules/domains/environment/environment.html",'<section horizontal-ui-sheet="" class="qor-sheet-full"><header horizontal-ui-sheet-header="" title="{{domain.name}} > {{environment.name}}"></header><div horizontal-ui-sheet-content="" class="no-padding"><div ui-layout="{ flow : \'column\' }" class="domains-layout"><div ui-layout-container="" size="80%"><div class="col-lg-12" ql-widget="domain_stat"></div></div><div ui-layout-container=""><div class="row"><div ui-layout="{flow : \'row\'}"><div ui-layout-container="" class="col-lg-9" auto-scroll="" style="width: 100%;"><div ql-widget="Events" ws-url="eventsWsUrl"></div></div><div ui-layout-container="" class="col-lg-9" size="30%" style="overflow-x: hidden; width: 100%;"><button type="button" ui-sref="app.domains.domain.env.network" ui-sref-active="active" class="btn btn-lg env-button" style="top: 10px;">Network</button> <button type="button" ui-sref="app.domains.domain.env.resources" ui-sref-active="active" class="btn btn-lg env-button" style="top: 70px;">Resources</button> <button type="button" class="btn btn-lg env-button" style="top: 130px;">Traffic</button></div></div></div></div></div></div></section>'),e.put("app/modules/domains/network/network.html",'<section horizontal-ui-sheet="" class="qor-sheet-fill"><header horizontal-ui-sheet-header="" title="Network"></header><div horizontal-ui-sheet-content=""><div ql-widget="network"></div></div></section>'),e.put("app/modules/domains/node/node.html",'<section horizontal-ui-sheet=""><header horizontal-ui-sheet-header="" title="{{node.name}}"></header><div horizontal-ui-sheet-content=""><div ql-widget="domain_details"></div></div></section>'),e.put("app/modules/domains/node-logs/log-details.html",'<script type="text/javascript">\n    var domTerminal = $(\'#logs-terminal\');\n\n    setTimeout(function () {\n        var terminal = $(\'#terminal\').terminal();\n        var newData = terminal.get_output();\n        terminal.clear();\n        terminal.terminal().echo(currentData);\n        terminal.echo(newData);\n    }, 1000);\n\n    domTerminal.attr(\'ws-url\', url);\n</script><div id="logs-terminal" class="log-details" ql-widget="Terminal" ws-url="\'wss://ops-dev.blinker.com/v1/events\'"></div>'),e.put("app/modules/domains/node-logs/node-logs.html",'<section horizontal-ui-sheet="" class="qor-sheet-fill"><header horizontal-ui-sheet-header="" title="Logs"></header><div horizontal-ui-sheet-content="" class="logs"><span log-new-window="" class="fa fa-inverse fa-external-link new-window-icon"></span><div id="logs-terminal" ql-widget="Terminal" ws-url="\'wss://ops-dev.blinker.com/v1/events\'"></div></div></section>'),e.put("app/modules/domains/resources/resources.html",'<section horizontal-ui-sheet="" class="qor-sheet-full"><header horizontal-ui-sheet-header="" title="Resources"></header><div horizontal-ui-sheet-content=""><div ql-widget="container"></div></div></section>'),e.put("app/modules/manage/accounts/accounts.html",'<section horizontal-ui-sheet="" class="qor-sheet-xs"><header horizontal-ui-sheet-header="" title="Accounts"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope" ng-show="vm.accounts.length"><div class="align-text-right"><button class="btn btn-warning add-new-account-button" ng-click="vm.newUser()">Create new</button></div><div class="list-group"><a class="list-group-item" ng-repeat="account in vm.accounts" ui-sref-active="active" ui-sref="app.manage.accounts.account({id : account.id})"><i class="fa fa-user accounts-list-user-icon"></i> {{ account.primary.username || account.primary.email || account.primary.oauth2_account_id || \'???\'}}</a></div></div><div id="env-loader" ng-hide="vm.accounts.length || vm.error"><img src="assets/images/cube.gif"></div><div id="reload" ng-hide="!vm.error"><a ui-sref="." data-ui-sref-opts="{reload: true}"><i class="fa fa-refresh reload-button"></i></a></div></div></section>'),e.put("app/modules/manage/accounts/new-user-modal.html",'<div class="modal-header"></div><div class="modal-body text-center"><form class="form-horizontal"><div class="form-group"><div class="col-sm-12"><input type="text" class="form-control" ng-model="vm.username" placeholder="Username"></div></div><div class="form-group"><div class="col-sm-12"><input type="email" class="form-control" ng-model="vm.email" placeholder="Email"></div></div><div class="form-group"><div class="col-sm-12"><input type="password" class="form-control" ng-model="vm.password" placeholder="Password"></div></div><div class="form-group"><label for="custom_object" class="col-sm-2 control-label">Custom JSON</label><div class="col-sm-10"><textarea id="custom_object" class="form-control" ng-model="vm.custom_object"></textarea></div></div></form></div><div class="modal-footer"><button class="btn btn-primary" type="button" ng-click="vm.ok()">Yes</button> <button class="btn btn-warning" type="button" ng-click="vm.cancel()">Cancel</button></div>'),e.put("app/modules/manage/settings/settings.html",'<section horizontal-ui-sheet="" class="qor-sheet-s"><header horizontal-ui-sheet-header="" title="Settings"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope"><a class="list-group-item" ui-sref-active="active" ui-sref="app.manage.settings.authentication">Authentication Service</a></div></div></section>'),e.put("app/modules/orchestrate/domain/domain.html",'<section horizontal-ui-sheet="" class="qor-sheet-half"><header horizontal-ui-sheet-header="" title="{{domain.name}}"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope"><a class="list-group-item" ng-repeat="environment in domain.instances | orderBy:\'\'" ui-sref-active="active" ui-sref="app.orchestrate.domain.instance({inst : environment})">{{environment}}</a></div><div id="env-loader" ng-hide="domain || error"><img src="assets/images/cube.gif"></div><div id="reload" ng-hide="!error"><a ui-sref="app.orchestrate.domain\'" data-ui-sref-opts="{reload: true}"><i class="fa fa-refresh reload-button"></i></a></div></div></section>'),e.put("app/modules/orchestrate/history/history.html",'<section horizontal-ui-sheet="" class="qor-sheet-half"><header horizontal-ui-sheet-header="" title="{{title}}"></header><div horizontal-ui-sheet-content=""><button class="btn btn-warning orchestrate-run-new-button" ui-sref="app.orchestrate.domain.instance.history.option({opt_id : \'new\'})">New</button><div class="list-group text-left ng-scope" ng-show="previousCalls.length > 0"><table class="orchestrate-history-table"><thead><tr><th class="p10">Status</th><th class="p20">Started on</th><th class="p15">User name</th><th class="p30">Note</th><th class="p20">Completed on</th></tr></thead><tbody><tr ng-repeat="call in previousCalls" ui-sref="app.orchestrate.domain.instance.history.option({opt_id : call.id})" ui-sref-active="active"><td class="history-table-icon-item"><span class="glyphicon" ng-class="{\'error glyphicon-remove-sign\': call.status == \'error\', \'warning glyphicon-info-sign\': call.status == \'Started\', \'success glyphicon-ok-sign\': call.status == \'completed\'}"></span></td><td>{{call.start_time | date : \'medium\'}}</td><td>{{call.user}}</td><td>{{call.note}}</td><td>{{call.completion_time | date : \'medium\'}}</td></tr></tbody></table></div><div id="env-loader" ng-hide="previousCalls || error"><img src="assets/images/cube.gif"></div><div id="reload" ng-hide="!error"><a ui-sref="app.orchestrate.domain.instance.history" data-ui-sref-opts="{reload: true}"><i class="fa fa-refresh reload-button"></i></a></div></div></section>'),e.put("app/modules/orchestrate/instance/instance.html",'<section horizontal-ui-sheet="" class="qor-sheet-half"><header horizontal-ui-sheet-header="" title="{{title}}"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope"><a class="list-group-item" ng-repeat="workflow in workflows | orderBy:\'label\'" ui-sref-active="active" ui-sref="app.orchestrate.domain.instance.history({opt : workflow.name})">{{workflow.label}}</a></div><div id="env-loader" ng-hide="workflows.length || error"><img src="assets/images/cube.gif"></div><div id="reload" ng-hide="!error"><a ui-sref="app.orchestrate.domain.instance" data-ui-sref-opts="{reload: true}"><i class="fa fa-refresh reload-button"></i></a></div></div></section>'),e.put("app/modules/orchestrate/option/option.html",'<section horizontal-ui-sheet="" class="qor-sheet-half"><header horizontal-ui-sheet-header="" title="{{title}}"></header><div horizontal-ui-sheet-content=""><div id="env-loader" ng-hide="workflow || error"><img src="assets/images/cube.gif"></div><div id="reload" ng-hide="!error"><a ui-sref="app.orchestrate.domain.instance.history.option" data-ui-sref-opts="{reload: true}"><i class="fa fa-refresh reload-button"></i></a></div><form class="form-horizontal orchestration-parameters"><fieldset id="dynamic-form"></fieldset><div class="form-group"><div class="col-md-4"></div><div class="col-md-4 text-align-right"><button type="button" ng-click="sendMessage()" ng-show="workflow" id="sendMessageButton" class="btn btn-warning">Run</button></div></div></form><hr><div id="timelineContainer"></div></div></section>'),e.put("app/modules/configurations/services/state/state.html",'<section horizontal-ui-sheet="" class="qor-sheet-s"><header horizontal-ui-sheet-header="" title="Configurations"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope"><a class="list-group-item" ui-sref-active="active" ui-sref=".files">Configuration Files</a> <a class="list-group-item" ui-sref-active="active" ui-sref=".instances">Environment Variables</a> <a class="list-group-item" ui-sref-active="active" ui-sref=".packages">Packages</a></div></div></section>'),e.put("app/modules/docker/domain/dockers/dockers.html",'<section horizontal-ui-sheet="" class="qor-sheet-s"><header horizontal-ui-sheet-header="" title="{{instance}}"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope"><a class="list-group-item" ng-repeat="(host, docker) in dockers | orderBy:\'\'" ui-sref-active="active" ui-sref="app.docker.domain.dockers.menu({dockerId: host})">{{host}}</a></div><div id="env-loader" ng-hide="domain || error"><img src="assets/images/cube.gif"></div><div id="reload" ng-hide="!error"><a ui-sref="app.docker.domain.dockers" data-ui-sref-opts="{reload: true}"><i class="fa fa-refresh reload-button"></i></a></div></div></section>'),e.put("app/modules/manage/accounts/account/account.html",'<section horizontal-ui-sheet="" class="qor-sheet-xs"><header horizontal-ui-sheet-header="" title="{{ account.primary.username }}"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope" ng-show="account"><div class="row"><div class="col-md-4 user-info-titles"><p>ID:</p><p ng-show="account.primary.username">Username:</p><p ng-show="account.primary.email">Email:</p><p ng-show="account.primary.phone">Phone:</p><p ng-show="account.primary.oauth2_provider">OAuth2 Provider:</p><p ng-show="account.primary.oauth2_account_id">Oauth2 Account ID:</p></div><div class="col-md-8"><p>{{ account.id}}</p><p ng-show="account.primary.username">{{account.primary.username}}</p><p ng-show="account.primary.email">{{ account.primary.email }}</p><p ng-show="account.primary.phone">{{ account.primary.phone }}</p><p ng-show="account.primary.oauth2_provider">{{account.primary.oauth2_provider}}</p><p ng-show="account.primary.oauth2_account_id">{{account.primary.oauth2_account_id}}</p></div></div><table class="table"><thead><tr><th>ID</th><th>Scopes</th></tr></thead><tbody><tr ng-repeat="service in account.services"><td>{{service.id}}</td><td><li ng-repeat="scope in service.scopes">{{ scope }}</li></td></tr></tbody></table></div><div id="env-loader" ng-hide="account || error"><img src="assets/images/cube.gif"></div><div id="reload" ng-hide="!error"><a ui-sref="app.manage.accounts.account\'" data-ui-sref-opts="{reload: true}"><i class="fa fa-refresh reload-button"></i></a></div></div></section>'),e.put("app/modules/manage/settings/authentication/authentication.html",'<section horizontal-ui-sheet="" class="qor-sheet-s"><header horizontal-ui-sheet-header="" title="Authentication Service"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope"><a class="list-group-item" ui-sref-active="active" ui-sref="app.manage.settings.authentication.domain({authDomain: domain.domain})" ng-repeat="domain in domains">{{domain.domain}}</a></div><div id="env-loader" ng-hide="domains || error"><img src="assets/images/cube.gif"></div><div id="reload" ng-hide="!error"><a ui-sref="." data-ui-sref-opts="{reload: true}"><i class="fa fa-refresh reload-button"></i></a></div></div></section>'),e.put("app/modules/configurations/services/state/files/files.html",'<section horizontal-ui-sheet="" class="qor-sheet-s"><header horizontal-ui-sheet-header="" title="Files"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope"><a class="list-group-item" ng-repeat="file in instance.objects | orderBy:\'\'" ui-sref-active="active" ui-sref=".files-view({file: file})">{{file}}</a></div><div id="env-loader" ng-hide="instance || error"><img src="assets/images/cube.gif"></div><div id="reload" ng-hide="!error"><a ui-sref="app.configurations.services.state.files" data-ui-sref-opts="{reload: true}"><i class="fa fa-refresh reload-button"></i></a></div><div class="new-file-button"><button class="btn btn-warning" ng-click="openNewFileModal()" type="button">Add new</button></div></div></section>'),e.put("app/modules/configurations/services/state/files/new-file-modal.html",'<div class="modal-header"><button type="button" class="close" ng-click="cancel()" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4>Create new file</h4></div><div class="modal-body text-center"><form class="form-horizontal"><div class="form-group"><div class="col-sm-12"><input type="text" class="form-control" ng-model="fileName" placeholder="File name"></div></div><div class="form-group"><div class="col-lg-12"><textarea id="new_file_content" class="form-control" type="text" ng-model="fileContent"></textarea></div></div></form></div><div class="modal-footer"><button class="btn btn-primary" type="button" ng-click="ok($event)">Create</button> <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button></div>'),e.put("app/modules/configurations/services/state/files/new-version-modal.html",'<div class="modal-header"><button type="button" class="close" ng-click="cancel()" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4>Create new version</h4></div><div class="modal-body text-center"><form class="form-horizontal"><div class="form-group"><div class="col-sm-12"><input type="text" class="form-control" ng-model="versionName" placeholder="New version name"></div></div></form></div><div class="modal-footer"><button class="btn btn-primary" type="button" ng-click="ok($event)">Create</button> <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button></div>'),e.put("app/modules/configurations/services/state/instances/instances.html",'<section horizontal-ui-sheet="" class="qor-sheet-s"><header horizontal-ui-sheet-header="" title="Instances"></header><div horizontal-ui-sheet-content=""><table class="instances-table"><thead><tr><th></th><th></th></tr></thead><tbody><tr ng-repeat="instance in instances | orderBy:\'\'"><td>{{instance}}</td><td><input ng-click="changeState(checked[instance])" class="new-checkbox" id="input-{{instance}}" name="input-{{instance}}" ng-model="checked[instance]" type="checkbox"><label class="pull-right" for="input-{{instance}}"></label></td></tr></tbody></table><button ng-show="saveAvailableHelper > 0" type="button" ng-click="show()" id="sendMessageButton" class="btn btn-warning config-instances-button">Show</button><div id="env-loader" ng-hide="services || error"><img src="assets/images/cube.gif"></div><div id="reload" ng-hide="!error"><a ui-sref="app.configurations.services.state.instances" data-ui-sref-opts="{reload: true}"><i class="fa fa-refresh reload-button"></i></a></div></div></section>'),e.put("app/modules/configurations/services/state/packages/packages.html",'<section horizontal-ui-sheet="" class="qor-sheet-s"><header horizontal-ui-sheet-header="" title="Packages"></header><div horizontal-ui-sheet-content=""><table class="instances-table"><thead><tr><th></th><th></th></tr></thead><tbody><tr ng-repeat="instance in instances | orderBy:\'\'"><td>{{instance}}</td><td><input ng-click="changeState(checked[instance])" class="new-checkbox" id="input-{{instance}}" name="input-{{instance}}" ng-model="checked[instance]" type="checkbox"><label class="pull-right" for="input-{{instance}}"></label></td></tr></tbody></table><button ng-show="saveAvailableHelper > 0" type="button" ng-click="show()" id="sendMessageButton" class="btn btn-warning config-instances-button">Show</button><div id="env-loader" ng-hide="services || error"><img src="assets/images/cube.gif"></div><div id="reload" ng-hide="!error"><a ui-sref="app.configurations.services.state.packages" data-ui-sref-opts="{reload: true}"><i class="fa fa-refresh reload-button"></i></a></div></div></section>'),e.put("app/modules/docker/domain/dockers/menu/menu.html",'<section horizontal-ui-sheet="" class="qor-sheet-s"><header horizontal-ui-sheet-header="" title="{{dockerId}}"></header><div horizontal-ui-sheet-content=""><div class="list-group text-left ng-scope"><a class="list-group-item" ui-sref-active="active" ui-sref="app.docker.domain.dockers.menu.summary">Summary</a></div><div class="list-group text-left ng-scope"><a class="list-group-item" ui-sref-active="active" ui-sref="app.docker.domain.dockers.menu.containers">Containers</a></div><div class="list-group text-left ng-scope"><a class="list-group-item" ui-sref-active="active" ui-sref="app.docker.domain.dockers.menu.images">Images</a></div><div class="list-group text-left ng-scope"><a class="list-group-item" ui-sref-active="active" ui-sref="app.docker.domain.dockers.menu.info">Info</a></div></div></section>'),e.put("app/modules/manage/settings/authentication/domain/domain.html",'<section horizontal-ui-sheet="" class="qor-sheet-half"><header horizontal-ui-sheet-header="" title="{{domain.domain}}"></header><div horizontal-ui-sheet-content=""><table class="table" ng-repeat="(serviceName,service) in domain.services"><tr style="text-align: center;"><td>{{service.name}}</td></tr><tr><td>url</td><td>{{service.url}}</td></tr><tr style="text-align: center;"><td>WebHooks</td></tr><tr ng-repeat="(hookName, hook) in service.webhooks"></tr></table></div></section>'),e.put("app/modules/configurations/services/state/files/files-diff/files-diff.html",'<section horizontal-ui-sheet="" class="qor-sheet-full"><header horizontal-ui-sheet-header="" title="{{fileName}} - {{selectedInstance}} - {{selectedVersion}} vs {{fileName}} - {{selectedSecondInstance}} - {{selectedSecondVersion}}"></header><div horizontal-ui-sheet-content=""><div class="editor-content"><div class="btn-toolbar pull-right mt-0"><div class="btn-group"><div dropdown="" dropdown-append-to-body="" class="dropdown"><button class="btn btn-default config-table-header-button" dropdown-toggle="">{{selectedSecondInstance ? selectedSecondInstance : \'- Choose instance -\'}}<span class="fa fa-angle-down pull-right"></span></button><ul class="dropdown-menu"><li ng-repeat="instance in instance.instances" ng-class="{\'li-active\' : isSecondInstanceActive(instance)}"><a ng-click="selectSecondInstance(instance)">{{instance}}</a></li></ul></div></div><div class="btn-group"><div dropdown="" dropdown-append-to-body="" class="dropdown"><button class="btn btn-default config-table-header-button" dropdown-toggle="">{{selectedSecondVersion ? selectedSecondVersion : \'- Choose version -\'}} <span class="label label-success" ng-show="isSecondVersionLive(selectedSecondVersion)">Live</span><span class="fa fa-angle-down pull-right"></span></button><ul class="dropdown-menu"><li ng-repeat="version in instance.versions" ng-class="{\'li-active\' : isSecondVersionActive(version)}"><a ng-click="selectSecondVersion(version)">{{version}} <span class="label label-success pull-right" ng-show="isSecondVersionLive(version)">Live</span></a></li></ul></div></div></div><div class="btn-toolbar mt-0 mb-0"><div class="btn-group"><div dropdown="" dropdown-append-to-body="" class="dropdown"><button class="btn btn-default config-table-header-button" dropdown-toggle="">{{selectedFirstInstance ? selectedFirstInstance : \'- Choose instance -\'}}<span class="fa fa-angle-down pull-right"></span></button><ul class="dropdown-menu"><li ng-repeat="instance in instance.instances" ng-class="{\'li-active\' : isFirstInstanceActive(instance)}"><a ng-click="selectFirstInstance(instance)">{{instance}}</a></li></ul></div></div><div class="btn-group"><div dropdown="" dropdown-append-to-body="" class="dropdown"><button class="btn btn-default config-table-header-button" dropdown-toggle="">{{selectedFirstVersion ? selectedFirstVersion : \'- Choose version -\'}} <span class="label label-success" ng-show="isFirstVersionLive(selectedFirstVersion)">Live</span><span class="fa fa-angle-down pull-right"></span></button><ul class="dropdown-menu"><li ng-repeat="version in instance.versions" ng-class="{\'li-active\' : isFirstVersionActive(version)}"><a ng-click="selectFirstVersion(version)">{{version}} <span class="label label-success pull-right" ng-show="isFirstVersionLive(version)">Live</span></a></li></ul></div></div></div><div class="filled-content"><pre ng-show="firstFileData && secondFileData" class="textdiff" line-diff="" left-obj="firstFileData" right-obj="secondFileData">\n        </pre></div></div></div></section>'),e.put("app/modules/configurations/services/state/files/files-view/files-clone-modal.html",'<div class="modal-header"><button type="button" class="close" ng-click="cancel()" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">Clone <span class="fw-semi-bold">{{instance}}</span>-<span class="fw-semi-bold">{{version}}</span> to</h4></div><div class="modal-body"><div class="row"><div class="col-md-7"><input type="text" class="form-control" ng-model="newVersionName" placeholder="New version name"></div><div class="col-md-1 config-modal-devider">in</div><div class="col-md-4"><select id="select-type" ng-model="targetInstance" class="form-control"><option value="">---Target instance---</option><option ng-repeat="instance in instances" value="{{instance}}">{{instance}}</option></select></div></div></div><div class="modal-footer"><button class="btn btn-primary" id="config-modal-ok-button" type="button" ng-click="ok()">OK</button> <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button></div>'),e.put("app/modules/configurations/services/state/files/files-view/files-delete-modal.html",'<div class="modal-header"><button type="button" class="close" ng-click="cancel()" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">Delete file</h4></div><div class="modal-body text-center"><p>Are you sure you want to permanently delete this file?<br><span class="fw-semi-bold">{{fileName}}-{{instance}}-{{version}}</span></p></div><div class="modal-footer"><button class="btn btn-primary" id="config-modal-ok-button" type="button" ng-click="ok()">Yes</button> <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button></div>'),e.put("app/modules/configurations/services/state/files/files-view/files-view.html",'<section horizontal-ui-sheet="" class="qor-sheet-full"><header horizontal-ui-sheet-header="" title="{{domain.name}} > {{service}} > Configuraion Files > {{fileName}}"></header><div horizontal-ui-sheet-content=""><div class="btn-toolbar no-margin ml-n-xs"><div class="btn-group"><div dropdown="" dropdown-append-to-body="" class="dropdown"><button class="btn btn-default config-table-header-button" dropdown-toggle="">{{selectedInstance ? selectedInstance : \'- Choose instance -\'}}<span class="fa fa-angle-down pull-right"></span></button><ul class="dropdown-menu"><li ng-repeat="instance in instances track by $index" ng-class="{\'active\' : isInstanceActive(instance)}"><a ng-click="selectInstance(instance)">{{instance}}</a></li></ul></div></div><div class="btn-group"><div dropdown="" dropdown-append-to-body="" class="dropdown"><button class="btn btn-default config-table-header-button" dropdown-toggle="" ng-disabled="!selectedInstance">{{addNewVersionClicked ? \'-Create new version-\' : (selectedVersion ? selectedVersion : \'- Choose version -\')}} <span class="fa fa-angle-down pull-right"></span> <span class="label label-success pull-right mr-xs" ng-show="isVersionLive(selectedVersion)">Live</span></button><ul class="dropdown-menu"><li ng-click="clickAddNewVersion" ng-class="{\'active\' : addNewVersionClicked}"><a ng-click="clickAddNewVersion()">-Create new version-</a></li><li ng-repeat="version in versions[selectedInstance]" ng-class="{\'active\' : isVersionActive(version)}"><a ng-click="selectVersion(version)">{{version}} <span class="label label-success pull-right" ng-show="isVersionLive(version)">Live</span></a></li></ul></div></div></div><form ng-submit="saveFile()" class="file-content" ng-init="contentsChanged = false"><div class="btn-toolbar pull-right"><button class="btn btn-success mr-xs" ng-show="!isVersionLive(selectedVersion) && selectedInstance && selectedVersion && !addNewVersionClicked" mwl-confirm="" title="Are you sure?" message="Make {{selectedVersion}} live for {{selectedInstance}}" confirm-text="Yes" cancel-text="No" placement="bottom" on-confirm="makeLive(selectedInstance, selectedVersion)" type="button">Set live</button> <button class="btn btn-danger mr-xs" ng-disabled="!(fileContents && contentsChanged || addNewVersionClicked)" type="submit">Save</button> <button class="btn btn-default mr-n-xs" ng-disabled="!fileContents" type="button" ng-click="cloneFile()">Clone <i class="fa fa-clone ml-xs"></i></button> <a class="btn btn-default mr-xs" ng-disabled="!fileContents" ui-sref=".diff">Diff <i class="fa fa-exchange ml-xs"></i></a> <button class="btn btn-default" ng-disabled="!fileContents" type="button" ng-click="deleteFile()">Delete <i class="fa fa-trash-o ml-xs"></i></button></div><textarea class="form-control" ng-model="fileContents" ng-show="fileContents" ng-change="contentsChanged = true"></textarea></form></div></section>'),e.put("app/modules/configurations/services/state/instances/editor/editor.html",'<section horizontal-ui-sheet="" class="qor-sheet-full"><header horizontal-ui-sheet-header="" title="{{domain.name}} > {{service.service}}"></header><div horizontal-ui-sheet-content=""><div class="editor-content"><div class="loading" ng-if="!values">Loading...</div><div class="filled-content"><h3 class="config-table-header">Environment Variables</h3><table class="table table-bordered config-table"><thead table-fixed-header=""><tr><th></th><th ng-repeat="instance in editorService.instances | orderBy:\'\'" class="config-table-th"><h4>{{instance}}</h4><span dropdown="" dropdown-append-to-body="" class="dropdown" ng-hide="requestsCounter != 0"><button class="btn config-table-header-button" dropdown-toggle="">{{selectedVersion[instance]}} <span class="label label-success" ng-show="isLive(instance, selectedVersion[instance])">Live</span> <span class="fa fa-chevron-down pull-right"></span></button><ul class="dropdown-menu"><li ng-repeat="version in versions[instance] track by $index"><a ng-click="changeSelectedVersion(instance, version);" ng-class="{\'li-active\': selectedVersion[instance] == version}">{{version}} <span class="label label-success pull-right" ng-show="isLive(instance, version)">Live</span></a></li><li ng-click="clickAddNewVersion" ng-class="{\'li-active\' : addNewVersionClicked[instance]}"><a ng-click="clickAddNewVersion(instance)">-Create new version-</a></li></ul><span class="fa fa-copy copy-version" ng-click="makeCopy(instance, selectedVersion[instance])"></span> <span class="label label-success set-live-button" ng-hide="isLive(instance, selectedVersion[instance])" mwl-confirm="" instance="{{instance}}" title="Are you sure?" message="Make {{selectedVersion[instance]}} live for {{instance}}" confirm-text="Yes" cancel-text="No" placement="bottom" on-confirm="makeLive(instance, selectedVersion[instance], $event)">Set live</span></span></th><th class="rox-40px"></th></tr></thead><tbody><tr ng-repeat="value in values"><th inline-edit="value.name" is-name="true" on-save="updateName(oldName, newName)">{{value.name}}</th><th ng-repeat="instance in editorService.instances | orderBy:\'\'" parent="value[instance]" key="value.name" versions="editorService.versions" ng-class="{\'no-value\': !value[instance][selectedVersion[instance]][\'value\']}" instance="instance" version="selectedVersion[instance]" inline-edit="value[instance][selectedVersion[instance]][\'value\']" change-selected="changeSelectedVersion" on-delete="deleteValue(name, instance, version)" on-save="updateValues(name, newValue, instance, selectedVersion[instance], xDashVersion)" class="config-input-th"></th><th><div class="config-table-actions"><span ng-click="deleteInAllVersions(value.name)" class="fa fa-remove config-table-action-btn"></span></div></th></tr></tbody></table><div id="env-loader" ng-show="requestsCounter != 0"><img src="assets/images/cube.gif"></div></div><button class="btn btn-warning save-config-button" id="env-save-button" ng-click="save()" ng-show="isSavable()">Save</button> <button class="btn btn-warning add-config-button" ng-click="addValue()" ng-hide="requestsCounter != 0">Add new</button></div></div><script type="text/ng-template" id="inlineEdit.html"><span ng-show="isEditAvailable()" ng-click="edit()" class="config-table-action-btn fa fa-edit pull-right"></span> <textarea rows="1" type="text" on-enter="save()" on-esc="cancel()" ng-model="model" ng-show="editMode" class="config-input-edit"></textarea> <span ng-click="save()" ng-show="editMode && isSaveAvailable()" class="config-table-action-btn fa fa-check pull-right"></span> <span class="config-input-span" ng-hide="editMode" ng-click="edit()">{{model}}</span> <span ng-hide="isDeleteUnavailable()" ng-click="delete()" class="config-table-action-btn fa fa-remove pull-right"></span></script><script type="text/ng-template" id="newVersionModal.html"><div class="modal-header"> <button type="button" class="close" ng-click="cancel()" aria-label="Close"><span aria-hidden="true">&times;</span></button> <h4 class="modal-title">Create copy of {{version}} in {{instance}}</h4> </div> <div class="modal-body"> <div class="row"> <div class="col-md-7"> <input type="text" class="form-control" ng-model="newVersionName" placeholder="New version name"> </div> <div class="col-md-1 config-modal-devider">to</div> <div class="col-md-4"> <select id="select-type" ng-model="targetInstance" class="form-control"> <option value="">---Target instance---</option> <option ng-repeat="instance in instances" value="{{instance}}">{{instance}}</option> </select> </div> </div> </div> <div class="modal-footer"> <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button> <button class="btn btn-primary" id="config-modal-ok-button" type="button" ng-click="ok()">OK</button> </div></script></section>'),e.put("app/modules/configurations/services/state/instances/editor/new-version-modal.html",'<div class="modal-header"><button type="button" class="close" ng-click="cancel()" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4>Create new version for {{instance}}</h4></div><div class="modal-body text-center"><form class="form-horizontal"><div class="form-group"><div class="col-sm-12"><input type="text" class="form-control" ng-model="versionName" placeholder="New version name"></div></div></form></div><div class="modal-footer"><button class="btn btn-primary" type="button" ng-click="ok($event)">Create</button> <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button></div>'),e.put("app/modules/configurations/services/state/packages/editor/editor.html",'<section horizontal-ui-sheet="" class="qor-sheet-full"><header horizontal-ui-sheet-header="" title="{{domain.name}} > {{service.service}}"></header><div horizontal-ui-sheet-content=""><div class="editor-content"><div class="loading" ng-if="!values">Loading...</div><div class="filled-content"><h3 class="config-table-header">Packages</h3><table class="table table-bordered config-table"><thead table-fixed-header=""><tr><th></th><th ng-repeat="instance in editorService.instances | orderBy:\'\'" class="config-table-th"><h4>{{instance}}</h4><span dropdown="" dropdown-append-to-body="" class="dropdown"><button class="btn config-table-header-button" dropdown-toggle="" ng-hide="requestsCounter != 0">{{selectedVersion[instance]}} <span class="label label-success" ng-show="isLive(instance, selectedVersion[instance])">Live</span> <span class="fa fa-chevron-down pull-right"></span></button><ul class="dropdown-menu"><li ng-repeat="version in versions[instance] track by $index"><a ng-if="changeSelected(instance, version)" ng-hide="isVersionDeleted(instance, version)" ng-click="changeSelectedVersion(instance, version);" ng-class="{\'li-active\': selectedVersion[instance] == version}">{{version}} <span class="label label-success pull-right" ng-show="isLive(instance, version)">Live</span></a></li></ul><span class="fa fa-copy copy-version" ng-click="makeCopy(instance, selectedVersion[instance])" ng-hide="requestsCounter != 0"></span> <span class="label label-success set-live-button" ng-hide="isLive(instance, selectedVersion[instance]) || requestsCounter != 0" mwl-confirm="" instance="{{instance}}" title="Are you sure?" message="Make {{selectedVersion[instance]}} live for {{instance}}" confirm-text="Yes" cancel-text="No" placement="bottom" on-confirm="makeLive(instance, selectedVersion[instance], $event)">Set live</span></span></th></tr></thead><tbody ng-hide="requestsCounter != 0"><tr ng-repeat="(valueName, allValues) in values"><th>{{valueName}}</th><th ng-repeat="instance in editorService.instances | orderBy:\'\'" parent="value[instance]" key="valueName" versions="editorService.versions" ng-class="{\'no-value\': !values[valueName][instance][selectedVersion[instance]]}" instance="instance" version="selectedVersion[instance]" inline-edit="values[valueName][instance][selectedVersion[instance]]" change-selected="changeSelectedVersion" on-save="updateValues(name, newValue, instance, selectedVersion[instance], xDashVersion)" class="config-input-th"></th></tr></tbody></table><div id="env-loader" ng-show="requestsCounter != 0"><img src="assets/images/cube.gif"></div></div><button class="btn btn-warning save-config-button" id="env-save-button" ng-click="save()" ng-show="isSavable()">Save</button></div></div><script type="text/ng-template" id="inlineEdit.html"><span ng-show="isEditAvailable()" ng-click="edit()" class="config-table-action-btn fa fa-edit pull-right"></span> <textarea rows="1" type="text" on-enter="save()" on-esc="cancel()" ng-model="model" ng-show="editMode" class="config-input-edit"></textarea> <span ng-click="save()" ng-show="editMode && isSaveAvailable()" class="config-table-action-btn fa fa-check pull-right"></span> <span class="config-input-span" ng-hide="editMode" ng-click="edit()">{{model}}</span></script><script type="text/ng-template" id="newVersionModal.html"><div class="modal-header"> <button type="button" class="close" ng-click="cancel()" aria-label="Close"><span aria-hidden="true">&times;</span></button> <h4 class="modal-title">Create copy of {{version}} in {{instance}}</h4> </div> <div class="modal-body"> <div class="row"> <div class="col-md-7"> <input type="text" class="form-control" ng-model="newVersionName" placeholder="New version name"> </div> <div class="col-md-1 config-modal-devider">to</div> <div class="col-md-4"> <select id="select-type" ng-model="targetInstance" class="form-control"> <option value="">---Target instance---</option> <option ng-repeat="instance in instances" value="{{instance}}">{{instance}}</option> </select> </div> </div> </div> <div class="modal-footer"> <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button> <button class="btn btn-primary" id="config-modal-ok-button" type="button" ng-click="ok()">OK</button> </div></script></section>'),e.put("app/modules/docker/domain/dockers/menu/containers/containers.html",'<section horizontal-ui-sheet="" class="qor-sheet-half"><header horizontal-ui-sheet-header="" title="Containers"></header><div horizontal-ui-sheet-content=""><h3 class="config-table-header">Containers</h3><div class="btn-group pull-left"><div dropdown="" dropdown-append-to-body="" class="dropdown"><button class="btn btn-default config-table-header-button" dropdown-toggle="" aria-haspopup="true" aria-expanded="false">Action<span class="fa fa-angle-down pull-right"></span></button><ul class="dropdown-menu"><li><a ng-click="startAction()">Start</a></li><li><a ng-click="stopAction()">Stop</a></li><li><a ng-click="restartAction()">Restart</a></li><li><a ng-click="killAction()">Kill</a></li><li><a ng-click="pauseAction()">Pause</a></li><li><a ng-click="unpauseAction()">Unpause</a></li><li><a ng-click="removeAction()">Remove</a></li></ul></div></div><div class="text-right containers-form"><input class="new-checkbox bordered" type="checkbox" ng-model="displayAll" id="displayAll" ng-change="toggleGetAll()"><label for="displayAll"></label><p>Display All</p><input type="text" class="form-control" id="filter" placeholder="Filter" ng-model="filter"> <label class="sr-only" for="filter">Filter</label></div><table class="table containers-table"><thead><tr><th><input class="new-checkbox bordered" id="header-checkbox" ng-model="toggle" ng-change="toggleSelectAll()" type="checkbox"><label for="header-checkbox"></label> ACTION</th><th>NAME</th><th>IMAGE</th><th>COMMAND</th><th>CREATED</th><th>STATUS</th></tr></thead><tbody><tr ng-repeat="container in containers | filter:filter | orderBy:predicate"><td class="center-text"><input class="new-checkbox bordered" id="check-{{container.Id}}" ng-model="container.Checked" type="checkbox"><label for="check-{{container.Id}}"></label></td><td><a ui-sref="app.docker.domain.dockers.menu.containers.container({containerId: container.Id})">{{ container|containername}}</a></td><td><a ui-sref="app.docker.domain.dockers.menu.images.image({imageId: container.Image})">{{ container.Image }}</a></td><td>{{ container.Command|truncate:40 }}</td><td>{{ container.Created|getdate }}</td><td><span class="label label-{{ container.Status|statusbadge }}">{{ container.Status }}</span></td></tr></tbody></table></div></section>'),e.put("app/modules/docker/domain/dockers/menu/images/images.html",'<section horizontal-ui-sheet="" class="qor-sheet-half"><header horizontal-ui-sheet-header="" title="{{dockerId}}"></header><div horizontal-ui-sheet-content=""><h3 class="config-table-header">Images</h3><div><div class="btn-group pull-left"><div dropdown="" dropdown-append-to-body="" class="dropdown"><button class="btn btn-default config-table-header-button" dropdown-toggle="" aria-haspopup="true" aria-expanded="false">Action<span class="fa fa-angle-down pull-right"></span></button><ul class="dropdown-menu"><li><a ng-click="removeAction()">Remove</a></li></ul></div></div><button class="btn btn-default config-table-header-button" id="pull-image" ng-click="pullImage()">Pull</button><div class="pull-right form-inline containers-form"><input type="text" class="form-control" id="filter" placeholder="Filter" ng-model="filter"> <label class="sr-only" for="filter">Filter</label></div></div><table class="table images-table"><thead><tr><th><input class="new-checkbox bordered" id="header-checkbox" ng-model="toggle" ng-change="toggleSelectAll()" type="checkbox"><label for="header-checkbox"></label> ACTION</th><th>ID</th><th>REPOSITORY</th><th>VIRTUALSIZE</th><th>CREATED</th></tr></thead><tbody><tr ng-repeat="image in images | filter:filter | orderBy:predicate"><td class="center-text"><input class="new-checkbox bordered" id="check-{{image.Id}}" ng-model="image.Checked" type="checkbox"><label for="check-{{image.Id}}"></label></td><td><a ui-sref="app.docker.domain.dockers.menu.images.image({imageId: image.Id, imageTag: (image|repotag)})">{{ image.Id|truncate:20}}</a></td><td>{{ image|repotag }}</td><td>{{ image.VirtualSize|humansize }}</td><td>{{ image.Created|getdate }}</td></tr></tbody></table></div></section>'),e.put("app/modules/docker/domain/dockers/menu/images/pull-image.html",'<div class="modal-header"><button type="button" class="close" ng-click="close()" data-dismiss="modal" aria-hidden="true">&times;</button><h3>Pull Image</h3></div><div class="modal-body"><form novalidate="" role="form" name="pullForm"><div class="form-group"><label>Registry:</label> <input type="text" ng-model="config.registry" class="form-control" placeholder="Registry. Leave empty to user docker hub"></div><div class="form-group"><label>Repo:</label> <input type="text" ng-model="config.repo" class="form-control" placeholder="Repository - usually your username."></div><div class="form-group"><label>Image Name:</label> <input type="text" ng-model="config.fromImage" class="form-control" placeholder="Image name" required=""></div><div class="form-group"><label>Tag Name:</label> <input type="text" ng-model="config.tag" class="form-control" placeholder="Tag name. If empty it will download ALL tags."></div></form></div><div class="alert alert-error" id="error-message" style="display:none">{{ error }}</div><div class="modal-footer"><a href="" class="btn btn-primary" ng-click="pull()">Pull</a></div>'),e.put("app/modules/docker/domain/dockers/menu/info/info.html",'<section horizontal-ui-sheet="" class="qor-sheet-half"><header horizontal-ui-sheet-header="" title="Information"></header><div horizontal-ui-sheet-content=""><div class="detail"><h3 class="config-table-header">Docker Information</h3><table class="docker-info-small"><tbody><tr><td>API Endpoint:</td><td>{{ endpoint }}</td></tr><tr><td>API Version:</td><td>{{ docker.ApiVersion }}</td></tr><tr><td>Docker version:</td><td>{{ docker.Version }}</td></tr><tr><td>Git Commit:</td><td>{{ docker.GitCommit }}</td></tr><tr><td>Go Version:</td><td>{{ docker.GoVersion }}</td></tr></tbody></table><table class="table docker-info-table"><tbody><tr><td>Containers:</td><td>{{ info.Containers }}</td></tr><tr><td>Images:</td><td>{{ info.Images }}</td></tr><tr><td>Debug:</td><td>{{ info.Debug }}</td></tr><tr><td>CPUs:</td><td>{{ info.NCPU }}</td></tr><tr><td>Total Memory:</td><td>{{ info.MemTotal|humansize }}</td></tr><tr><td>Operating System:</td><td>{{ info.OperatingSystem }}</td></tr><tr><td>Kernel Version:</td><td>{{ info.KernelVersion }}</td></tr><tr><td>ID:</td><td>{{ info.ID }}</td></tr><tr><td>Labels:</td><td>{{ info.Labels }}</td></tr><tr><td>File Descriptors:</td><td>{{ info.NFd }}</td></tr><tr><td>Goroutines:</td><td>{{ info.NGoroutines }}</td></tr><tr><td>Storage Driver:</td><td>{{ info.Driver }}</td></tr><tr><td>Storage Driver Status:</td><td><p ng-repeat="val in info.DriverStatus">{{ val[0] }}: {{ val[1] }}</p></td></tr><tr><td>Execution Driver:</td><td>{{ info.ExecutionDriver }}</td></tr><tr><td>Events:</td><td><a ui-sref=".events">Events</a></td></tr><tr><td>IPv4 Forwarding:</td><td>{{ info.IPv4Forwarding }}</td></tr><tr><td>Index Server Address:</td><td>{{ info.IndexServerAddress }}</td></tr><tr><td>Init Path:</td><td>{{ info.InitPath }}</td></tr><tr><td>Docker Root Directory:</td><td>{{ info.DockerRootDir }}</td></tr><tr><td>Init SHA1</td><td>{{ info.InitSha1 }}</td></tr><tr><td>Memory Limit:</td><td>{{ info.MemoryLimit }}</td></tr><tr><td>Swap Limit:</td><td>{{ info.SwapLimit }}</td></tr></tbody></table></div></div></section>'),e.put("app/modules/docker/domain/dockers/menu/summary/summary.html",'<section horizontal-ui-sheet="" class="qor-sheet-half"><header horizontal-ui-sheet-header="" title="Summary"></header><div horizontal-ui-sheet-content=""><div class="row"><div class="col-xs-6 centered-text"><h3>Running Containers</h3><ul class="containers-list"><li ng-repeat="container in containers|orderBy:predicate"><a ui-sref="app.docker.domain.dockers.menu.containers.container({containerId: container.Id})">{{ container|containername }}</a> <span class="label label-{{ container.Status|statusbadge }}">{{ container.Status }}</span></li></ul></div><div class="col-xs-6 centered-text"><h3>Status</h3><canvas id="containers-chart"><p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p></canvas><div id="chart-legend"></div></div></div><div class="row containers-stat"><div class="col-xs-12 centered-text" id="stats"><h3>Containers created</h3><canvas id="containers-started-chart" width="700"><p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p></canvas><h3>Images created</h3><canvas id="images-created-chart" width="700"><p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p></canvas></div></div></div></section>'),e.put("app/modules/docker/domain/dockers/menu/containers/container/container.html",'<section horizontal-ui-sheet="" class="qor-sheet-half"><header horizontal-ui-sheet-header="" title="{{container.Name}}"></header><div horizontal-ui-sheet-content=""><div class="detail container-details"><div ng-if="!container.edit" class="name"><h4>Container: {{ container.Name }} <button class="btn btn-primary" ng-click="container.edit = true;">Rename</button></h4></div><div ng-if="container.edit" id="name-edit"><h4>Container: <input type="text" ng-model="container.newContainerName"> <button class="btn btn-success" ng-click="renameContainer()">Save</button> <button class="btn btn-danger" ng-click="container.edit = false;">&times;</button></h4></div><div class="btn-group detail" id="actions"><button class="btn btn-success" ng-click="start()" ng-show="!container.State.Running">Start</button> <button class="btn btn-warning" ng-click="stop()" ng-show="container.State.Running && !container.State.Paused">Stop</button> <button class="btn btn-danger" ng-click="kill()" ng-show="container.State.Running && !container.State.Paused">Kill</button> <button class="btn btn-info" ng-click="pause()" ng-show="container.State.Running && !container.State.Paused">Pause</button> <button class="btn btn-success" ng-click="unpause()" ng-show="container.State.Running && container.State.Paused">Unpause</button> <button class="btn btn-success" ng-click="restart()" ng-show="container.State.Running && !container.State.Stopped">Restart</button> <button class="btn btn-primary" ng-click="commit()" ng-show="container.State.Running && !container.State.Paused">Commit</button></div><table class="table"><tbody><tr><td>Created:</td><td>{{ container.Created }}</td></tr><tr><td>Path:</td><td>{{ container.Path }}</td></tr><tr><td>Args:</td><td>{{ container.Args }}</td></tr><tr><td>Exposed Ports:</td><td><ul style="display: inline-table"><li ng-repeat="(k, v) in container.Config.ExposedPorts">{{ k }}</li></ul></td></tr><tr><td>Environment:</td><td><ul style="display: inline-table"><li ng-repeat="k in container.Config.Env">{{ k }}</li></ul></td></tr><tr><td>Publish All:</td><td>{{ container.HostConfig.PublishAllPorts }}</td></tr><tr><td>Ports:</td><td><ul style="display:inline-table"><li ng-repeat="(containerport, hostports) in container.HostConfig.PortBindings">{{ containerport }} => <span class="label label-default" ng-repeat="(k,v) in hostports">{{ v.HostIp }}:{{ v.HostPort }}</span></li></ul></td></tr><tr><td>Hostname:</td><td>{{ container.Config.Hostname }}</td></tr><tr><td>IPAddress:</td><td>{{ container.NetworkSettings.IPAddress }}</td></tr><tr><td>Cmd:</td><td>{{ container.Config.Cmd }}</td></tr><tr><td>Entrypoint:</td><td>{{ container.Config.Entrypoint }}</td></tr><tr><td>Volumes:</td><td>{{ container.Volumes }}</td></tr><tr><td>SysInitpath:</td><td>{{ container.SysInitPath }}</td></tr><tr><td>Image:</td><td><a ui-sref="app.docker.domain.dockers.menu.images.image({imageId: container.Image})">{{ container.Image }}</a></td></tr><tr><td>State:</td><td><span class="label {{ container.State|getstatelabel }}">{{ container.State|getstatetext }}</span></td></tr><tr><td>Logs:</td><td><a ui-sref=".logs">stdout/stderr</a></td></tr><tr><td>Stats:</td><td><a ui-sref=".stats">stats</a></td></tr><tr><td>Top:</td><td><a ui-sref=".top">Top</a></td></tr></tbody></table><div class="changes-container"><div>Changes: <i class="icon-refresh" style="width:32px;height:32px;" ng-click="getChanges()"></i></div><div><ul><li ng-repeat="change in changes | filter:hasContent"><strong>{{ change.Path }}</strong> {{ change.Kind }}</li></ul></div></div><button class="btn btn-remove-container" ng-click="remove()">Remove Container</button></div></div></section>'),e.put("app/modules/docker/domain/dockers/menu/images/image/create-modal.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h3>Create And Start Container From Image</h3></div><div class="modal-body"><form role="form"><accordion close-others="true"><accordion-group heading="Container options" is-open="menuStatus.containerOpen"><fieldset><div class="row"><div class="col-xs-6"><div class="form-group"><label>Cmd:</label> <input type="text" placeholder=\'["/bin/echo", "Hello world"]\' ng-model="config.Cmd" class="form-control"> <small>Input commands as a raw string or JSON array</small></div><div class="form-group"><label>Entrypoint:</label> <input type="text" ng-model="config.Entrypoint" class="form-control" placeholder="./entrypoint.sh"></div><div class="form-group"><label>Name:</label> <input type="text" ng-model="config.name" class="form-control"></div><div class="form-group"><label>Hostname:</label> <input type="text" ng-model="config.Hostname" class="form-control"></div><div class="form-group"><label>Domainname:</label> <input type="text" ng-model="config.Domainname" class="form-control"></div><div class="form-group"><label>User:</label> <input type="text" ng-model="config.User" class="form-control"></div><div class="form-group"><label>Memory:</label> <input type="number" ng-model="config.Memory" class="form-control"></div><div class="form-group"><label>Volumes:</label><div ng-repeat="volume in config.Volumes"><div class="form-group form-inline"><input type="text" ng-model="volume.name" class="form-control" placeholder="/var/data"> <button type="button" class="btn btn-danger btn-sm" ng-click="rmEntry(config.Volumes, volume)">x</button></div></div><button type="button" class="btn btn-success btn-sm" ng-click="addEntry(config.Volumes, {name: \'\'})">Add Volume</button></div></div><div class="col-xs-6"><div class="form-group"><label>MemorySwap:</label> <input type="number" ng-model="config.MemorySwap" class="form-control"></div><div class="form-group"><label>CpuShares:</label> <input type="number" ng-model="config.CpuShares" class="form-control"></div><div class="form-group"><label>Cpuset:</label> <input type="text" ng-model="config.Cpuset" class="form-control" placeholder="1,2"> <small>Input as comma-separated list of numbers</small></div><div class="form-group"><label>WorkingDir:</label> <input type="text" ng-model="config.WorkingDir" class="form-control" placeholder="/app"></div><div class="form-group"><label>MacAddress:</label> <input type="text" ng-model="config.MacAddress" class="form-control" placeholder="12:34:56:78:9a:bc"></div><div class="form-group"><label for="networkDisabled">NetworkDisabled:</label> <input class="new-checkbox bordered" id="networkDisabled" ng-model="config.NetworkDisabled" type="checkbox"><label for="networkDisabled"></label></div><div class="form-group"><label for="tty">Tty:</label> <input class="new-checkbox bordered" id="tty" ng-model="config.Tty" type="checkbox"><label for="tty"></label></div><div class="form-group"><label for="openStdin">OpenStdin:</label> <input class="new-checkbox bordered" id="openStdin" ng-model="config.OpenStdin" type="checkbox"><label for="openStdin"></label></div><div class="form-group"><label for="stdinOnce">StdinOnce:</label> <input class="new-checkbox bordered" id="stdinOnce" ng-model="config.StdinOnce" type="checkbox"><label for="stdinOnce"></label></div><div class="form-group"><label>SecurityOpts:</label><div ng-repeat="opt in config.SecurityOpts"><div class="form-group form-inline"><input type="text" ng-model="opt.name" class="form-control" placeholder="label:type:svirt_apache"> <button type="button" class="btn btn-danger btn-sm" ng-click="rmEntry(config.SecurityOpts, opt)">x</button></div></div><button type="button" class="btn btn-success btn-sm" ng-click="addEntry(config.SecurityOpts, {name: \'\'})">Add Option</button></div></div></div><hr><div class="form-group"><label>Env:</label><div ng-repeat="envar in config.Env"><div class="form-group form-inline"><div class="form-group"><label class="sr-only">Variable Name:</label> <input type="text" ng-model="envar.name" class="form-control" placeholder="NAME"></div><div class="form-group"><label class="sr-only">Variable Value:</label> <input type="text" ng-model="envar.value" class="form-control" placeholder="value"></div><div class="form-group"><button class="btn btn-danger btn-xs form-control" ng-click="rmEntry(config.Env, envar)">x</button></div></div></div><button type="button" class="btn btn-success btn-sm" ng-click="addEntry(config.Env, {name: \'\', value: \'\'})">Add environment variable</button></div></fieldset></accordion-group><accordion-group heading="HostConfig options" is-open="menuStatus.hostConfigOpen"><fieldset><div class="row"><div class="col-xs-6"><div class="form-group"><label>Binds:</label><div ng-repeat="bind in config.HostConfig.Binds"><div class="form-group form-inline"><input type="text" ng-model="bind.name" class="form-control" placeholder="/host:/container"> <button type="button" class="btn btn-danger btn-sm" ng-click="rmEntry(config.HostConfig.Binds, bind)">x</button></div></div><button type="button" class="btn btn-success btn-sm" ng-click="addEntry(config.HostConfig.Binds, {name: \'\'})">Add Bind</button></div><div class="form-group"><label>Links:</label><div ng-repeat="link in config.HostConfig.Links"><div class="form-group form-inline"><input type="text" ng-model="link.name" class="form-control" placeholder="web:db"> <button type="button" class="btn btn-danger btn-sm" ng-click="rmEntry(config.HostConfig.Links, link)">x</button></div></div><button type="button" class="btn btn-success btn-sm" ng-click="addEntry(config.HostConfig.Links, {name: \'\'})">Add Link</button></div><div class="form-group"><label>Dns:</label><div ng-repeat="entry in config.HostConfig.Dns"><div class="form-group form-inline"><input type="text" ng-model="entry.name" class="form-control" placeholder="8.8.8.8"> <button type="button" class="btn btn-danger btn-sm" ng-click="rmEntry(config.HostConfig.Dns, entry)">x</button></div></div><button type="button" class="btn btn-success btn-sm" ng-click="addEntry(config.HostConfig.Dns, {name: \'\'})">Add entry</button></div><div class="form-group"><label>DnsSearch:</label><div ng-repeat="entry in config.HostConfig.DnsSearch"><div class="form-group form-inline"><input type="text" ng-model="entry.name" class="form-control" placeholder="example.com"> <button type="button" class="btn btn-danger btn-sm" ng-click="rmEntry(config.HostConfig.DnsSearch, entry)">x</button></div></div><button type="button" class="btn btn-success btn-sm" ng-click="addEntry(config.HostConfig.DnsSearch, {name: \'\'})">Add entry</button></div><div class="form-group"><label>CapAdd:</label><div ng-repeat="entry in config.HostConfig.CapAdd"><div class="form-group form-inline"><input type="text" ng-model="entry.name" class="form-control" placeholder="cap_sys_admin"> <button type="button" class="btn btn-danger btn-sm" ng-click="rmEntry(config.HostConfig.CapAdd, entry)">x</button></div></div><button type="button" class="btn btn-success btn-sm" ng-click="addEntry(config.HostConfig.CapAdd, {name: \'\'})">Add entry</button></div><div class="form-group"><label>CapDrop:</label><div ng-repeat="entry in config.HostConfig.CapDrop"><div class="form-group form-inline"><input type="text" ng-model="entry.name" class="form-control" placeholder="cap_sys_admin"> <button type="button" class="btn btn-danger btn-sm" ng-click="rmEntry(config.HostConfig.CapDrop, entry)">x</button></div></div><button type="button" class="btn btn-success btn-sm" ng-click="addEntry(config.HostConfig.CapDrop, {name: \'\'})">Add entry</button></div></div><div class="col-xs-6"><div class="form-group"><label>NetworkMode:</label> <input type="text" ng-model="config.HostConfig.NetworkMode" class="form-control" placeholder="bridge"></div><div class="form-group"><label for="publishAllPorts">PublishAllPorts:</label> <input class="new-checkbox bordered" id="publishAllPorts" ng-model="config.HostConfig.PublishAllPorts" type="checkbox"><label for="publishAllPorts"></label></div><div class="form-group"><label for="privileged">Privileged:</label> <input class="new-checkbox bordered" id="privileged" ng-model="config.HostConfig.Privileged" type="checkbox"><label for="privileged"></label></div><div class="form-group"><label>VolumesFrom:</label><div ng-repeat="volume in config.HostConfig.VolumesFrom"><div class="form-group form-inline"><select ng-model="volume.name" ng-options="name for name in containerNames track by name" class="form-control"></select><button class="btn btn-danger btn-xs form-control" ng-click="rmEntry(config.HostConfig.VolumesFrom, volume)">x</button></div></div><button type="button" class="btn btn-success btn-sm" ng-click="addEntry(config.HostConfig.VolumesFrom, {name: \'\'})">Add volume</button></div><div class="form-group"><label>RestartPolicy:</label><select ng-model="config.HostConfig.RestartPolicy.name"><option value="">disabled</option><option value="always">always</option><option value="on-failure">on-failure</option></select><label>MaximumRetryCount:</label> <input type="number" ng-model="config.HostConfig.RestartPolicy.MaximumRetryCount"></div></div></div><hr><div class="form-group"><label>ExtraHosts:</label><div ng-repeat="entry in config.HostConfig.ExtraHosts"><div class="form-group form-inline"><div class="form-group"><label class="sr-only">Hostname:</label> <input type="text" ng-model="entry.host" class="form-control" placeholder="hostname"></div><div class="form-group"><label class="sr-only">IP Address:</label> <input type="text" ng-model="entry.ip" class="form-control" placeholder="127.0.0.1"></div><div class="form-group"><button class="btn btn-danger btn-xs form-control" ng-click="rmEntry(config.HostConfig.ExtraHosts, entry)">x</button></div></div></div><button type="button" class="btn btn-success btn-sm" ng-click="addEntry(config.HostConfig.ExtraHosts, {host: \'\', ip: \'\'})">Add extra host</button></div><div class="form-group"><label>LxcConf:</label><div ng-repeat="entry in config.HostConfig.LxcConf"><div class="form-group form-inline"><div class="form-group"><label class="sr-only">Name:</label> <input type="text" ng-model="entry.name" class="form-control" placeholder="lxc.utsname"></div><div class="form-group"><label class="sr-only">Value:</label> <input type="text" ng-model="entry.value" class="form-control" placeholder="docker"></div><div class="form-group"><button class="btn btn-danger btn-xs form-control" ng-click="rmEntry(config.HostConfig.LxcConf, entry)">x</button></div></div></div><button type="button" class="btn btn-success btn-sm" ng-click="addEntry(config.HostConfig.LxcConf, {name: \'\', value: \'\'})">Add Entry</button></div><div class="form-group"><label>Devices:</label><div ng-repeat="device in config.HostConfig.Devices"><div class="form-group form-inline inline-four"><label class="sr-only">PathOnHost:</label> <input type="text" ng-model="device.PathOnHost" class="form-control" placeholder="PathOnHost"> <label class="sr-only">PathInContainer:</label> <input type="text" ng-model="device.PathInContainer" class="form-control" placeholder="PathInContainer"> <label class="sr-only">CgroupPermissions:</label> <input type="text" ng-model="device.CgroupPermissions" class="form-control" placeholder="CgroupPermissions"> <button class="btn btn-danger btn-xs form-control" ng-click="rmEntry(config.HostConfig.Devices, device)">x</button></div></div><button type="button" class="btn btn-success btn-sm" ng-click="addEntry(config.HostConfig.Devices, { PathOnHost: \'\', PathInContainer: \'\', CgroupPermissions: \'\'})">Add Device</button></div><div class="form-group"><label>PortBindings:</label><div ng-repeat="portBinding in config.HostConfig.PortBindings"><div class="form-group form-inline inline-four"><label class="sr-only">Host IP:</label> <input type="text" ng-model="portBinding.ip" class="form-control" placeholder="Host IP Address"> <label class="sr-only">Host Port:</label> <input type="text" ng-model="portBinding.extPort" class="form-control" placeholder="Host Port"> <label class="sr-only">Container port:</label> <input type="text" ng-model="portBinding.intPort" class="form-control" placeholder="Container Port"><select ng-model="portBinding.protocol"><option value="">tcp</option><option value="udp">udp</option></select><button class="btn btn-danger btn-xs form-control" ng-click="rmEntry(config.HostConfig.PortBindings, portBinding)">x</button></div></div><button type="button" class="btn btn-success btn-sm" ng-click="addEntry(config.HostConfig.PortBindings, {ip: \'\', extPort: \'\', intPort: \'\'})">Add Port Binding</button></div></fieldset></accordion-group></accordion></form></div><div class="modal-footer"><a href="" class="btn btn-primary btn-lg" ng-click="create()">Create</a></div>'),e.put("app/modules/docker/domain/dockers/menu/images/image/image.html",'<section horizontal-ui-sheet="" class="qor-sheet-half"><header horizontal-ui-sheet-header="" title="{{image.Id}}"></header><div horizontal-ui-sheet-content=""><div class="alert alert-error" id="error-message" style="display:none">{{ error }}</div><div class="detail"><h4>Image: {{ tag }}</h4><div class="btn-group detail"><button class="btn btn-success" ng-click="openCreateImageModal()">Create</button></div><div><h4>Containers created:</h4><canvas id="containers-started-chart" width="750"><p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p></canvas></div><table class="table table-striped"><tbody><tr><td>Created:</td><td>{{ image.Created }}</td></tr><tr><td>Parent:</td><td><a ui-sref=".({imageId: image.Parent})">{{ image.Parent }}</a></td></tr><tr><td>Size (Virtual Size):</td><td>{{ image.Size|humansize }} ({{ image.VirtualSize|humansize }})</td></tr><tr><td>Hostname:</td><td>{{ image.ContainerConfig.Hostname }}</td></tr><tr><td>User:</td><td>{{ image.ContainerConfig.User }}</td></tr><tr><td>Cmd:</td><td>{{ image.ContainerConfig.Cmd }}</td></tr><tr><td>Volumes:</td><td>{{ image.ContainerConfig.Volumes }}</td></tr><tr><td>Volumes from:</td><td>{{ image.ContainerConfig.VolumesFrom }}</td></tr><tr><td>Built with:</td><td>Docker {{ image.DockerVersion }} on {{ image.Os}}, {{ image.Architecture }}</td></tr></tbody></table><div class="row-fluid"><div class="span1">History:</div><div class="span5"><i class="icon-refresh" style="width:32px;height:32px;" ng-click="getHistory()"></i></div></div><div class="well well-large"><ul><li ng-repeat="change in history"><strong>{{ change.Id }}</strong>: Created: {{ change.Created|getdate }} Created by: {{ change.CreatedBy }}</li></ul></div><hr><div class="row-fluid"><form class="form-inline" role="form"><fieldset><legend>Tag image</legend><div class="form-group"><label>Tag:</label> <input type="text" placeholder="repo..." ng-model="tag1.repo" class="form-control"></div><div class="form-group"><input class="new-checkbox bordered" id="check-tag" ng-model="tag1.force" type="checkbox"><label for="check-tag"></label> Force?</div><input type="button" ng-click="updateTag()" value="Tag" class="btn btn-primary"></fieldset></form></div><hr><div class="btn-remove"><button class="btn btn-large btn-block btn-primary btn-danger" ng-click="remove()">Remove Image</button></div></div></div></section>'),e.put("app/modules/docker/domain/dockers/menu/info/events/events.html",'<section horizontal-ui-sheet="" class="qor-sheet-half"><header horizontal-ui-sheet-header="" title="Events"></header><div horizontal-ui-sheet-content=""><div class="row"><div class="col-xs-12"><form class="form-inline"><div class="form-group"><label for="since">Since:</label> <input id="since" type="datetime-local" ng-model="model.since" class="form-control" step="any"></div><div class="form-group"><label for="until">Until:</label> <input id="until" type="datetime-local" ng-model="model.until" class="form-control" step="any"></div><button ng-click="updateEvents()" class="btn btn-warning">Update</button></form><br><table class="table containers-table"><tbody><tr><th>Event</th><th>From</th><th>ID</th><th>Time</th></tr><tr ng-repeat="event in dockerEvents"><td ng-bind="event.status"></td><td ng-bind="event.from"></td><td ng-bind="event.id"></td><td ng-bind="event.time * 1000 | date:\'medium\'"></td></tr></tbody></table></div></div></div></section>'),e.put("app/modules/docker/domain/dockers/menu/containers/container/logs/logs.html",'<section horizontal-ui-sheet="" class="qor-sheet-half"><header horizontal-ui-sheet-header="" title="Logs"></header><div horizontal-ui-sheet-content=""><div class="logs"><div class="docker-logs-left"><h4 class="display-inline">Logs for container: <a ui-sref="app.docker.domain.dockers.menu.containers.container({containerId: container.Id})">{{ container.Name }}</a></h4><div class="btn-group detail log-btns"><button class="btn btn-info" ng-click="scrollTo(\'stdout\')">stdout</button> <button class="btn btn-primary" ng-click="scrollTo(\'stderr\')">stderr</button></div></div><div class="reload-logs pull-right"><div><a class="btn btn-warning" ng-click="toggleTail()" role="button">Reload logs</a> <input id="tailLines" type="number" ng-model="tailLines" ng-keypress="($event.which === 13)? toggleTail() : 0"> <label for="tailLines">lines</label> <input class="new-checkbox bordered" id="timestampToggle" ng-model="showTimestamps" ng-change="toggleTimestamps()" type="checkbox"><label for="timestampToggle"></label>Timestamp</div></div><div class="col-xs-12"><div class="panel panel-default logs-panel"><div class="panel-heading"><h3 id="stdout" class="panel-title">STDOUT</h3></div><div class="panel-body"><pre id="stdoutLog" class="pre-scrollable pre-x-scrollable">{{stdout}}</pre></div></div></div><div class="col-xs-12"><div class="panel panel-default logs-panel"><div class="panel-heading"><h3 id="stderr" class="panel-title">STDERR</h3></div><div class="panel-body"><pre id="stderrLog" class="pre-scrollable pre-x-scrollable">{{stderr}}</pre></div></div></div></div></div></section>'),e.put("app/modules/docker/domain/dockers/menu/containers/container/stats/stats.html",'<section horizontal-ui-sheet="" class="qor-sheet-half"><header horizontal-ui-sheet-header="" title="Stats"></header><div horizontal-ui-sheet-content=""><div class="row"><div class="col-xs-12"><h2>CPU</h2><div class="row"><div class="col-sm-7"><canvas id="cpu-stats-chart" width="650" height="300"></canvas></div></div><h2>Memory</h2><div class="row"><div class="col-sm-7"><canvas id="memory-stats-chart" width="650" height="300"></canvas></div><div class="col-sm-offset-1 col-sm-4"><table class="table"><tr><td>Max usage</td><td>{{ data.memory_stats.max_usage | humansize }}</td></tr><tr><td>Limit</td><td>{{ data.memory_stats.limit | humansize }}</td></tr><tr><td>Fail count</td><td>{{ data.memory_stats.failcnt }}</td></tr></table><accordion><accordion-group heading="Other stats"><table class="table"><tr ng-repeat="(key, value) in data.memory_stats.stats"><td>{{ key }}</td><td>{{ value }}</td></tr></table></accordion-group></accordion></div></div><h1>Network</h1><div class="row"><div class="col-sm-7"><canvas id="network-stats-chart" width="650" height="300"></canvas></div><div class="col-sm-offset-1 col-sm-4"><div id="network-legend" style="margin-bottom: 20px;"></div><accordion><accordion-group heading="Other stats"><table class="table"><tr ng-repeat="(key, value) in data.network"><td>{{ key }}</td><td>{{ value }}</td></tr></table></accordion-group></accordion></div></div></div></div></div></section>'),e.put("app/modules/docker/domain/dockers/menu/containers/container/top/top.html",'<section horizontal-ui-sheet="" class="qor-sheet-half"><header horizontal-ui-sheet-header="" title="Top"></header><div horizontal-ui-sheet-content=""><div class="containerTop"><div class="form-group col-xs-2"><input type="text" class="form-control" placeholder="[options] (aux)" ng-model="ps_args"></div><button type="button" class="btn qor-btn-primary" ng-click="getTop()">Submit</button><table class="table table-striped"><thead><tr><th ng-repeat="title in containerTop.Titles">{{title}}</th></tr></thead><tbody><tr ng-repeat="processInfos in containerTop.Processes"><td ng-repeat="processInfo in processInfos track by $index">{{processInfo}}</td></tr></tbody></table></div></div></section>')
}]);